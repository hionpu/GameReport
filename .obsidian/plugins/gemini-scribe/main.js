/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Zf=Object.create;var pn=Object.defineProperty;var Qf=Object.getOwnPropertyDescriptor;var Xf=Object.getOwnPropertyNames;var jf=Object.getPrototypeOf,ed=Object.prototype.hasOwnProperty;var td=(n,e,t)=>e in n?pn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var V=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),nd=(n,e)=>{for(var t in e)pn(n,t,{get:e[t],enumerable:!0})},Zs=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Xf(e))!ed.call(n,r)&&r!==t&&pn(n,r,{get:()=>e[r],enumerable:!(i=Qf(e,r))||i.enumerable});return n};var Rr=(n,e,t)=>(t=n!=null?Zf(jf(n)):{},Zs(e||!n||!n.__esModule?pn(t,"default",{value:n,enumerable:!0}):t,n)),id=n=>Zs(pn({},"__esModule",{value:!0}),n);var he=(n,e,t)=>td(n,typeof e!="symbol"?e+"":e,t);var pe=V(we=>{"use strict";we.__esModule=!0;we.extend=ru;we.indexOf=_g;we.escapeExpression=Mg;we.isEmpty=xg;we.createFrame=kg;we.blockParams=Ag;we.appendContextPath=Ig;var Fg={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},wg=/[&<>"'`=]/g,Sg=/[&<>"'`=]/;function Tg(n){return Fg[n]}function ru(n){for(var e=1;e<arguments.length;e++)for(var t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&(n[t]=arguments[e][t]);return n}var oo=Object.prototype.toString;we.toString=oo;var ro=function(e){return typeof e=="function"};ro(/x/)&&(we.isFunction=ro=function(n){return typeof n=="function"&&oo.call(n)==="[object Function]"});we.isFunction=ro;var ou=Array.isArray||function(n){return n&&typeof n=="object"?oo.call(n)==="[object Array]":!1};we.isArray=ou;function _g(n,e){for(var t=0,i=n.length;t<i;t++)if(n[t]===e)return t;return-1}function Mg(n){if(typeof n!="string"){if(n&&n.toHTML)return n.toHTML();if(n==null)return"";if(!n)return n+"";n=""+n}return Sg.test(n)?n.replace(wg,Tg):n}function xg(n){return!n&&n!==0?!0:!!(ou(n)&&n.length===0)}function kg(n){var e=ru({},n);return e._parent=n,e}function Ag(n,e){return n.path=e,n}function Ig(n,e){return(n?n+".":"")+e}});var ke=V((Ci,su)=>{"use strict";Ci.__esModule=!0;var so=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function ao(n,e){var t=e&&e.loc,i=void 0,r=void 0,o=void 0,s=void 0;t&&(i=t.start.line,r=t.end.line,o=t.start.column,s=t.end.column,n+=" - "+i+":"+o);for(var u=Error.prototype.constructor.call(this,n),f=0;f<so.length;f++)this[so[f]]=u[so[f]];Error.captureStackTrace&&Error.captureStackTrace(this,ao);try{t&&(this.lineNumber=i,this.endLineNumber=r,Object.defineProperty?(Object.defineProperty(this,"column",{value:o,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:s,enumerable:!0})):(this.column=o,this.endColumn=s))}catch(c){}}ao.prototype=new Error;Ci.default=ao;su.exports=Ci.default});var uu=V((Ei,au)=>{"use strict";Ei.__esModule=!0;var uo=pe();Ei.default=function(n){n.registerHelper("blockHelperMissing",function(e,t){var i=t.inverse,r=t.fn;if(e===!0)return r(this);if(e===!1||e==null)return i(this);if(uo.isArray(e))return e.length>0?(t.ids&&(t.ids=[t.name]),n.helpers.each(e,t)):i(this);if(t.data&&t.ids){var o=uo.createFrame(t.data);o.contextPath=uo.appendContextPath(t.data.contextPath,t.name),t={data:o}}return r(e,t)})};au.exports=Ei.default});var cu=V((Fi,lu)=>{"use strict";Fi.__esModule=!0;function Pg(n){return n&&n.__esModule?n:{default:n}}var Dn=pe(),bg=ke(),Ng=Pg(bg);Fi.default=function(n){n.registerHelper("each",function(e,t){if(!t)throw new Ng.default("Must pass iterator to #each");var i=t.fn,r=t.inverse,o=0,s="",u=void 0,f=void 0;t.data&&t.ids&&(f=Dn.appendContextPath(t.data.contextPath,t.ids[0])+"."),Dn.isFunction(e)&&(e=e.call(this)),t.data&&(u=Dn.createFrame(t.data));function c(v,w,x){u&&(u.key=v,u.index=w,u.first=w===0,u.last=!!x,f&&(u.contextPath=f+v)),s=s+i(e[v],{data:u,blockParams:Dn.blockParams([e[v],v],[f+v,null])})}if(e&&typeof e=="object")if(Dn.isArray(e))for(var d=e.length;o<d;o++)o in e&&c(o,o,o===e.length-1);else if(typeof Symbol=="function"&&e[Symbol.iterator]){for(var h=[],m=e[Symbol.iterator](),D=m.next();!D.done;D=m.next())h.push(D.value);e=h;for(var d=e.length;o<d;o++)c(o,o,o===e.length-1)}else(function(){var v=void 0;Object.keys(e).forEach(function(w){v!==void 0&&c(v,o-1),v=w,o++}),v!==void 0&&c(v,o-1,!0)})();return o===0&&(s=r(this)),s})};lu.exports=Fi.default});var du=V((wi,fu)=>{"use strict";wi.__esModule=!0;function Lg(n){return n&&n.__esModule?n:{default:n}}var Rg=ke(),Og=Lg(Rg);wi.default=function(n){n.registerHelper("helperMissing",function(){if(arguments.length!==1)throw new Og.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})};fu.exports=wi.default});var gu=V((Si,mu)=>{"use strict";Si.__esModule=!0;function Bg(n){return n&&n.__esModule?n:{default:n}}var hu=pe(),Vg=ke(),pu=Bg(Vg);Si.default=function(n){n.registerHelper("if",function(e,t){if(arguments.length!=2)throw new pu.default("#if requires exactly one argument");return hu.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||hu.isEmpty(e)?t.inverse(this):t.fn(this)}),n.registerHelper("unless",function(e,t){if(arguments.length!=2)throw new pu.default("#unless requires exactly one argument");return n.helpers.if.call(this,e,{fn:t.inverse,inverse:t.fn,hash:t.hash})})};mu.exports=Si.default});var yu=V((Ti,Du)=>{"use strict";Ti.__esModule=!0;Ti.default=function(n){n.registerHelper("log",function(){for(var e=[void 0],t=arguments[arguments.length-1],i=0;i<arguments.length-1;i++)e.push(arguments[i]);var r=1;t.hash.level!=null?r=t.hash.level:t.data&&t.data.level!=null&&(r=t.data.level),e[0]=r,n.log.apply(n,e)})};Du.exports=Ti.default});var Cu=V((_i,vu)=>{"use strict";_i.__esModule=!0;_i.default=function(n){n.registerHelper("lookup",function(e,t,i){return e&&i.lookupProperty(e,t)})};vu.exports=_i.default});var Fu=V((Mi,Eu)=>{"use strict";Mi.__esModule=!0;function Ug(n){return n&&n.__esModule?n:{default:n}}var yn=pe(),Hg=ke(),Gg=Ug(Hg);Mi.default=function(n){n.registerHelper("with",function(e,t){if(arguments.length!=2)throw new Gg.default("#with requires exactly one argument");yn.isFunction(e)&&(e=e.call(this));var i=t.fn;if(yn.isEmpty(e))return t.inverse(this);var r=t.data;return t.data&&t.ids&&(r=yn.createFrame(t.data),r.contextPath=yn.appendContextPath(t.data.contextPath,t.ids[0])),i(e,{data:r,blockParams:yn.blockParams([e],[r&&r.contextPath])})})};Eu.exports=Mi.default});var lo=V(xi=>{"use strict";xi.__esModule=!0;xi.registerDefaultHelpers=iD;xi.moveHelperToHooks=rD;function yt(n){return n&&n.__esModule?n:{default:n}}var qg=uu(),Wg=yt(qg),Yg=cu(),zg=yt(Yg),$g=du(),Kg=yt($g),Jg=gu(),Zg=yt(Jg),Qg=yu(),Xg=yt(Qg),jg=Cu(),eD=yt(jg),tD=Fu(),nD=yt(tD);function iD(n){Wg.default(n),zg.default(n),Kg.default(n),Zg.default(n),Xg.default(n),eD.default(n),nD.default(n)}function rD(n,e,t){n.helpers[e]&&(n.hooks[e]=n.helpers[e],t||delete n.helpers[e])}});var Su=V((ki,wu)=>{"use strict";ki.__esModule=!0;var oD=pe();ki.default=function(n){n.registerDecorator("inline",function(e,t,i,r){var o=e;return t.partials||(t.partials={},o=function(s,u){var f=i.partials;i.partials=oD.extend({},f,t.partials);var c=e(s,u);return i.partials=f,c}),t.partials[r.args[0]]=r.fn,o})};wu.exports=ki.default});var Tu=V(co=>{"use strict";co.__esModule=!0;co.registerDefaultDecorators=lD;function sD(n){return n&&n.__esModule?n:{default:n}}var aD=Su(),uD=sD(aD);function lD(n){uD.default(n)}});var fo=V((Ai,_u)=>{"use strict";Ai.__esModule=!0;var cD=pe(),Ut={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if(typeof e=="string"){var t=cD.indexOf(Ut.methodMap,e.toLowerCase());t>=0?e=t:e=parseInt(e,10)}return e},log:function(e){if(e=Ut.lookupLevel(e),typeof console!="undefined"&&Ut.lookupLevel(Ut.level)<=e){var t=Ut.methodMap[e];console[t]||(t="log");for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];console[t].apply(console,r)}}};Ai.default=Ut;_u.exports=Ai.default});var Mu=V(ho=>{"use strict";ho.__esModule=!0;ho.createNewLookupObject=dD;var fD=pe();function dD(){for(var n=arguments.length,e=Array(n),t=0;t<n;t++)e[t]=arguments[t];return fD.extend.apply(void 0,[Object.create(null)].concat(e))}});var po=V(vn=>{"use strict";vn.__esModule=!0;vn.createProtoAccessControl=gD;vn.resultIsAllowed=DD;vn.resetLoggedProperties=vD;function hD(n){return n&&n.__esModule?n:{default:n}}var xu=Mu(),pD=fo(),mD=hD(pD),Ii=Object.create(null);function gD(n){var e=Object.create(null);e.constructor=!1,e.__defineGetter__=!1,e.__defineSetter__=!1,e.__lookupGetter__=!1;var t=Object.create(null);return t.__proto__=!1,{properties:{whitelist:xu.createNewLookupObject(t,n.allowedProtoProperties),defaultValue:n.allowProtoPropertiesByDefault},methods:{whitelist:xu.createNewLookupObject(e,n.allowedProtoMethods),defaultValue:n.allowProtoMethodsByDefault}}}function DD(n,e,t){return ku(typeof n=="function"?e.methods:e.properties,t)}function ku(n,e){return n.whitelist[e]!==void 0?n.whitelist[e]===!0:n.defaultValue!==void 0?n.defaultValue:(yD(e),!1)}function yD(n){Ii[n]!==!0&&(Ii[n]=!0,mD.default.log("error",'Handlebars: Access has been denied to resolve the property "'+n+`" because it is not an "own property" of its parent.
You can add a runtime option to disable the check or this warning:
See https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details`))}function vD(){Object.keys(Ii).forEach(function(n){delete Ii[n]})}});var bi=V(qe=>{"use strict";qe.__esModule=!0;qe.HandlebarsEnvironment=Do;function Au(n){return n&&n.__esModule?n:{default:n}}var vt=pe(),CD=ke(),mo=Au(CD),ED=lo(),FD=Tu(),wD=fo(),Pi=Au(wD),SD=po(),TD="4.7.8";qe.VERSION=TD;var _D=8;qe.COMPILER_REVISION=_D;var MD=7;qe.LAST_COMPATIBLE_COMPILER_REVISION=MD;var xD={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"};qe.REVISION_CHANGES=xD;var go="[object Object]";function Do(n,e,t){this.helpers=n||{},this.partials=e||{},this.decorators=t||{},ED.registerDefaultHelpers(this),FD.registerDefaultDecorators(this)}Do.prototype={constructor:Do,logger:Pi.default,log:Pi.default.log,registerHelper:function(e,t){if(vt.toString.call(e)===go){if(t)throw new mo.default("Arg not supported with multiple helpers");vt.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(vt.toString.call(e)===go)vt.extend(this.partials,e);else{if(typeof t=="undefined")throw new mo.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(vt.toString.call(e)===go){if(t)throw new mo.default("Arg not supported with multiple decorators");vt.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){SD.resetLoggedProperties()}};var kD=Pi.default.log;qe.log=kD;qe.createFrame=vt.createFrame;qe.logger=Pi.default});var Pu=V((Ni,Iu)=>{"use strict";Ni.__esModule=!0;function yo(n){this.string=n}yo.prototype.toString=yo.prototype.toHTML=function(){return""+this.string};Ni.default=yo;Iu.exports=Ni.default});var bu=V(vo=>{"use strict";vo.__esModule=!0;vo.wrapHelper=AD;function AD(n,e){if(typeof n!="function")return n;var t=function(){var r=arguments[arguments.length-1];return arguments[arguments.length-1]=e(r),n.apply(this,arguments)};return t}});var Bu=V(ut=>{"use strict";ut.__esModule=!0;ut.checkRevision=RD;ut.template=OD;ut.wrapProgram=Li;ut.resolvePartial=BD;ut.invokePartial=VD;ut.noop=Ru;function ID(n){return n&&n.__esModule?n:{default:n}}function PD(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}var bD=pe(),Xe=PD(bD),ND=ke(),je=ID(ND),et=bi(),Nu=lo(),LD=bu(),Lu=po();function RD(n){var e=n&&n[0]||1,t=et.COMPILER_REVISION;if(!(e>=et.LAST_COMPATIBLE_COMPILER_REVISION&&e<=et.COMPILER_REVISION))if(e<et.LAST_COMPATIBLE_COMPILER_REVISION){var i=et.REVISION_CHANGES[t],r=et.REVISION_CHANGES[e];throw new je.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}else throw new je.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+n[1]+").")}function OD(n,e){if(!e)throw new je.default("No environment passed to template");if(!n||!n.main)throw new je.default("Unknown template object: "+typeof n);n.main.decorator=n.main_d,e.VM.checkRevision(n.compiler);var t=n.compiler&&n.compiler[0]===7;function i(s,u,f){f.hash&&(u=Xe.extend({},u,f.hash),f.ids&&(f.ids[0]=!0)),s=e.VM.resolvePartial.call(this,s,u,f);var c=Xe.extend({},f,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),d=e.VM.invokePartial.call(this,s,u,c);if(d==null&&e.compile&&(f.partials[f.name]=e.compile(s,n.compilerOptions,e),d=f.partials[f.name](u,c)),d!=null){if(f.indent){for(var h=d.split(`
`),m=0,D=h.length;m<D&&!(!h[m]&&m+1===D);m++)h[m]=f.indent+h[m];d=h.join(`
`)}return d}else throw new je.default("The partial "+f.name+" could not be compiled when running in runtime-only mode")}var r={strict:function(u,f,c){if(!u||!(f in u))throw new je.default('"'+f+'" not defined in '+u,{loc:c});return r.lookupProperty(u,f)},lookupProperty:function(u,f){var c=u[f];if(c==null||Object.prototype.hasOwnProperty.call(u,f)||Lu.resultIsAllowed(c,r.protoAccessControl,f))return c},lookup:function(u,f){for(var c=u.length,d=0;d<c;d++){var h=u[d]&&r.lookupProperty(u[d],f);if(h!=null)return u[d][f]}},lambda:function(u,f){return typeof u=="function"?u.call(f):u},escapeExpression:Xe.escapeExpression,invokePartial:i,fn:function(u){var f=n[u];return f.decorator=n[u+"_d"],f},programs:[],program:function(u,f,c,d,h){var m=this.programs[u],D=this.fn(u);return f||h||d||c?m=Li(this,u,D,f,c,d,h):m||(m=this.programs[u]=Li(this,u,D)),m},data:function(u,f){for(;u&&f--;)u=u._parent;return u},mergeIfNeeded:function(u,f){var c=u||f;return u&&f&&u!==f&&(c=Xe.extend({},f,u)),c},nullContext:Object.seal({}),noop:e.VM.noop,compilerInfo:n.compiler};function o(s){var u=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],f=u.data;o._setup(u),!u.partial&&n.useData&&(f=UD(s,f));var c=void 0,d=n.useBlockParams?[]:void 0;n.useDepths&&(u.depths?c=s!=u.depths[0]?[s].concat(u.depths):u.depths:c=[s]);function h(m){return""+n.main(r,m,r.helpers,r.partials,f,d,c)}return h=Ou(n.main,h,r,u.depths||[],f,d),h(s,u)}return o.isTop=!0,o._setup=function(s){if(s.partial)r.protoAccessControl=s.protoAccessControl,r.helpers=s.helpers,r.partials=s.partials,r.decorators=s.decorators,r.hooks=s.hooks;else{var u=Xe.extend({},e.helpers,s.helpers);HD(u,r),r.helpers=u,n.usePartial&&(r.partials=r.mergeIfNeeded(s.partials,e.partials)),(n.usePartial||n.useDecorators)&&(r.decorators=Xe.extend({},e.decorators,s.decorators)),r.hooks={},r.protoAccessControl=Lu.createProtoAccessControl(s);var f=s.allowCallsToHelperMissing||t;Nu.moveHelperToHooks(r,"helperMissing",f),Nu.moveHelperToHooks(r,"blockHelperMissing",f)}},o._child=function(s,u,f,c){if(n.useBlockParams&&!f)throw new je.default("must pass block params");if(n.useDepths&&!c)throw new je.default("must pass parent depths");return Li(r,s,n[s],u,0,f,c)},o}function Li(n,e,t,i,r,o,s){function u(f){var c=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],d=s;return s&&f!=s[0]&&!(f===n.nullContext&&s[0]===null)&&(d=[f].concat(s)),t(n,f,n.helpers,n.partials,c.data||i,o&&[c.blockParams].concat(o),d)}return u=Ou(t,u,n,s,i,o),u.program=e,u.depth=s?s.length:0,u.blockParams=r||0,u}function BD(n,e,t){return n?!n.call&&!t.name&&(t.name=n,n=t.partials[n]):t.name==="@partial-block"?n=t.data["partial-block"]:n=t.partials[t.name],n}function VD(n,e,t){var i=t.data&&t.data["partial-block"];t.partial=!0,t.ids&&(t.data.contextPath=t.ids[0]||t.data.contextPath);var r=void 0;if(t.fn&&t.fn!==Ru&&function(){t.data=et.createFrame(t.data);var o=t.fn;r=t.data["partial-block"]=function(u){var f=arguments.length<=1||arguments[1]===void 0?{}:arguments[1];return f.data=et.createFrame(f.data),f.data["partial-block"]=i,o(u,f)},o.partials&&(t.partials=Xe.extend({},t.partials,o.partials))}(),n===void 0&&r&&(n=r),n===void 0)throw new je.default("The partial "+t.name+" could not be found");if(n instanceof Function)return n(e,t)}function Ru(){return""}function UD(n,e){return(!e||!("root"in e))&&(e=e?et.createFrame(e):{},e.root=n),e}function Ou(n,e,t,i,r,o){if(n.decorator){var s={};e=n.decorator(e,s,t,i&&i[0],r,o,i),Xe.extend(e,s)}return e}function HD(n,e){Object.keys(n).forEach(function(t){var i=n[t];n[t]=GD(i,e)})}function GD(n,e){var t=e.lookupProperty;return LD.wrapHelper(n,function(i){return Xe.extend({lookupProperty:t},i)})}});var Co=V((Ri,Vu)=>{"use strict";Ri.__esModule=!0;Ri.default=function(n){(function(){typeof globalThis!="object"&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__)})();var e=globalThis.Handlebars;n.noConflict=function(){return globalThis.Handlebars===n&&(globalThis.Handlebars=e),n}};Vu.exports=Ri.default});var Wu=V((Oi,qu)=>{"use strict";Oi.__esModule=!0;function Fo(n){return n&&n.__esModule?n:{default:n}}function wo(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}var qD=bi(),Uu=wo(qD),WD=Pu(),YD=Fo(WD),zD=ke(),$D=Fo(zD),KD=pe(),Eo=wo(KD),JD=Bu(),Hu=wo(JD),ZD=Co(),QD=Fo(ZD);function Gu(){var n=new Uu.HandlebarsEnvironment;return Eo.extend(n,Uu),n.SafeString=YD.default,n.Exception=$D.default,n.Utils=Eo,n.escapeExpression=Eo.escapeExpression,n.VM=Hu,n.template=function(e){return Hu.template(e,n)},n}var Cn=Gu();Cn.create=Gu;QD.default(Cn);Cn.default=Cn;Oi.default=Cn;qu.exports=Oi.default});var So=V((Bi,zu)=>{"use strict";Bi.__esModule=!0;var Yu={helpers:{helperExpression:function(e){return e.type==="SubExpression"||(e.type==="MustacheStatement"||e.type==="BlockStatement")&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return e.parts.length===1&&!Yu.helpers.scopedId(e)&&!e.depth}}};Bi.default=Yu;zu.exports=Bi.default});var Ku=V((Vi,$u)=>{"use strict";Vi.__esModule=!0;var XD=function(){var n={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(r,o,s,u,f,c,d){var h=c.length-1;switch(f){case 1:return c[h-1];case 2:this.$=u.prepareProgram(c[h]);break;case 3:this.$=c[h];break;case 4:this.$=c[h];break;case 5:this.$=c[h];break;case 6:this.$=c[h];break;case 7:this.$=c[h];break;case 8:this.$=c[h];break;case 9:this.$={type:"CommentStatement",value:u.stripComment(c[h]),strip:u.stripFlags(c[h],c[h]),loc:u.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:c[h],value:c[h],loc:u.locInfo(this._$)};break;case 11:this.$=u.prepareRawBlock(c[h-2],c[h-1],c[h],this._$);break;case 12:this.$={path:c[h-3],params:c[h-2],hash:c[h-1]};break;case 13:this.$=u.prepareBlock(c[h-3],c[h-2],c[h-1],c[h],!1,this._$);break;case 14:this.$=u.prepareBlock(c[h-3],c[h-2],c[h-1],c[h],!0,this._$);break;case 15:this.$={open:c[h-5],path:c[h-4],params:c[h-3],hash:c[h-2],blockParams:c[h-1],strip:u.stripFlags(c[h-5],c[h])};break;case 16:this.$={path:c[h-4],params:c[h-3],hash:c[h-2],blockParams:c[h-1],strip:u.stripFlags(c[h-5],c[h])};break;case 17:this.$={path:c[h-4],params:c[h-3],hash:c[h-2],blockParams:c[h-1],strip:u.stripFlags(c[h-5],c[h])};break;case 18:this.$={strip:u.stripFlags(c[h-1],c[h-1]),program:c[h]};break;case 19:var m=u.prepareBlock(c[h-2],c[h-1],c[h],c[h],!1,this._$),D=u.prepareProgram([m],c[h-1].loc);D.chained=!0,this.$={strip:c[h-2].strip,program:D,chain:!0};break;case 20:this.$=c[h];break;case 21:this.$={path:c[h-1],strip:u.stripFlags(c[h-2],c[h])};break;case 22:this.$=u.prepareMustache(c[h-3],c[h-2],c[h-1],c[h-4],u.stripFlags(c[h-4],c[h]),this._$);break;case 23:this.$=u.prepareMustache(c[h-3],c[h-2],c[h-1],c[h-4],u.stripFlags(c[h-4],c[h]),this._$);break;case 24:this.$={type:"PartialStatement",name:c[h-3],params:c[h-2],hash:c[h-1],indent:"",strip:u.stripFlags(c[h-4],c[h]),loc:u.locInfo(this._$)};break;case 25:this.$=u.preparePartialBlock(c[h-2],c[h-1],c[h],this._$);break;case 26:this.$={path:c[h-3],params:c[h-2],hash:c[h-1],strip:u.stripFlags(c[h-4],c[h])};break;case 27:this.$=c[h];break;case 28:this.$=c[h];break;case 29:this.$={type:"SubExpression",path:c[h-3],params:c[h-2],hash:c[h-1],loc:u.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:c[h],loc:u.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:u.id(c[h-2]),value:c[h],loc:u.locInfo(this._$)};break;case 32:this.$=u.id(c[h-1]);break;case 33:this.$=c[h];break;case 34:this.$=c[h];break;case 35:this.$={type:"StringLiteral",value:c[h],original:c[h],loc:u.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(c[h]),original:Number(c[h]),loc:u.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:c[h]==="true",original:c[h]==="true",loc:u.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:u.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:u.locInfo(this._$)};break;case 40:this.$=c[h];break;case 41:this.$=c[h];break;case 42:this.$=u.preparePath(!0,c[h],this._$);break;case 43:this.$=u.preparePath(!1,c[h],this._$);break;case 44:c[h-2].push({part:u.id(c[h]),original:c[h],separator:c[h-1]}),this.$=c[h-2];break;case 45:this.$=[{part:u.id(c[h]),original:c[h]}];break;case 46:this.$=[];break;case 47:c[h-1].push(c[h]);break;case 48:this.$=[];break;case 49:c[h-1].push(c[h]);break;case 50:this.$=[];break;case 51:c[h-1].push(c[h]);break;case 58:this.$=[];break;case 59:c[h-1].push(c[h]);break;case 64:this.$=[];break;case 65:c[h-1].push(c[h]);break;case 70:this.$=[];break;case 71:c[h-1].push(c[h]);break;case 78:this.$=[];break;case 79:c[h-1].push(c[h]);break;case 82:this.$=[];break;case 83:c[h-1].push(c[h]);break;case 86:this.$=[];break;case 87:c[h-1].push(c[h]);break;case 90:this.$=[];break;case 91:c[h-1].push(c[h]);break;case 94:this.$=[];break;case 95:c[h-1].push(c[h]);break;case 98:this.$=[c[h]];break;case 99:c[h-1].push(c[h]);break;case 100:this.$=[c[h]];break;case 101:c[h-1].push(c[h]);break}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(r,o){throw new Error(r)},parse:function(r){var o=this,s=[0],u=[null],f=[],c=this.table,d="",h=0,m=0,D=0,v=2,w=1;this.lexer.setInput(r),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var x=this.lexer.yylloc;f.push(x);var k=this.lexer.options&&this.lexer.options.ranges;typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);function b(ee){s.length=s.length-2*ee,u.length=u.length-ee,f.length=f.length-ee}function R(){var ee;return ee=o.lexer.lex()||1,typeof ee!="number"&&(ee=o.symbols_[ee]||ee),ee}for(var E,I,O,S,N,q,X={},se,Y,Ee,re;;){if(O=s[s.length-1],this.defaultActions[O]?S=this.defaultActions[O]:((E===null||typeof E=="undefined")&&(E=R()),S=c[O]&&c[O][E]),typeof S=="undefined"||!S.length||!S[0]){var De="";if(!D){re=[];for(se in c[O])this.terminals_[se]&&se>2&&re.push("'"+this.terminals_[se]+"'");this.lexer.showPosition?De="Parse error on line "+(h+1)+`:
`+this.lexer.showPosition()+`
Expecting `+re.join(", ")+", got '"+(this.terminals_[E]||E)+"'":De="Parse error on line "+(h+1)+": Unexpected "+(E==1?"end of input":"'"+(this.terminals_[E]||E)+"'"),this.parseError(De,{text:this.lexer.match,token:this.terminals_[E]||E,line:this.lexer.yylineno,loc:x,expected:re})}}if(S[0]instanceof Array&&S.length>1)throw new Error("Parse Error: multiple actions possible at state: "+O+", token: "+E);switch(S[0]){case 1:s.push(E),u.push(this.lexer.yytext),f.push(this.lexer.yylloc),s.push(S[1]),E=null,I?(E=I,I=null):(m=this.lexer.yyleng,d=this.lexer.yytext,h=this.lexer.yylineno,x=this.lexer.yylloc,D>0&&D--);break;case 2:if(Y=this.productions_[S[1]][1],X.$=u[u.length-Y],X._$={first_line:f[f.length-(Y||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(Y||1)].first_column,last_column:f[f.length-1].last_column},k&&(X._$.range=[f[f.length-(Y||1)].range[0],f[f.length-1].range[1]]),q=this.performAction.call(X,d,m,h,this.yy,S[1],u,f),typeof q!="undefined")return q;Y&&(s=s.slice(0,-1*Y*2),u=u.slice(0,-1*Y),f=f.slice(0,-1*Y)),s.push(this.productions_[S[1]][0]),u.push(X.$),f.push(X._$),Ee=c[s[s.length-2]][s[s.length-1]],s.push(Ee);break;case 3:return!0}}return!0}},e=function(){var i={EOF:1,parseError:function(o,s){if(this.yy.parser)this.yy.parser.parseError(o,s);else throw new Error(o)},setInput:function(o){return this._input=o,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var o=this._input[0];this.yytext+=o,this.yyleng++,this.offset++,this.match+=o,this.matched+=o;var s=o.match(/(?:\r\n?|\n).*/g);return s?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),o},unput:function(o){var s=o.length,u=o.split(/(?:\r\n?|\n)/g);this._input=o+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-s-1),this.offset-=s;var f=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),u.length-1&&(this.yylineno-=u.length-1);var c=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:u?(u.length===f.length?this.yylloc.first_column:0)+f[f.length-u.length].length-u[0].length:this.yylloc.first_column-s},this.options.ranges&&(this.yylloc.range=[c[0],c[0]+this.yyleng-s]),this},more:function(){return this._more=!0,this},less:function(o){this.unput(this.match.slice(o))},pastInput:function(){var o=this.matched.substr(0,this.matched.length-this.match.length);return(o.length>20?"...":"")+o.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var o=this.match;return o.length<20&&(o+=this._input.substr(0,20-o.length)),(o.substr(0,20)+(o.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var o=this.pastInput(),s=new Array(o.length+1).join("-");return o+this.upcomingInput()+`
`+s+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var o,s,u,f,c,d;this._more||(this.yytext="",this.match="");for(var h=this._currentRules(),m=0;m<h.length&&(u=this._input.match(this.rules[h[m]]),!(u&&(!s||u[0].length>s[0].length)&&(s=u,f=m,!this.options.flex)));m++);return s?(d=s[0].match(/(?:\r\n?|\n).*/g),d&&(this.yylineno+=d.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:d?d[d.length-1].length-d[d.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+s[0].length},this.yytext+=s[0],this.match+=s[0],this.matches=s,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(s[0].length),this.matched+=s[0],o=this.performAction.call(this,this.yy,this,h[f],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),o||void 0):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var o=this.next();return typeof o!="undefined"?o:this.lex()},begin:function(o){this.conditionStack.push(o)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(o){this.begin(o)}};return i.options={},i.performAction=function(o,s,u,f){function c(h,m){return s.yytext=s.yytext.substring(h,s.yyleng-m+h)}var d=f;switch(u){case 0:if(s.yytext.slice(-2)==="\\\\"?(c(0,1),this.begin("mu")):s.yytext.slice(-1)==="\\"?(c(0,1),this.begin("emu")):this.begin("mu"),s.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;break;case 3:return this.begin("raw"),15;break;case 4:return this.popState(),this.conditionStack[this.conditionStack.length-1]==="raw"?15:(c(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;break;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;break;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;break;case 16:return this.popState(),44;break;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(s.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;break;case 23:return 48;case 24:return 73;case 25:return 72;case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;break;case 30:return this.popState(),33;break;case 31:return s.yytext=c(1,2).replace(/\\"/g,'"'),80;break;case 32:return s.yytext=c(1,2).replace(/\\'/g,"'"),80;break;case 33:return 85;case 34:return 82;case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return s.yytext=s.yytext.replace(/\\([\\\]])/g,"$1"),72;break;case 43:return"INVALID";case 44:return 5}},i.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],i.conditions={mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}},i}();n.lexer=e;function t(){this.yy={}}return t.prototype=n,n.Parser=t,new t}();Vi.default=XD;$u.exports=Vi.default});var _o=V((Gi,Qu)=>{"use strict";Gi.__esModule=!0;function jD(n){return n&&n.__esModule?n:{default:n}}var ey=ke(),To=jD(ey);function Ui(){this.parents=[]}Ui.prototype={constructor:Ui,mutating:!1,acceptKey:function(e,t){var i=this.accept(e[t]);if(this.mutating){if(i&&!Ui.prototype[i.type])throw new To.default('Unexpected node type "'+i.type+'" found when accepting '+t+" on "+e.type);e[t]=i}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new To.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,i=e.length;t<i;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,i--)},accept:function(e){if(e){if(!this[e.type])throw new To.default("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);if(this.current=this.parents.shift(),!this.mutating||t)return t;if(t!==!1)return e}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:Hi,Decorator:Hi,BlockStatement:Ju,DecoratorBlock:Ju,PartialStatement:Zu,PartialBlockStatement:function(e){Zu.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:Hi,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}};function Hi(n){this.acceptRequired(n,"path"),this.acceptArray(n.params),this.acceptKey(n,"hash")}function Ju(n){Hi.call(this,n),this.acceptKey(n,"program"),this.acceptKey(n,"inverse")}function Zu(n){this.acceptRequired(n,"name"),this.acceptArray(n.params),this.acceptKey(n,"hash")}Gi.default=Ui;Qu.exports=Gi.default});var ju=V((qi,Xu)=>{"use strict";qi.__esModule=!0;function ty(n){return n&&n.__esModule?n:{default:n}}var ny=_o(),iy=ty(ny);function We(){var n=arguments.length<=0||arguments[0]===void 0?{}:arguments[0];this.options=n}We.prototype=new iy.default;We.prototype.Program=function(n){var e=!this.options.ignoreStandalone,t=!this.isRootSeen;this.isRootSeen=!0;for(var i=n.body,r=0,o=i.length;r<o;r++){var s=i[r],u=this.accept(s);if(u){var f=Mo(i,r,t),c=xo(i,r,t),d=u.openStandalone&&f,h=u.closeStandalone&&c,m=u.inlineStandalone&&f&&c;u.close&&Ct(i,r,!0),u.open&&lt(i,r,!0),e&&m&&(Ct(i,r),lt(i,r)&&s.type==="PartialStatement"&&(s.indent=/([ \t]+$)/.exec(i[r-1].original)[1])),e&&d&&(Ct((s.program||s.inverse).body),lt(i,r)),e&&h&&(Ct(i,r),lt((s.inverse||s.program).body))}}return n};We.prototype.BlockStatement=We.prototype.DecoratorBlock=We.prototype.PartialBlockStatement=function(n){this.accept(n.program),this.accept(n.inverse);var e=n.program||n.inverse,t=n.program&&n.inverse,i=t,r=t;if(t&&t.chained)for(i=t.body[0].program;r.chained;)r=r.body[r.body.length-1].program;var o={open:n.openStrip.open,close:n.closeStrip.close,openStandalone:xo(e.body),closeStandalone:Mo((i||e).body)};if(n.openStrip.close&&Ct(e.body,null,!0),t){var s=n.inverseStrip;s.open&&lt(e.body,null,!0),s.close&&Ct(i.body,null,!0),n.closeStrip.open&&lt(r.body,null,!0),!this.options.ignoreStandalone&&Mo(e.body)&&xo(i.body)&&(lt(e.body),Ct(i.body))}else n.closeStrip.open&&lt(e.body,null,!0);return o};We.prototype.Decorator=We.prototype.MustacheStatement=function(n){return n.strip};We.prototype.PartialStatement=We.prototype.CommentStatement=function(n){var e=n.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}};function Mo(n,e,t){e===void 0&&(e=n.length);var i=n[e-1],r=n[e-2];if(!i)return t;if(i.type==="ContentStatement")return(r||!t?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(i.original)}function xo(n,e,t){e===void 0&&(e=-1);var i=n[e+1],r=n[e+2];if(!i)return t;if(i.type==="ContentStatement")return(r||!t?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(i.original)}function Ct(n,e,t){var i=n[e==null?0:e+1];if(!(!i||i.type!=="ContentStatement"||!t&&i.rightStripped)){var r=i.value;i.value=i.value.replace(t?/^\s+/:/^[ \t]*\r?\n?/,""),i.rightStripped=i.value!==r}}function lt(n,e,t){var i=n[e==null?n.length-1:e-1];if(!(!i||i.type!=="ContentStatement"||!t&&i.leftStripped)){var r=i.value;return i.value=i.value.replace(t?/\s+$/:/[ \t]+$/,""),i.leftStripped=i.value!==r,i.leftStripped}}qi.default=We;Xu.exports=qi.default});var el=V(Ae=>{"use strict";Ae.__esModule=!0;Ae.SourceLocation=sy;Ae.id=ay;Ae.stripFlags=uy;Ae.stripComment=ly;Ae.preparePath=cy;Ae.prepareMustache=fy;Ae.prepareRawBlock=dy;Ae.prepareBlock=hy;Ae.prepareProgram=py;Ae.preparePartialBlock=my;function ry(n){return n&&n.__esModule?n:{default:n}}var oy=ke(),ko=ry(oy);function Ao(n,e){if(e=e.path?e.path.original:e,n.path.original!==e){var t={loc:n.path.loc};throw new ko.default(n.path.original+" doesn't match "+e,t)}}function sy(n,e){this.source=n,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}}function ay(n){return/^\[.*\]$/.test(n)?n.substring(1,n.length-1):n}function uy(n,e){return{open:n.charAt(2)==="~",close:e.charAt(e.length-3)==="~"}}function ly(n){return n.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function cy(n,e,t){t=this.locInfo(t);for(var i=n?"@":"",r=[],o=0,s=0,u=e.length;s<u;s++){var f=e[s].part,c=e[s].original!==f;if(i+=(e[s].separator||"")+f,!c&&(f===".."||f==="."||f==="this")){if(r.length>0)throw new ko.default("Invalid path: "+i,{loc:t});f===".."&&o++}else r.push(f)}return{type:"PathExpression",data:n,depth:o,parts:r,original:i,loc:t}}function fy(n,e,t,i,r,o){var s=i.charAt(3)||i.charAt(2),u=s!=="{"&&s!=="&",f=/\*/.test(i);return{type:f?"Decorator":"MustacheStatement",path:n,params:e,hash:t,escaped:u,strip:r,loc:this.locInfo(o)}}function dy(n,e,t,i){Ao(n,t),i=this.locInfo(i);var r={type:"Program",body:e,strip:{},loc:i};return{type:"BlockStatement",path:n.path,params:n.params,hash:n.hash,program:r,openStrip:{},inverseStrip:{},closeStrip:{},loc:i}}function hy(n,e,t,i,r,o){i&&i.path&&Ao(n,i);var s=/\*/.test(n.open);e.blockParams=n.blockParams;var u=void 0,f=void 0;if(t){if(s)throw new ko.default("Unexpected inverse block on decorator",t);t.chain&&(t.program.body[0].closeStrip=i.strip),f=t.strip,u=t.program}return r&&(r=u,u=e,e=r),{type:s?"DecoratorBlock":"BlockStatement",path:n.path,params:n.params,hash:n.hash,program:e,inverse:u,openStrip:n.strip,inverseStrip:f,closeStrip:i&&i.strip,loc:this.locInfo(o)}}function py(n,e){if(!e&&n.length){var t=n[0].loc,i=n[n.length-1].loc;t&&i&&(e={source:t.source,start:{line:t.start.line,column:t.start.column},end:{line:i.end.line,column:i.end.column}})}return{type:"Program",body:n,strip:{},loc:e}}function my(n,e,t,i){return Ao(n,t),{type:"PartialBlockStatement",name:n.path,params:n.params,hash:n.hash,program:e,openStrip:n.strip,closeStrip:t&&t.strip,loc:this.locInfo(i)}}});var il=V(En=>{"use strict";En.__esModule=!0;En.parseWithoutProcessing=nl;En.parse=wy;function gy(n){if(n&&n.__esModule)return n;var e={};if(n!=null)for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e.default=n,e}function tl(n){return n&&n.__esModule?n:{default:n}}var Dy=Ku(),Io=tl(Dy),yy=ju(),vy=tl(yy),Cy=el(),Ey=gy(Cy),Fy=pe();En.parser=Io.default;var Wi={};Fy.extend(Wi,Ey);function nl(n,e){if(n.type==="Program")return n;Io.default.yy=Wi,Wi.locInfo=function(i){return new Wi.SourceLocation(e&&e.srcName,i)};var t=Io.default.parse(n);return t}function wy(n,e){var t=nl(n,e),i=new vy.default(e);return i.accept(t)}});var al=V(Tn=>{"use strict";Tn.__esModule=!0;Tn.Compiler=Po;Tn.precompile=My;Tn.compile=xy;function ol(n){return n&&n.__esModule?n:{default:n}}var Sy=ke(),wn=ol(Sy),Sn=pe(),Ty=So(),Fn=ol(Ty),_y=[].slice;function Po(){}Po.prototype={compiler:Po,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var i=0;i<t;i++){var r=this.opcodes[i],o=e.opcodes[i];if(r.opcode!==o.opcode||!sl(r.args,o.args))return!1}t=this.children.length;for(var i=0;i<t;i++)if(!this.children[i].equals(e.children[i]))return!1;return!0},guid:0,compile:function(e,t){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[],t.knownHelpers=Sn.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},t.knownHelpers),this.accept(e)},compileProgram:function(e){var t=new this.compiler,i=t.compile(e,this.options),r=this.guid++;return this.usePartial=this.usePartial||i.usePartial,this.children[r]=i,this.useDepths=this.useDepths||i.useDepths,r},accept:function(e){if(!this[e.type])throw new wn.default("Unknown type: "+e.type,e);this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,i=t.length,r=0;r<i;r++)this.accept(t[r]);return this.options.blockParams.shift(),this.isSimple=i===1,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){rl(e);var t=e.program,i=e.inverse;t=t&&this.compileProgram(t),i=i&&this.compileProgram(i);var r=this.classifySexpr(e);r==="helper"?this.helperSexpr(e,t,i):r==="simple"?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,i),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),i=this.setupFullMustacheParams(e,t,void 0),r=e.path;this.useDecorators=!0,this.opcode("registerDecorator",i.length,r.original)},PartialStatement:function(e){this.usePartial=!0;var t=e.program;t&&(t=this.compileProgram(e.program));var i=e.params;if(i.length>1)throw new wn.default("Unsupported number of partial arguments: "+i.length,e);i.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):i.push({type:"PathExpression",parts:[],depth:0}));var r=e.name.original,o=e.name.type==="SubExpression";o&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0);var s=e.indent||"";this.options.preventIndent&&s&&(this.opcode("appendContent",s),s=""),this.opcode("invokePartial",o,r,s),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){rl(e);var t=this.classifySexpr(e);t==="simple"?this.simpleSexpr(e):t==="helper"?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,i){var r=e.path,o=r.parts[0],s=t!=null||i!=null;this.opcode("getContext",r.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",i),r.strict=!0,this.accept(r),this.opcode("invokeAmbiguous",o,s)},simpleSexpr:function(e){var t=e.path;t.strict=!0,this.accept(t),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,i){var r=this.setupFullMustacheParams(e,t,i),o=e.path,s=o.parts[0];if(this.options.knownHelpers[s])this.opcode("invokeKnownHelper",r.length,s);else{if(this.options.knownHelpersOnly)throw new wn.default("You specified knownHelpersOnly, but used the unknown helper "+s,e);o.strict=!0,o.falsy=!0,this.accept(o),this.opcode("invokeHelper",r.length,o.original,Fn.default.helpers.simpleId(o))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],i=Fn.default.helpers.scopedId(e),r=!e.depth&&!i&&this.blockParamIndex(t);r?this.opcode("lookupBlockParam",r,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,i):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,i=0,r=t.length;for(this.opcode("pushHash");i<r;i++)this.pushParam(t[i].value);for(;i--;)this.opcode("assignToHash",t[i].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:_y.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=Fn.default.helpers.simpleId(e.path),i=t&&!!this.blockParamIndex(e.path.parts[0]),r=!i&&Fn.default.helpers.helperExpression(e),o=!i&&(r||t);if(o&&!r){var s=e.path.parts[0],u=this.options;u.knownHelpers[s]?r=!0:u.knownHelpersOnly&&(o=!1)}return r?"helper":o?"ambiguous":"simple"},pushParams:function(e){for(var t=0,i=e.length;t<i;t++)this.pushParam(e[t])},pushParam:function(e){var t=e.value!=null?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),e.type==="SubExpression"&&this.accept(e);else{if(this.trackIds){var i=void 0;if(e.parts&&!Fn.default.helpers.scopedId(e)&&!e.depth&&(i=this.blockParamIndex(e.parts[0])),i){var r=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",i,r)}else t=e.original||t,t.replace&&(t=t.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,i,r){var o=e.params;return this.pushParams(o),this.opcode("pushProgram",t),this.opcode("pushProgram",i),e.hash?this.accept(e.hash):this.opcode("emptyHash",r),o},blockParamIndex:function(e){for(var t=0,i=this.options.blockParams.length;t<i;t++){var r=this.options.blockParams[t],o=r&&Sn.indexOf(r,e);if(r&&o>=0)return[t,o]}}};function My(n,e,t){if(n==null||typeof n!="string"&&n.type!=="Program")throw new wn.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+n);e=e||{},"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var i=t.parse(n,e),r=new t.Compiler().compile(i,e);return new t.JavaScriptCompiler().compile(r,e)}function xy(n,e,t){if(e===void 0&&(e={}),n==null||typeof n!="string"&&n.type!=="Program")throw new wn.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+n);e=Sn.extend({},e),"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var i=void 0;function r(){var s=t.parse(n,e),u=new t.Compiler().compile(s,e),f=new t.JavaScriptCompiler().compile(u,e,void 0,!0);return t.template(f)}function o(s,u){return i||(i=r()),i.call(this,s,u)}return o._setup=function(s){return i||(i=r()),i._setup(s)},o._child=function(s,u,f,c){return i||(i=r()),i._child(s,u,f,c)},o}function sl(n,e){if(n===e)return!0;if(Sn.isArray(n)&&Sn.isArray(e)&&n.length===e.length){for(var t=0;t<n.length;t++)if(!sl(n[t],e[t]))return!1;return!0}}function rl(n){if(!n.path.parts){var e=n.path;n.path={type:"PathExpression",data:!1,depth:0,parts:[e.original+""],original:e.original+"",loc:e.loc}}}});var ll=V(bo=>{var ul="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");bo.encode=function(n){if(0<=n&&n<ul.length)return ul[n];throw new TypeError("Must be between 0 and 63: "+n)};bo.decode=function(n){var e=65,t=90,i=97,r=122,o=48,s=57,u=43,f=47,c=26,d=52;return e<=n&&n<=t?n-e:i<=n&&n<=r?n-i+c:o<=n&&n<=s?n-o+d:n==u?62:n==f?63:-1}});var Ro=V(Lo=>{var cl=ll(),No=5,fl=1<<No,dl=fl-1,hl=fl;function ky(n){return n<0?(-n<<1)+1:(n<<1)+0}function Ay(n){var e=(n&1)===1,t=n>>1;return e?-t:t}Lo.encode=function(e){var t="",i,r=ky(e);do i=r&dl,r>>>=No,r>0&&(i|=hl),t+=cl.encode(i);while(r>0);return t};Lo.decode=function(e,t,i){var r=e.length,o=0,s=0,u,f;do{if(t>=r)throw new Error("Expected more digits in base 64 VLQ value.");if(f=cl.decode(e.charCodeAt(t++)),f===-1)throw new Error("Invalid base64 digit: "+e.charAt(t-1));u=!!(f&hl),f&=dl,o=o+(f<<s),s+=No}while(u);i.value=Ay(o),i.rest=t}});var qt=V(fe=>{function Iy(n,e,t){if(e in n)return n[e];if(arguments.length===3)return t;throw new Error('"'+e+'" is a required argument.')}fe.getArg=Iy;var pl=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,Py=/^data:.+\,.+$/;function _n(n){var e=n.match(pl);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}fe.urlParse=_n;function Ht(n){var e="";return n.scheme&&(e+=n.scheme+":"),e+="//",n.auth&&(e+=n.auth+"@"),n.host&&(e+=n.host),n.port&&(e+=":"+n.port),n.path&&(e+=n.path),e}fe.urlGenerate=Ht;function Oo(n){var e=n,t=_n(n);if(t){if(!t.path)return n;e=t.path}for(var i=fe.isAbsolute(e),r=e.split(/\/+/),o,s=0,u=r.length-1;u>=0;u--)o=r[u],o==="."?r.splice(u,1):o===".."?s++:s>0&&(o===""?(r.splice(u+1,s),s=0):(r.splice(u,2),s--));return e=r.join("/"),e===""&&(e=i?"/":"."),t?(t.path=e,Ht(t)):e}fe.normalize=Oo;function ml(n,e){n===""&&(n="."),e===""&&(e=".");var t=_n(e),i=_n(n);if(i&&(n=i.path||"/"),t&&!t.scheme)return i&&(t.scheme=i.scheme),Ht(t);if(t||e.match(Py))return e;if(i&&!i.host&&!i.path)return i.host=e,Ht(i);var r=e.charAt(0)==="/"?e:Oo(n.replace(/\/+$/,"")+"/"+e);return i?(i.path=r,Ht(i)):r}fe.join=ml;fe.isAbsolute=function(n){return n.charAt(0)==="/"||pl.test(n)};function by(n,e){n===""&&(n="."),n=n.replace(/\/$/,"");for(var t=0;e.indexOf(n+"/")!==0;){var i=n.lastIndexOf("/");if(i<0||(n=n.slice(0,i),n.match(/^([^\/]+:\/)?\/*$/)))return e;++t}return Array(t+1).join("../")+e.substr(n.length+1)}fe.relative=by;var gl=function(){var n=Object.create(null);return!("__proto__"in n)}();function Dl(n){return n}function Ny(n){return yl(n)?"$"+n:n}fe.toSetString=gl?Dl:Ny;function Ly(n){return yl(n)?n.slice(1):n}fe.fromSetString=gl?Dl:Ly;function yl(n){if(!n)return!1;var e=n.length;if(e<9||n.charCodeAt(e-1)!==95||n.charCodeAt(e-2)!==95||n.charCodeAt(e-3)!==111||n.charCodeAt(e-4)!==116||n.charCodeAt(e-5)!==111||n.charCodeAt(e-6)!==114||n.charCodeAt(e-7)!==112||n.charCodeAt(e-8)!==95||n.charCodeAt(e-9)!==95)return!1;for(var t=e-10;t>=0;t--)if(n.charCodeAt(t)!==36)return!1;return!0}function Ry(n,e,t){var i=Gt(n.source,e.source);return i!==0||(i=n.originalLine-e.originalLine,i!==0)||(i=n.originalColumn-e.originalColumn,i!==0||t)||(i=n.generatedColumn-e.generatedColumn,i!==0)||(i=n.generatedLine-e.generatedLine,i!==0)?i:Gt(n.name,e.name)}fe.compareByOriginalPositions=Ry;function Oy(n,e,t){var i=n.generatedLine-e.generatedLine;return i!==0||(i=n.generatedColumn-e.generatedColumn,i!==0||t)||(i=Gt(n.source,e.source),i!==0)||(i=n.originalLine-e.originalLine,i!==0)||(i=n.originalColumn-e.originalColumn,i!==0)?i:Gt(n.name,e.name)}fe.compareByGeneratedPositionsDeflated=Oy;function Gt(n,e){return n===e?0:n===null?1:e===null?-1:n>e?1:-1}function By(n,e){var t=n.generatedLine-e.generatedLine;return t!==0||(t=n.generatedColumn-e.generatedColumn,t!==0)||(t=Gt(n.source,e.source),t!==0)||(t=n.originalLine-e.originalLine,t!==0)||(t=n.originalColumn-e.originalColumn,t!==0)?t:Gt(n.name,e.name)}fe.compareByGeneratedPositionsInflated=By;function Vy(n){return JSON.parse(n.replace(/^\)]}'[^\n]*\n/,""))}fe.parseSourceMapInput=Vy;function Uy(n,e,t){if(e=e||"",n&&(n[n.length-1]!=="/"&&e[0]!=="/"&&(n+="/"),e=n+e),t){var i=_n(t);if(!i)throw new Error("sourceMapURL could not be parsed");if(i.path){var r=i.path.lastIndexOf("/");r>=0&&(i.path=i.path.substring(0,r+1))}e=ml(Ht(i),e)}return Oo(e)}fe.computeSourceURL=Uy});var Uo=V(vl=>{var Bo=qt(),Vo=Object.prototype.hasOwnProperty,Et=typeof Map!="undefined";function tt(){this._array=[],this._set=Et?new Map:Object.create(null)}tt.fromArray=function(e,t){for(var i=new tt,r=0,o=e.length;r<o;r++)i.add(e[r],t);return i};tt.prototype.size=function(){return Et?this._set.size:Object.getOwnPropertyNames(this._set).length};tt.prototype.add=function(e,t){var i=Et?e:Bo.toSetString(e),r=Et?this.has(e):Vo.call(this._set,i),o=this._array.length;(!r||t)&&this._array.push(e),r||(Et?this._set.set(e,o):this._set[i]=o)};tt.prototype.has=function(e){if(Et)return this._set.has(e);var t=Bo.toSetString(e);return Vo.call(this._set,t)};tt.prototype.indexOf=function(e){if(Et){var t=this._set.get(e);if(t>=0)return t}else{var i=Bo.toSetString(e);if(Vo.call(this._set,i))return this._set[i]}throw new Error('"'+e+'" is not in the set.')};tt.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};tt.prototype.toArray=function(){return this._array.slice()};vl.ArraySet=tt});var Fl=V(El=>{var Cl=qt();function Hy(n,e){var t=n.generatedLine,i=e.generatedLine,r=n.generatedColumn,o=e.generatedColumn;return i>t||i==t&&o>=r||Cl.compareByGeneratedPositionsInflated(n,e)<=0}function Yi(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}Yi.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)};Yi.prototype.add=function(e){Hy(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};Yi.prototype.toArray=function(){return this._sorted||(this._array.sort(Cl.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};El.MappingList=Yi});var Ho=V(wl=>{var Mn=Ro(),te=qt(),zi=Uo().ArraySet,Gy=Fl().MappingList;function Ie(n){n||(n={}),this._file=te.getArg(n,"file",null),this._sourceRoot=te.getArg(n,"sourceRoot",null),this._skipValidation=te.getArg(n,"skipValidation",!1),this._sources=new zi,this._names=new zi,this._mappings=new Gy,this._sourcesContents=null}Ie.prototype._version=3;Ie.fromSourceMap=function(e){var t=e.sourceRoot,i=new Ie({file:e.file,sourceRoot:t});return e.eachMapping(function(r){var o={generated:{line:r.generatedLine,column:r.generatedColumn}};r.source!=null&&(o.source=r.source,t!=null&&(o.source=te.relative(t,o.source)),o.original={line:r.originalLine,column:r.originalColumn},r.name!=null&&(o.name=r.name)),i.addMapping(o)}),e.sources.forEach(function(r){var o=r;t!==null&&(o=te.relative(t,r)),i._sources.has(o)||i._sources.add(o);var s=e.sourceContentFor(r);s!=null&&i.setSourceContent(r,s)}),i};Ie.prototype.addMapping=function(e){var t=te.getArg(e,"generated"),i=te.getArg(e,"original",null),r=te.getArg(e,"source",null),o=te.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,i,r,o),r!=null&&(r=String(r),this._sources.has(r)||this._sources.add(r)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:i!=null&&i.line,originalColumn:i!=null&&i.column,source:r,name:o})};Ie.prototype.setSourceContent=function(e,t){var i=e;this._sourceRoot!=null&&(i=te.relative(this._sourceRoot,i)),t!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[te.toSetString(i)]=t):this._sourcesContents&&(delete this._sourcesContents[te.toSetString(i)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};Ie.prototype.applySourceMap=function(e,t,i){var r=t;if(t==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);r=e.file}var o=this._sourceRoot;o!=null&&(r=te.relative(o,r));var s=new zi,u=new zi;this._mappings.unsortedForEach(function(f){if(f.source===r&&f.originalLine!=null){var c=e.originalPositionFor({line:f.originalLine,column:f.originalColumn});c.source!=null&&(f.source=c.source,i!=null&&(f.source=te.join(i,f.source)),o!=null&&(f.source=te.relative(o,f.source)),f.originalLine=c.line,f.originalColumn=c.column,c.name!=null&&(f.name=c.name))}var d=f.source;d!=null&&!s.has(d)&&s.add(d);var h=f.name;h!=null&&!u.has(h)&&u.add(h)},this),this._sources=s,this._names=u,e.sources.forEach(function(f){var c=e.sourceContentFor(f);c!=null&&(i!=null&&(f=te.join(i,f)),o!=null&&(f=te.relative(o,f)),this.setSourceContent(f,c))},this)};Ie.prototype._validateMapping=function(e,t,i,r){if(t&&typeof t.line!="number"&&typeof t.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!t&&!i&&!r)){if(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&e.line>0&&e.column>=0&&t.line>0&&t.column>=0&&i)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:i,original:t,name:r}))}};Ie.prototype._serializeMappings=function(){for(var e=0,t=1,i=0,r=0,o=0,s=0,u="",f,c,d,h,m=this._mappings.toArray(),D=0,v=m.length;D<v;D++){if(c=m[D],f="",c.generatedLine!==t)for(e=0;c.generatedLine!==t;)f+=";",t++;else if(D>0){if(!te.compareByGeneratedPositionsInflated(c,m[D-1]))continue;f+=","}f+=Mn.encode(c.generatedColumn-e),e=c.generatedColumn,c.source!=null&&(h=this._sources.indexOf(c.source),f+=Mn.encode(h-s),s=h,f+=Mn.encode(c.originalLine-1-r),r=c.originalLine-1,f+=Mn.encode(c.originalColumn-i),i=c.originalColumn,c.name!=null&&(d=this._names.indexOf(c.name),f+=Mn.encode(d-o),o=d)),u+=f}return u};Ie.prototype._generateSourcesContent=function(e,t){return e.map(function(i){if(!this._sourcesContents)return null;t!=null&&(i=te.relative(t,i));var r=te.toSetString(i);return Object.prototype.hasOwnProperty.call(this._sourcesContents,r)?this._sourcesContents[r]:null},this)};Ie.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};Ie.prototype.toString=function(){return JSON.stringify(this.toJSON())};wl.SourceMapGenerator=Ie});var Sl=V(Ft=>{Ft.GREATEST_LOWER_BOUND=1;Ft.LEAST_UPPER_BOUND=2;function Go(n,e,t,i,r,o){var s=Math.floor((e-n)/2)+n,u=r(t,i[s],!0);return u===0?s:u>0?e-s>1?Go(s,e,t,i,r,o):o==Ft.LEAST_UPPER_BOUND?e<i.length?e:-1:s:s-n>1?Go(n,s,t,i,r,o):o==Ft.LEAST_UPPER_BOUND?s:n<0?-1:n}Ft.search=function(e,t,i,r){if(t.length===0)return-1;var o=Go(-1,t.length,e,t,i,r||Ft.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&i(t[o],t[o-1],!0)===0;)--o;return o}});var _l=V(Tl=>{function qo(n,e,t){var i=n[e];n[e]=n[t],n[t]=i}function qy(n,e){return Math.round(n+Math.random()*(e-n))}function Wo(n,e,t,i){if(t<i){var r=qy(t,i),o=t-1;qo(n,r,i);for(var s=n[i],u=t;u<i;u++)e(n[u],s)<=0&&(o+=1,qo(n,o,u));qo(n,o+1,u);var f=o+1;Wo(n,e,t,f-1),Wo(n,e,f+1,i)}}Tl.quickSort=function(n,e){Wo(n,e,0,n.length-1)}});var xl=V($i=>{var P=qt(),Yo=Sl(),Wt=Uo().ArraySet,Wy=Ro(),xn=_l().quickSort;function $(n,e){var t=n;return typeof n=="string"&&(t=P.parseSourceMapInput(n)),t.sections!=null?new Oe(t,e):new ue(t,e)}$.fromSourceMap=function(n,e){return ue.fromSourceMap(n,e)};$.prototype._version=3;$.prototype.__generatedMappings=null;Object.defineProperty($.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});$.prototype.__originalMappings=null;Object.defineProperty($.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});$.prototype._charIsMappingSeparator=function(e,t){var i=e.charAt(t);return i===";"||i===","};$.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")};$.GENERATED_ORDER=1;$.ORIGINAL_ORDER=2;$.GREATEST_LOWER_BOUND=1;$.LEAST_UPPER_BOUND=2;$.prototype.eachMapping=function(e,t,i){var r=t||null,o=i||$.GENERATED_ORDER,s;switch(o){case $.GENERATED_ORDER:s=this._generatedMappings;break;case $.ORIGINAL_ORDER:s=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var u=this.sourceRoot;s.map(function(f){var c=f.source===null?null:this._sources.at(f.source);return c=P.computeSourceURL(u,c,this._sourceMapURL),{source:c,generatedLine:f.generatedLine,generatedColumn:f.generatedColumn,originalLine:f.originalLine,originalColumn:f.originalColumn,name:f.name===null?null:this._names.at(f.name)}},this).forEach(e,r)};$.prototype.allGeneratedPositionsFor=function(e){var t=P.getArg(e,"line"),i={source:P.getArg(e,"source"),originalLine:t,originalColumn:P.getArg(e,"column",0)};if(i.source=this._findSourceIndex(i.source),i.source<0)return[];var r=[],o=this._findMapping(i,this._originalMappings,"originalLine","originalColumn",P.compareByOriginalPositions,Yo.LEAST_UPPER_BOUND);if(o>=0){var s=this._originalMappings[o];if(e.column===void 0)for(var u=s.originalLine;s&&s.originalLine===u;)r.push({line:P.getArg(s,"generatedLine",null),column:P.getArg(s,"generatedColumn",null),lastColumn:P.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o];else for(var f=s.originalColumn;s&&s.originalLine===t&&s.originalColumn==f;)r.push({line:P.getArg(s,"generatedLine",null),column:P.getArg(s,"generatedColumn",null),lastColumn:P.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++o]}return r};$i.SourceMapConsumer=$;function ue(n,e){var t=n;typeof n=="string"&&(t=P.parseSourceMapInput(n));var i=P.getArg(t,"version"),r=P.getArg(t,"sources"),o=P.getArg(t,"names",[]),s=P.getArg(t,"sourceRoot",null),u=P.getArg(t,"sourcesContent",null),f=P.getArg(t,"mappings"),c=P.getArg(t,"file",null);if(i!=this._version)throw new Error("Unsupported version: "+i);s&&(s=P.normalize(s)),r=r.map(String).map(P.normalize).map(function(d){return s&&P.isAbsolute(s)&&P.isAbsolute(d)?P.relative(s,d):d}),this._names=Wt.fromArray(o.map(String),!0),this._sources=Wt.fromArray(r,!0),this._absoluteSources=this._sources.toArray().map(function(d){return P.computeSourceURL(s,d,e)}),this.sourceRoot=s,this.sourcesContent=u,this._mappings=f,this._sourceMapURL=e,this.file=c}ue.prototype=Object.create($.prototype);ue.prototype.consumer=$;ue.prototype._findSourceIndex=function(n){var e=n;if(this.sourceRoot!=null&&(e=P.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var t;for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==n)return t;return-1};ue.fromSourceMap=function(e,t){var i=Object.create(ue.prototype),r=i._names=Wt.fromArray(e._names.toArray(),!0),o=i._sources=Wt.fromArray(e._sources.toArray(),!0);i.sourceRoot=e._sourceRoot,i.sourcesContent=e._generateSourcesContent(i._sources.toArray(),i.sourceRoot),i.file=e._file,i._sourceMapURL=t,i._absoluteSources=i._sources.toArray().map(function(D){return P.computeSourceURL(i.sourceRoot,D,t)});for(var s=e._mappings.toArray().slice(),u=i.__generatedMappings=[],f=i.__originalMappings=[],c=0,d=s.length;c<d;c++){var h=s[c],m=new Ml;m.generatedLine=h.generatedLine,m.generatedColumn=h.generatedColumn,h.source&&(m.source=o.indexOf(h.source),m.originalLine=h.originalLine,m.originalColumn=h.originalColumn,h.name&&(m.name=r.indexOf(h.name)),f.push(m)),u.push(m)}return xn(i.__originalMappings,P.compareByOriginalPositions),i};ue.prototype._version=3;Object.defineProperty(ue.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function Ml(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}ue.prototype._parseMappings=function(e,t){for(var i=1,r=0,o=0,s=0,u=0,f=0,c=e.length,d=0,h={},m={},D=[],v=[],w,x,k,b,R;d<c;)if(e.charAt(d)===";")i++,d++,r=0;else if(e.charAt(d)===",")d++;else{for(w=new Ml,w.generatedLine=i,b=d;b<c&&!this._charIsMappingSeparator(e,b);b++);if(x=e.slice(d,b),k=h[x],k)d+=x.length;else{for(k=[];d<b;)Wy.decode(e,d,m),R=m.value,d=m.rest,k.push(R);if(k.length===2)throw new Error("Found a source, but no line and column");if(k.length===3)throw new Error("Found a source and line, but no column");h[x]=k}w.generatedColumn=r+k[0],r=w.generatedColumn,k.length>1&&(w.source=u+k[1],u+=k[1],w.originalLine=o+k[2],o=w.originalLine,w.originalLine+=1,w.originalColumn=s+k[3],s=w.originalColumn,k.length>4&&(w.name=f+k[4],f+=k[4])),v.push(w),typeof w.originalLine=="number"&&D.push(w)}xn(v,P.compareByGeneratedPositionsDeflated),this.__generatedMappings=v,xn(D,P.compareByOriginalPositions),this.__originalMappings=D};ue.prototype._findMapping=function(e,t,i,r,o,s){if(e[i]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[i]);if(e[r]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[r]);return Yo.search(e,t,o,s)};ue.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var i=this._generatedMappings[e+1];if(t.generatedLine===i.generatedLine){t.lastGeneratedColumn=i.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}};ue.prototype.originalPositionFor=function(e){var t={generatedLine:P.getArg(e,"line"),generatedColumn:P.getArg(e,"column")},i=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",P.compareByGeneratedPositionsDeflated,P.getArg(e,"bias",$.GREATEST_LOWER_BOUND));if(i>=0){var r=this._generatedMappings[i];if(r.generatedLine===t.generatedLine){var o=P.getArg(r,"source",null);o!==null&&(o=this._sources.at(o),o=P.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var s=P.getArg(r,"name",null);return s!==null&&(s=this._names.at(s)),{source:o,line:P.getArg(r,"originalLine",null),column:P.getArg(r,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}};ue.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};ue.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;var i=this._findSourceIndex(e);if(i>=0)return this.sourcesContent[i];var r=e;this.sourceRoot!=null&&(r=P.relative(this.sourceRoot,r));var o;if(this.sourceRoot!=null&&(o=P.urlParse(this.sourceRoot))){var s=r.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!o.path||o.path=="/")&&this._sources.has("/"+r))return this.sourcesContent[this._sources.indexOf("/"+r)]}if(t)return null;throw new Error('"'+r+'" is not in the SourceMap.')};ue.prototype.generatedPositionFor=function(e){var t=P.getArg(e,"source");if(t=this._findSourceIndex(t),t<0)return{line:null,column:null,lastColumn:null};var i={source:t,originalLine:P.getArg(e,"line"),originalColumn:P.getArg(e,"column")},r=this._findMapping(i,this._originalMappings,"originalLine","originalColumn",P.compareByOriginalPositions,P.getArg(e,"bias",$.GREATEST_LOWER_BOUND));if(r>=0){var o=this._originalMappings[r];if(o.source===i.source)return{line:P.getArg(o,"generatedLine",null),column:P.getArg(o,"generatedColumn",null),lastColumn:P.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};$i.BasicSourceMapConsumer=ue;function Oe(n,e){var t=n;typeof n=="string"&&(t=P.parseSourceMapInput(n));var i=P.getArg(t,"version"),r=P.getArg(t,"sections");if(i!=this._version)throw new Error("Unsupported version: "+i);this._sources=new Wt,this._names=new Wt;var o={line:-1,column:0};this._sections=r.map(function(s){if(s.url)throw new Error("Support for url field in sections not implemented.");var u=P.getArg(s,"offset"),f=P.getArg(u,"line"),c=P.getArg(u,"column");if(f<o.line||f===o.line&&c<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=u,{generatedOffset:{generatedLine:f+1,generatedColumn:c+1},consumer:new $(P.getArg(s,"map"),e)}})}Oe.prototype=Object.create($.prototype);Oe.prototype.constructor=$;Oe.prototype._version=3;Object.defineProperty(Oe.prototype,"sources",{get:function(){for(var n=[],e=0;e<this._sections.length;e++)for(var t=0;t<this._sections[e].consumer.sources.length;t++)n.push(this._sections[e].consumer.sources[t]);return n}});Oe.prototype.originalPositionFor=function(e){var t={generatedLine:P.getArg(e,"line"),generatedColumn:P.getArg(e,"column")},i=Yo.search(t,this._sections,function(o,s){var u=o.generatedLine-s.generatedOffset.generatedLine;return u||o.generatedColumn-s.generatedOffset.generatedColumn}),r=this._sections[i];return r?r.consumer.originalPositionFor({line:t.generatedLine-(r.generatedOffset.generatedLine-1),column:t.generatedColumn-(r.generatedOffset.generatedLine===t.generatedLine?r.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};Oe.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};Oe.prototype.sourceContentFor=function(e,t){for(var i=0;i<this._sections.length;i++){var r=this._sections[i],o=r.consumer.sourceContentFor(e,!0);if(o)return o}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')};Oe.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var i=this._sections[t];if(i.consumer._findSourceIndex(P.getArg(e,"source"))!==-1){var r=i.consumer.generatedPositionFor(e);if(r){var o={line:r.line+(i.generatedOffset.generatedLine-1),column:r.column+(i.generatedOffset.generatedLine===r.line?i.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}};Oe.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var i=0;i<this._sections.length;i++)for(var r=this._sections[i],o=r.consumer._generatedMappings,s=0;s<o.length;s++){var u=o[s],f=r.consumer._sources.at(u.source);f=P.computeSourceURL(r.consumer.sourceRoot,f,this._sourceMapURL),this._sources.add(f),f=this._sources.indexOf(f);var c=null;u.name&&(c=r.consumer._names.at(u.name),this._names.add(c),c=this._names.indexOf(c));var d={source:f,generatedLine:u.generatedLine+(r.generatedOffset.generatedLine-1),generatedColumn:u.generatedColumn+(r.generatedOffset.generatedLine===u.generatedLine?r.generatedOffset.generatedColumn-1:0),originalLine:u.originalLine,originalColumn:u.originalColumn,name:c};this.__generatedMappings.push(d),typeof d.originalLine=="number"&&this.__originalMappings.push(d)}xn(this.__generatedMappings,P.compareByGeneratedPositionsDeflated),xn(this.__originalMappings,P.compareByOriginalPositions)};$i.IndexedSourceMapConsumer=Oe});var Al=V(kl=>{var Yy=Ho().SourceMapGenerator,Ki=qt(),zy=/(\r?\n)/,$y=10,Yt="$$$isSourceNode$$$";function Se(n,e,t,i,r){this.children=[],this.sourceContents={},this.line=n==null?null:n,this.column=e==null?null:e,this.source=t==null?null:t,this.name=r==null?null:r,this[Yt]=!0,i!=null&&this.add(i)}Se.fromStringWithSourceMap=function(e,t,i){var r=new Se,o=e.split(zy),s=0,u=function(){var m=v(),D=v()||"";return m+D;function v(){return s<o.length?o[s++]:void 0}},f=1,c=0,d=null;return t.eachMapping(function(m){if(d!==null)if(f<m.generatedLine)h(d,u()),f++,c=0;else{var D=o[s]||"",v=D.substr(0,m.generatedColumn-c);o[s]=D.substr(m.generatedColumn-c),c=m.generatedColumn,h(d,v),d=m;return}for(;f<m.generatedLine;)r.add(u()),f++;if(c<m.generatedColumn){var D=o[s]||"";r.add(D.substr(0,m.generatedColumn)),o[s]=D.substr(m.generatedColumn),c=m.generatedColumn}d=m},this),s<o.length&&(d&&h(d,u()),r.add(o.splice(s).join(""))),t.sources.forEach(function(m){var D=t.sourceContentFor(m);D!=null&&(i!=null&&(m=Ki.join(i,m)),r.setSourceContent(m,D))}),r;function h(m,D){if(m===null||m.source===void 0)r.add(D);else{var v=i?Ki.join(i,m.source):m.source;r.add(new Se(m.originalLine,m.originalColumn,v,D,m.name))}}};Se.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(t){this.add(t)},this);else if(e[Yt]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};Se.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;t>=0;t--)this.prepend(e[t]);else if(e[Yt]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};Se.prototype.walk=function(e){for(var t,i=0,r=this.children.length;i<r;i++)t=this.children[i],t[Yt]?t.walk(e):t!==""&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})};Se.prototype.join=function(e){var t,i,r=this.children.length;if(r>0){for(t=[],i=0;i<r-1;i++)t.push(this.children[i]),t.push(e);t.push(this.children[i]),this.children=t}return this};Se.prototype.replaceRight=function(e,t){var i=this.children[this.children.length-1];return i[Yt]?i.replaceRight(e,t):typeof i=="string"?this.children[this.children.length-1]=i.replace(e,t):this.children.push("".replace(e,t)),this};Se.prototype.setSourceContent=function(e,t){this.sourceContents[Ki.toSetString(e)]=t};Se.prototype.walkSourceContents=function(e){for(var t=0,i=this.children.length;t<i;t++)this.children[t][Yt]&&this.children[t].walkSourceContents(e);for(var r=Object.keys(this.sourceContents),t=0,i=r.length;t<i;t++)e(Ki.fromSetString(r[t]),this.sourceContents[r[t]])};Se.prototype.toString=function(){var e="";return this.walk(function(t){e+=t}),e};Se.prototype.toStringWithSourceMap=function(e){var t={code:"",line:1,column:0},i=new Yy(e),r=!1,o=null,s=null,u=null,f=null;return this.walk(function(c,d){t.code+=c,d.source!==null&&d.line!==null&&d.column!==null?((o!==d.source||s!==d.line||u!==d.column||f!==d.name)&&i.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:t.line,column:t.column},name:d.name}),o=d.source,s=d.line,u=d.column,f=d.name,r=!0):r&&(i.addMapping({generated:{line:t.line,column:t.column}}),o=null,r=!1);for(var h=0,m=c.length;h<m;h++)c.charCodeAt(h)===$y?(t.line++,t.column=0,h+1===m?(o=null,r=!1):r&&i.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:t.line,column:t.column},name:d.name})):t.column++}),this.walkSourceContents(function(c,d){i.setSourceContent(c,d)}),{code:t.code,map:i}};kl.SourceNode=Se});var Il=V(Ji=>{Ji.SourceMapGenerator=Ho().SourceMapGenerator;Ji.SourceMapConsumer=xl().SourceMapConsumer;Ji.SourceNode=Al().SourceNode});var Ll=V((Zi,Nl)=>{"use strict";Zi.__esModule=!0;var $o=pe(),wt=void 0;try{(typeof define!="function"||!define.amd)&&(Pl=Il(),wt=Pl.SourceNode)}catch(n){}var Pl;wt||(wt=function(n,e,t,i){this.src="",i&&this.add(i)},wt.prototype={add:function(e){$o.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){$o.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}});function zo(n,e,t){if($o.isArray(n)){for(var i=[],r=0,o=n.length;r<o;r++)i.push(e.wrap(n[r],t));return i}else if(typeof n=="boolean"||typeof n=="number")return n+"";return n}function bl(n){this.srcFile=n,this.source=[]}bl.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each(function(t){e.add(["  ",t,`
`])}),e},each:function(e){for(var t=0,i=this.source.length;t<i;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new wt(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||arguments[1]===void 0?this.currentLocation||{start:{}}:arguments[1];return e instanceof wt?e:(e=zo(e,this,t),new wt(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,i){return i=this.generateList(i),this.wrap([e,t?"."+t+"(":"(",i,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var t=this,i=[];Object.keys(e).forEach(function(o){var s=zo(e[o],t);s!=="undefined"&&i.push([t.quotedString(o),":",s])});var r=this.generateList(i);return r.prepend("{"),r.add("}"),r},generateList:function(e){for(var t=this.empty(),i=0,r=e.length;i<r;i++)i&&t.add(","),t.add(zo(e[i],this));return t},generateArray:function(e){var t=this.generateList(e);return t.prepend("["),t.add("]"),t}};Zi.default=bl;Nl.exports=Zi.default});var Ul=V((Qi,Vl)=>{"use strict";Qi.__esModule=!0;function Bl(n){return n&&n.__esModule?n:{default:n}}var Rl=bi(),Ky=ke(),Ko=Bl(Ky),Jy=pe(),Zy=Ll(),Ol=Bl(Zy);function zt(n){this.value=n}function $t(){}$t.prototype={nameLookup:function(e,t){return this.internalNameLookup(e,t)},depthedLookup:function(e){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(e),")"]},compilerInfo:function(){var e=Rl.COMPILER_REVISION,t=Rl.REVISION_CHANGES[e];return[e,t]},appendToBuffer:function(e,t,i){return Jy.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:i?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(e,t){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",e,",",JSON.stringify(t),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(e,t,i,r){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!r,this.name=this.environment.name,this.isChild=!!i,this.context=i||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var o=e.opcodes,s=void 0,u=void 0,f=void 0,c=void 0;for(f=0,c=o.length;f<c;f++)s=o[f],this.source.currentLocation=s.loc,u=u||s.loc,this[s.opcode].apply(this,s.args);if(this.source.currentLocation=u,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new Ko.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),`;
`]),this.decorators.push("return fn;"),r?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend(`function(fn, props, container, depth0, data, blockParams, depths) {
`),this.decorators.push(`}
`),this.decorators=this.decorators.merge()));var d=this.createFunctionContext(r);if(this.isChild)return d;var h={compiler:this.compilerInfo(),main:d};this.decorators&&(h.main_d=this.decorators,h.useDecorators=!0);var m=this.context,D=m.programs,v=m.decorators;for(f=0,c=D.length;f<c;f++)D[f]&&(h[f]=D[f],v[f]&&(h[f+"_d"]=v[f],h.useDecorators=!0));return this.environment.usePartial&&(h.usePartial=!0),this.options.data&&(h.useData=!0),this.useDepths&&(h.useDepths=!0),this.useBlockParams&&(h.useBlockParams=!0),this.options.compat&&(h.compat=!0),r?h.compilerOptions=this.options:(h.compiler=JSON.stringify(h.compiler),this.source.currentLocation={start:{line:1,column:0}},h=this.objectLiteral(h),t.srcName?(h=h.toStringWithSourceMap({file:t.destName}),h.map=h.map&&h.map.toString()):h=h.toString()),h},preamble:function(){this.lastContext=0,this.source=new Ol.default(this.options.srcName),this.decorators=new Ol.default(this.options.srcName)},createFunctionContext:function(e){var t=this,i="",r=this.stackVars.concat(this.registers.list);r.length>0&&(i+=", "+r.join(", "));var o=0;Object.keys(this.aliases).forEach(function(f){var c=t.aliases[f];c.children&&c.referenceCount>1&&(i+=", alias"+ ++o+"="+f,c.children[0]="alias"+o)}),this.lookupPropertyFunctionIsUsed&&(i+=", "+this.lookupPropertyFunctionVarDeclaration());var s=["container","depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&s.push("blockParams"),this.useDepths&&s.push("depths");var u=this.mergeSource(i);return e?(s.push(u),Function.apply(this,s)):this.source.wrap(["function(",s.join(","),`) {
  `,u,"}"])},mergeSource:function(e){var t=this.environment.isSimple,i=!this.forceBuffer,r=void 0,o=void 0,s=void 0,u=void 0;return this.source.each(function(f){f.appendToBuffer?(s?f.prepend("  + "):s=f,u=f):(s&&(o?s.prepend("buffer += "):r=!0,u.add(";"),s=u=void 0),o=!0,t||(i=!1))}),i?s?(s.prepend("return "),u.add(";")):o||this.source.push('return "";'):(e+=", buffer = "+(r?"":this.initializeBuffer()),s?(s.prepend("return buffer + "),u.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(r?"":`;
`)),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return`
      lookupProperty = container.lookupProperty || function(parent, propertyName) {
        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {
          return parent[propertyName];
        }
        return undefined
    }
    `.trim()},blockValue:function(e){var t=this.aliasable("container.hooks.blockHelperMissing"),i=[this.contextName(0)];this.setupHelperArgs(e,0,i);var r=this.popStack();i.splice(1,0,r),this.push(this.source.functionCall(t,"call",i))},ambiguousBlockValue:function(){var e=this.aliasable("container.hooks.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var i=this.topStack();t.splice(1,0,i),this.pushSource(["if (!",this.lastHelper,") { ",i," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(t){return[" != null ? ",t,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,i,r){var o=0;!r&&this.options.compat&&!this.lastContext?this.push(this.depthedLookup(e[o++])):this.pushContext(),this.resolvePath("context",e,o,t,i)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,i){e?this.pushStackLiteral("container.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0,i)},resolvePath:function(e,t,i,r,o){var s=this;if(this.options.strict||this.options.assumeObjects){this.push(Qy(this.options.strict&&o,this,t,i,e));return}for(var u=t.length;i<u;i++)this.replaceStack(function(f){var c=s.nameLookup(f,t[i],e);return r?[" && ",c]:[" != null ? ",c," : ",f]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),t!=="SubExpression"&&(typeof e=="string"?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){e!=null?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},registerDecorator:function(e,t){var i=this.nameLookup("decorators",t,"decorator"),r=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(i,"",["fn","props","container",r])," || fn;"])},invokeHelper:function(e,t,i){var r=this.popStack(),o=this.setupHelper(e,t),s=[];i&&s.push(o.name),s.push(r),this.options.strict||s.push(this.aliasable("container.hooks.helperMissing"));var u=["(",this.itemsSeparatedBy(s,"||"),")"],f=this.source.functionCall(u,"call",o.callParams);this.push(f)},itemsSeparatedBy:function(e,t){var i=[];i.push(e[0]);for(var r=1;r<e.length;r++)i.push(t,e[r]);return i},invokeKnownHelper:function(e,t){var i=this.setupHelper(e,t);this.push(this.source.functionCall(i.name,"call",i.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var i=this.popStack();this.emptyHash();var r=this.setupHelper(0,e,t),o=this.lastHelper=this.nameLookup("helpers",e,"helper"),s=["(","(helper = ",o," || ",i,")"];this.options.strict||(s[0]="(helper = ",s.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",s,r.paramsInit?["),(",r.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",r.callParams)," : helper))"])},invokePartial:function(e,t,i){var r=[],o=this.setupParams(t,1,r);e&&(t=this.popStack(),delete o.name),i&&(o.indent=JSON.stringify(i)),o.helpers="helpers",o.partials="partials",o.decorators="container.decorators",e?r.unshift(t):r.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(o.depths="depths"),o=this.objectLiteral(o),r.push(o),this.push(this.source.functionCall("container.invokePartial","",r))},assignToHash:function(e){var t=this.popStack(),i=void 0,r=void 0,o=void 0;this.trackIds&&(o=this.popStack()),this.stringParams&&(r=this.popStack(),i=this.popStack());var s=this.hash;i&&(s.contexts[e]=i),r&&(s.types[e]=r),o&&(s.ids[e]=o),s.values[e]=t},pushId:function(e,t,i){e==="BlockParam"?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(i?" + "+JSON.stringify("."+i):"")):e==="PathExpression"?this.pushString(t):e==="SubExpression"?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:$t,compileChildren:function(e,t){for(var i=e.children,r=void 0,o=void 0,s=0,u=i.length;s<u;s++){r=i[s],o=new this.compiler;var f=this.matchExistingProgram(r);if(f==null){this.context.programs.push("");var c=this.context.programs.length;r.index=c,r.name="program"+c,this.context.programs[c]=o.compile(r,t,this.context,!this.precompile),this.context.decorators[c]=o.decorators,this.context.environments[c]=r,this.useDepths=this.useDepths||o.useDepths,this.useBlockParams=this.useBlockParams||o.useBlockParams,r.useDepths=this.useDepths,r.useBlockParams=this.useBlockParams}else r.index=f.index,r.name="program"+f.index,this.useDepths=this.useDepths||f.useDepths,this.useBlockParams=this.useBlockParams||f.useBlockParams}},matchExistingProgram:function(e){for(var t=0,i=this.context.environments.length;t<i;t++){var r=this.context.environments[t];if(r&&r.equals(e))return r}},programExpression:function(e){var t=this.environment.children[e],i=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&i.push("blockParams"),this.useDepths&&i.push("depths"),"container.program("+i.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof zt||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new zt(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],i=void 0,r=void 0,o=void 0;if(!this.isInline())throw new Ko.default("replaceStack on non-inline");var s=this.popStack(!0);if(s instanceof zt)i=[s.value],t=["(",i],o=!0;else{r=!0;var u=this.incrStack();t=["((",this.push(u)," = ",s,")"],i=this.topStack()}var f=e.call(this,i);o||this.popStack(),r&&this.stackSlot--,this.push(t.concat(f,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,i=e.length;t<i;t++){var r=e[t];if(r instanceof zt)this.compileStack.push(r);else{var o=this.incrStack();this.pushSource([o," = ",r,";"]),this.compileStack.push(o)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),i=(t?this.inlineStack:this.compileStack).pop();if(!e&&i instanceof zt)return i.value;if(!t){if(!this.stackSlot)throw new Ko.default("Invalid stack pop");this.stackSlot--}return i},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof zt?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):(t=this.aliases[e]=this.source.wrap(e),t.aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,i){var r=[],o=this.setupHelperArgs(t,e,r,i),s=this.nameLookup("helpers",t,"helper"),u=this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})");return{params:r,paramsInit:o,name:s,callParams:[u].concat(r)}},setupParams:function(e,t,i){var r={},o=[],s=[],u=[],f=!i,c=void 0;f&&(i=[]),r.name=this.quotedString(e),r.hash=this.popStack(),this.trackIds&&(r.hashIds=this.popStack()),this.stringParams&&(r.hashTypes=this.popStack(),r.hashContexts=this.popStack());var d=this.popStack(),h=this.popStack();(h||d)&&(r.fn=h||"container.noop",r.inverse=d||"container.noop");for(var m=t;m--;)c=this.popStack(),i[m]=c,this.trackIds&&(u[m]=this.popStack()),this.stringParams&&(s[m]=this.popStack(),o[m]=this.popStack());return f&&(r.args=this.source.generateArray(i)),this.trackIds&&(r.ids=this.source.generateArray(u)),this.stringParams&&(r.types=this.source.generateArray(s),r.contexts=this.source.generateArray(o)),this.options.data&&(r.data="data"),this.useBlockParams&&(r.blockParams="blockParams"),r},setupHelperArgs:function(e,t,i,r){var o=this.setupParams(e,t,i);return o.loc=JSON.stringify(this.source.currentLocation),o=this.objectLiteral(o),r?(this.useRegister("options"),i.push("options"),["options=",o]):i?(i.push(o),""):o}};(function(){for(var n="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),e=$t.RESERVED_WORDS={},t=0,i=n.length;t<i;t++)e[n[t]]=!0})();$t.isValidJavaScriptVariableName=function(n){return!$t.RESERVED_WORDS[n]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(n)};function Qy(n,e,t,i,r){var o=e.popStack(),s=t.length;for(n&&s--;i<s;i++)o=e.nameLookup(o,t[i],r);return n?[e.aliasable("container.strict"),"(",o,", ",e.quotedString(t[i]),", ",JSON.stringify(e.source.currentLocation)," )"]:o}Qi.default=$t;Vl.exports=Qi.default});var Qo=V((Xi,Gl)=>{"use strict";Xi.__esModule=!0;function kn(n){return n&&n.__esModule?n:{default:n}}var Xy=Wu(),jy=kn(Xy),ev=So(),tv=kn(ev),Jo=il(),Zo=al(),nv=Ul(),iv=kn(nv),rv=_o(),ov=kn(rv),sv=Co(),av=kn(sv),uv=jy.default.create;function Hl(){var n=uv();return n.compile=function(e,t){return Zo.compile(e,t,n)},n.precompile=function(e,t){return Zo.precompile(e,t,n)},n.AST=tv.default,n.Compiler=Zo.Compiler,n.JavaScriptCompiler=iv.default,n.Parser=Jo.parser,n.parse=Jo.parse,n.parseWithoutProcessing=Jo.parseWithoutProcessing,n}var Kt=Hl();Kt.create=Hl;av.default(Kt);Kt.Visitor=ov.default;Kt.default=Kt;Xi.default=Kt;Gl.exports=Xi.default});var kf=V($e=>{"use strict";Object.defineProperty($e,"__esModule",{value:!0});require("obsidian");var it=class extends Error{},ss=class extends it{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}},as=class extends it{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}},us=class extends it{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}},Mt=class extends it{},fr=class extends it{constructor(e){super(`Invalid unit ${e}`)}},Ce=class extends it{},Ye=class extends it{constructor(){super("Zone is an abstract class")}},A="numeric",He="short",Me="long",dr={year:A,month:A,day:A},xc={year:A,month:He,day:A},mv={year:A,month:He,day:A,weekday:He},kc={year:A,month:Me,day:A},Ac={year:A,month:Me,day:A,weekday:Me},Ic={hour:A,minute:A},Pc={hour:A,minute:A,second:A},bc={hour:A,minute:A,second:A,timeZoneName:He},Nc={hour:A,minute:A,second:A,timeZoneName:Me},Lc={hour:A,minute:A,hourCycle:"h23"},Rc={hour:A,minute:A,second:A,hourCycle:"h23"},Oc={hour:A,minute:A,second:A,hourCycle:"h23",timeZoneName:He},Bc={hour:A,minute:A,second:A,hourCycle:"h23",timeZoneName:Me},Vc={year:A,month:A,day:A,hour:A,minute:A},Uc={year:A,month:A,day:A,hour:A,minute:A,second:A},Hc={year:A,month:He,day:A,hour:A,minute:A},Gc={year:A,month:He,day:A,hour:A,minute:A,second:A},gv={year:A,month:He,day:A,weekday:He,hour:A,minute:A},qc={year:A,month:Me,day:A,hour:A,minute:A,timeZoneName:He},Wc={year:A,month:Me,day:A,hour:A,minute:A,second:A,timeZoneName:He},Yc={year:A,month:Me,day:A,weekday:Me,hour:A,minute:A,timeZoneName:Me},zc={year:A,month:Me,day:A,weekday:Me,hour:A,minute:A,second:A,timeZoneName:Me},At=class{get type(){throw new Ye}get name(){throw new Ye}get ianaName(){return this.name}get isUniversal(){throw new Ye}offsetName(e,t){throw new Ye}formatOffset(e,t){throw new Ye}offset(e){throw new Ye}equals(e){throw new Ye}get isValid(){throw new Ye}},Xo=null,hr=class n extends At{static get instance(){return Xo===null&&(Xo=new n),Xo}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return Kc(e,t,i)}formatOffset(e,t){return Vn(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}},lr={};function Dv(n){return lr[n]||(lr[n]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:n,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),lr[n]}var yv={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function vv(n,e){let t=n.format(e).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(t),[,r,o,s,u,f,c,d]=i;return[s,r,o,u,f,c,d]}function Cv(n,e){let t=n.formatToParts(e),i=[];for(let r=0;r<t.length;r++){let{type:o,value:s}=t[r],u=yv[o];o==="era"?i[u]=s:H(u)||(i[u]=parseInt(s,10))}return i}var ir={},ht=class n extends At{static create(e){return ir[e]||(ir[e]=new n(e)),ir[e]}static resetCache(){ir={},lr={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(t){return!1}}constructor(e){super(),this.zoneName=e,this.valid=n.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:i}){return Kc(e,t,i,this.name)}formatOffset(e,t){return Vn(this.offset(e),t)}offset(e){let t=new Date(e);if(isNaN(t))return NaN;let i=Dv(this.name),[r,o,s,u,f,c,d]=i.formatToParts?Cv(i,t):vv(i,t);u==="BC"&&(r=-Math.abs(r)+1);let m=Fr({year:r,month:o,day:s,hour:f===24?0:f,minute:c,second:d,millisecond:0}),D=+t,v=D%1e3;return D-=v>=0?v:1e3+v,(m-D)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}},Ql={};function Ev(n,e={}){let t=JSON.stringify([n,e]),i=Ql[t];return i||(i=new Intl.ListFormat(n,e),Ql[t]=i),i}var ls={};function cs(n,e={}){let t=JSON.stringify([n,e]),i=ls[t];return i||(i=new Intl.DateTimeFormat(n,e),ls[t]=i),i}var fs={};function Fv(n,e={}){let t=JSON.stringify([n,e]),i=fs[t];return i||(i=new Intl.NumberFormat(n,e),fs[t]=i),i}var ds={};function wv(n,e={}){let{base:t,...i}=e,r=JSON.stringify([n,i]),o=ds[r];return o||(o=new Intl.RelativeTimeFormat(n,e),ds[r]=o),o}var On=null;function Sv(){return On||(On=new Intl.DateTimeFormat().resolvedOptions().locale,On)}function Tv(n){let e=n.indexOf("-x-");e!==-1&&(n=n.substring(0,e));let t=n.indexOf("-u-");if(t===-1)return[n];{let i,r;try{i=cs(n).resolvedOptions(),r=n}catch(u){let f=n.substring(0,t);i=cs(f).resolvedOptions(),r=f}let{numberingSystem:o,calendar:s}=i;return[r,o,s]}}function _v(n,e,t){return(t||e)&&(n.includes("-u-")||(n+="-u"),t&&(n+=`-ca-${t}`),e&&(n+=`-nu-${e}`)),n}function Mv(n){let e=[];for(let t=1;t<=12;t++){let i=U.utc(2009,t,1);e.push(n(i))}return e}function xv(n){let e=[];for(let t=1;t<=7;t++){let i=U.utc(2016,11,13+t);e.push(n(i))}return e}function rr(n,e,t,i){let r=n.listingMode();return r==="error"?null:r==="en"?t(e):i(e)}function kv(n){return n.numberingSystem&&n.numberingSystem!=="latn"?!1:n.numberingSystem==="latn"||!n.locale||n.locale.startsWith("en")||new Intl.DateTimeFormat(n.intl).resolvedOptions().numberingSystem==="latn"}var hs=class{constructor(e,t,i){this.padTo=i.padTo||0,this.floor=i.floor||!1;let{padTo:r,floor:o,...s}=i;if(!t||Object.keys(s).length>0){let u={useGrouping:!1,...i};i.padTo>0&&(u.minimumIntegerDigits=i.padTo),this.inf=Fv(e,u)}}format(e){if(this.inf){let t=this.floor?Math.floor(e):e;return this.inf.format(t)}else{let t=this.floor?Math.floor(e):Ms(e,3);return ne(t,this.padTo)}}},ps=class{constructor(e,t,i){this.opts=i,this.originalZone=void 0;let r;if(this.opts.timeZone)this.dt=e;else if(e.zone.type==="fixed"){let s=-1*(e.offset/60),u=s>=0?`Etc/GMT+${s}`:`Etc/GMT${s}`;e.offset!==0&&ht.create(u).valid?(r=u,this.dt=e):(r="UTC",this.dt=e.offset===0?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else e.zone.type==="system"?this.dt=e:e.zone.type==="iana"?(this.dt=e,r=e.zone.name):(r="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);let o={...this.opts};o.timeZone=o.timeZone||r,this.dtf=cs(t,o)}format(){return this.originalZone?this.formatToParts().map(({value:e})=>e).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){let e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map(t=>{if(t.type==="timeZoneName"){let i=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...t,value:i}}else return t}):e}resolvedOptions(){return this.dtf.resolvedOptions()}},ms=class{constructor(e,t,i){this.opts={style:"long",...i},!t&&$c()&&(this.rtf=wv(e,i))}format(e,t){return this.rtf?this.rtf.format(e,t):Yv(t,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}},Q=class n{static fromOpts(e){return n.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,t,i,r=!1){let o=e||Z.defaultLocale,s=o||(r?"en-US":Sv()),u=t||Z.defaultNumberingSystem,f=i||Z.defaultOutputCalendar;return new n(s,u,f,o)}static resetCache(){On=null,ls={},fs={},ds={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:i}={}){return n.create(e,t,i)}constructor(e,t,i,r){let[o,s,u]=Tv(e);this.locale=o,this.numberingSystem=t||s||null,this.outputCalendar=i||u||null,this.intl=_v(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=r,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=kv(this)),this.fastNumbersCached}listingMode(){let e=this.isEnglish(),t=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&t?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:n.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return rr(this,e,Qc,()=>{let i=t?{month:e,day:"numeric"}:{month:e},r=t?"format":"standalone";return this.monthsCache[r][e]||(this.monthsCache[r][e]=Mv(o=>this.extract(o,i,"month"))),this.monthsCache[r][e]})}weekdays(e,t=!1){return rr(this,e,ef,()=>{let i=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},r=t?"format":"standalone";return this.weekdaysCache[r][e]||(this.weekdaysCache[r][e]=xv(o=>this.extract(o,i,"weekday"))),this.weekdaysCache[r][e]})}meridiems(){return rr(this,void 0,()=>tf,()=>{if(!this.meridiemCache){let e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[U.utc(2016,11,13,9),U.utc(2016,11,13,19)].map(t=>this.extract(t,e,"dayperiod"))}return this.meridiemCache})}eras(e){return rr(this,e,nf,()=>{let t={era:e};return this.eraCache[e]||(this.eraCache[e]=[U.utc(-40,1,1),U.utc(2017,1,1)].map(i=>this.extract(i,t,"era"))),this.eraCache[e]})}extract(e,t,i){let r=this.dtFormatter(e,t),o=r.formatToParts(),s=o.find(u=>u.type.toLowerCase()===i);return s?s.value:null}numberFormatter(e={}){return new hs(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new ps(e,this.intl,t)}relFormatter(e={}){return new ms(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Ev(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}},jo=null,Ne=class n extends At{static get utcInstance(){return jo===null&&(jo=new n(0)),jo}static instance(e){return e===0?n.utcInstance:new n(e)}static parseSpecifier(e){if(e){let t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new n(wr(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${Vn(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${Vn(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return Vn(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}},gs=class extends At{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function dt(n,e){if(H(n)||n===null)return e;if(n instanceof At)return n;if(Av(n)){let t=n.toLowerCase();return t==="default"?e:t==="local"||t==="system"?hr.instance:t==="utc"||t==="gmt"?Ne.utcInstance:Ne.parseSpecifier(t)||ht.create(n)}else return kt(n)?Ne.instance(n):typeof n=="object"&&"offset"in n&&typeof n.offset=="function"?n:new gs(n)}var Xl=()=>Date.now(),jl="system",ec=null,tc=null,nc=null,ic=60,rc,Z=class{static get now(){return Xl}static set now(e){Xl=e}static set defaultZone(e){jl=e}static get defaultZone(){return dt(jl,hr.instance)}static get defaultLocale(){return ec}static set defaultLocale(e){ec=e}static get defaultNumberingSystem(){return tc}static set defaultNumberingSystem(e){tc=e}static get defaultOutputCalendar(){return nc}static set defaultOutputCalendar(e){nc=e}static get twoDigitCutoffYear(){return ic}static set twoDigitCutoffYear(e){ic=e%100}static get throwOnInvalid(){return rc}static set throwOnInvalid(e){rc=e}static resetCaches(){Q.resetCache(),ht.resetCache()}};function H(n){return typeof n=="undefined"}function kt(n){return typeof n=="number"}function Er(n){return typeof n=="number"&&n%1===0}function Av(n){return typeof n=="string"}function Iv(n){return Object.prototype.toString.call(n)==="[object Date]"}function $c(){try{return typeof Intl!="undefined"&&!!Intl.RelativeTimeFormat}catch(n){return!1}}function Pv(n){return Array.isArray(n)?n:[n]}function oc(n,e,t){if(n.length!==0)return n.reduce((i,r)=>{let o=[e(r),r];return i&&t(i[0],o[0])===i[0]?i:o},null)[1]}function bv(n,e){return e.reduce((t,i)=>(t[i]=n[i],t),{})}function en(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function nt(n,e,t){return Er(n)&&n>=e&&n<=t}function Nv(n,e){return n-e*Math.floor(n/e)}function ne(n,e=2){let t=n<0,i;return t?i="-"+(""+-n).padStart(e,"0"):i=(""+n).padStart(e,"0"),i}function ft(n){if(!(H(n)||n===null||n===""))return parseInt(n,10)}function Tt(n){if(!(H(n)||n===null||n===""))return parseFloat(n)}function _s(n){if(!(H(n)||n===null||n==="")){let e=parseFloat("0."+n)*1e3;return Math.floor(e)}}function Ms(n,e,t=!1){let i=10**e;return(t?Math.trunc:Math.round)(n*i)/i}function Gn(n){return n%4===0&&(n%100!==0||n%400===0)}function Bn(n){return Gn(n)?366:365}function pr(n,e){let t=Nv(e-1,12)+1,i=n+(e-t)/12;return t===2?Gn(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][t-1]}function Fr(n){let e=Date.UTC(n.year,n.month-1,n.day,n.hour,n.minute,n.second,n.millisecond);return n.year<100&&n.year>=0&&(e=new Date(e),e.setUTCFullYear(n.year,n.month-1,n.day)),+e}function mr(n){let e=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7,t=n-1,i=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7;return e===4||i===3?53:52}function Ds(n){return n>99?n:n>Z.twoDigitCutoffYear?1900+n:2e3+n}function Kc(n,e,t,i=null){let r=new Date(n),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(o.timeZone=i);let s={timeZoneName:e,...o},u=new Intl.DateTimeFormat(t,s).formatToParts(r).find(f=>f.type.toLowerCase()==="timezonename");return u?u.value:null}function wr(n,e){let t=parseInt(n,10);Number.isNaN(t)&&(t=0);let i=parseInt(e,10)||0,r=t<0||Object.is(t,-0)?-i:i;return t*60+r}function Jc(n){let e=Number(n);if(typeof n=="boolean"||n===""||Number.isNaN(e))throw new Ce(`Invalid unit value ${n}`);return e}function gr(n,e){let t={};for(let i in n)if(en(n,i)){let r=n[i];if(r==null)continue;t[e(i)]=Jc(r)}return t}function Vn(n,e){let t=Math.trunc(Math.abs(n/60)),i=Math.trunc(Math.abs(n%60)),r=n>=0?"+":"-";switch(e){case"short":return`${r}${ne(t,2)}:${ne(i,2)}`;case"narrow":return`${r}${t}${i>0?`:${i}`:""}`;case"techie":return`${r}${ne(t,2)}${ne(i,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Sr(n){return bv(n,["hour","minute","second","millisecond"])}var Lv=["January","February","March","April","May","June","July","August","September","October","November","December"],Zc=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Rv=["J","F","M","A","M","J","J","A","S","O","N","D"];function Qc(n){switch(n){case"narrow":return[...Rv];case"short":return[...Zc];case"long":return[...Lv];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var Xc=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],jc=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],Ov=["M","T","W","T","F","S","S"];function ef(n){switch(n){case"narrow":return[...Ov];case"short":return[...jc];case"long":return[...Xc];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var tf=["AM","PM"],Bv=["Before Christ","Anno Domini"],Vv=["BC","AD"],Uv=["B","A"];function nf(n){switch(n){case"narrow":return[...Uv];case"short":return[...Vv];case"long":return[...Bv];default:return null}}function Hv(n){return tf[n.hour<12?0:1]}function Gv(n,e){return ef(e)[n.weekday-1]}function qv(n,e){return Qc(e)[n.month-1]}function Wv(n,e){return nf(e)[n.year<0?0:1]}function Yv(n,e,t="always",i=!1){let r={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=["hours","minutes","seconds"].indexOf(n)===-1;if(t==="auto"&&o){let h=n==="days";switch(e){case 1:return h?"tomorrow":`next ${r[n][0]}`;case-1:return h?"yesterday":`last ${r[n][0]}`;case 0:return h?"today":`this ${r[n][0]}`}}let s=Object.is(e,-0)||e<0,u=Math.abs(e),f=u===1,c=r[n],d=i?f?c[1]:c[2]||c[1]:f?r[n][0]:n;return s?`${u} ${d} ago`:`in ${u} ${d}`}function sc(n,e){let t="";for(let i of n)i.literal?t+=i.val:t+=e(i.val);return t}var zv={D:dr,DD:xc,DDD:kc,DDDD:Ac,t:Ic,tt:Pc,ttt:bc,tttt:Nc,T:Lc,TT:Rc,TTT:Oc,TTTT:Bc,f:Vc,ff:Hc,fff:qc,ffff:Yc,F:Uc,FF:Gc,FFF:Wc,FFFF:zc},Te=class n{static create(e,t={}){return new n(e,t)}static parseFormat(e){let t=null,i="",r=!1,o=[];for(let s=0;s<e.length;s++){let u=e.charAt(s);u==="'"?(i.length>0&&o.push({literal:r||/^\s+$/.test(i),val:i}),t=null,i="",r=!r):r||u===t?i+=u:(i.length>0&&o.push({literal:/^\s+$/.test(i),val:i}),i=u,t=u)}return i.length>0&&o.push({literal:r||/^\s+$/.test(i),val:i}),o}static macroTokenToFormatOpts(e){return zv[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...t}).format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){return this.dtFormatter(e.start,t).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return ne(e,t);let i={...this.opts};return t>0&&(i.padTo=t),this.loc.numberFormatter(i).format(e)}formatDateTimeFromString(e,t){let i=this.loc.listingMode()==="en",r=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",o=(D,v)=>this.loc.extract(e,D,v),s=D=>e.isOffsetFixed&&e.offset===0&&D.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,D.format):"",u=()=>i?Hv(e):o({hour:"numeric",hourCycle:"h12"},"dayperiod"),f=(D,v)=>i?qv(e,D):o(v?{month:D}:{month:D,day:"numeric"},"month"),c=(D,v)=>i?Gv(e,D):o(v?{weekday:D}:{weekday:D,month:"long",day:"numeric"},"weekday"),d=D=>{let v=n.macroTokenToFormatOpts(D);return v?this.formatWithSystemDefault(e,v):D},h=D=>i?Wv(e,D):o({era:D},"era"),m=D=>{switch(D){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return s({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return s({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return s({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return u();case"d":return r?o({day:"numeric"},"day"):this.num(e.day);case"dd":return r?o({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return c("short",!0);case"cccc":return c("long",!0);case"ccccc":return c("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return c("short",!1);case"EEEE":return c("long",!1);case"EEEEE":return c("narrow",!1);case"L":return r?o({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return r?o({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return f("short",!0);case"LLLL":return f("long",!0);case"LLLLL":return f("narrow",!0);case"M":return r?o({month:"numeric"},"month"):this.num(e.month);case"MM":return r?o({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return f("short",!1);case"MMMM":return f("long",!1);case"MMMMM":return f("narrow",!1);case"y":return r?o({year:"numeric"},"year"):this.num(e.year);case"yy":return r?o({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return r?o({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return r?o({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return d(D)}};return sc(n.parseFormat(t),m)}formatDurationFromString(e,t){let i=f=>{switch(f[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=f=>c=>{let d=i(c);return d?this.num(f.get(d),c.length):c},o=n.parseFormat(t),s=o.reduce((f,{literal:c,val:d})=>c?f:f.concat(d),[]),u=e.shiftTo(...s.map(i).filter(f=>f));return sc(o,r(u))}},_e=class{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}},rf=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function tn(...n){let e=n.reduce((t,i)=>t+i.source,"");return RegExp(`^${e}$`)}function nn(...n){return e=>n.reduce(([t,i,r],o)=>{let[s,u,f]=o(e,r);return[{...t,...s},u||i,f]},[{},null,1]).slice(0,2)}function rn(n,...e){if(n==null)return[null,null];for(let[t,i]of e){let r=t.exec(n);if(r)return i(r)}return[null,null]}function of(...n){return(e,t)=>{let i={},r;for(r=0;r<n.length;r++)i[n[r]]=ft(e[t+r]);return[i,null,t+r]}}var sf=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,$v=`(?:${sf.source}?(?:\\[(${rf.source})\\])?)?`,xs=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,af=RegExp(`${xs.source}${$v}`),ks=RegExp(`(?:T${af.source})?`),Kv=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Jv=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Zv=/(\d{4})-?(\d{3})/,Qv=of("weekYear","weekNumber","weekDay"),Xv=of("year","ordinal"),jv=/(\d{4})-(\d\d)-(\d\d)/,uf=RegExp(`${xs.source} ?(?:${sf.source}|(${rf.source}))?`),e2=RegExp(`(?: ${uf.source})?`);function Xt(n,e,t){let i=n[e];return H(i)?t:ft(i)}function t2(n,e){return[{year:Xt(n,e),month:Xt(n,e+1,1),day:Xt(n,e+2,1)},null,e+3]}function on(n,e){return[{hours:Xt(n,e,0),minutes:Xt(n,e+1,0),seconds:Xt(n,e+2,0),milliseconds:_s(n[e+3])},null,e+4]}function qn(n,e){let t=!n[e]&&!n[e+1],i=wr(n[e+1],n[e+2]),r=t?null:Ne.instance(i);return[{},r,e+3]}function Wn(n,e){let t=n[e]?ht.create(n[e]):null;return[{},t,e+1]}var n2=RegExp(`^T?${xs.source}$`),i2=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function r2(n){let[e,t,i,r,o,s,u,f,c]=n,d=e[0]==="-",h=f&&f[0]==="-",m=(D,v=!1)=>D!==void 0&&(v||D&&d)?-D:D;return[{years:m(Tt(t)),months:m(Tt(i)),weeks:m(Tt(r)),days:m(Tt(o)),hours:m(Tt(s)),minutes:m(Tt(u)),seconds:m(Tt(f),f==="-0"),milliseconds:m(_s(c),h)}]}var o2={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function As(n,e,t,i,r,o,s){let u={year:e.length===2?Ds(ft(e)):ft(e),month:Zc.indexOf(t)+1,day:ft(i),hour:ft(r),minute:ft(o)};return s&&(u.second=ft(s)),n&&(u.weekday=n.length>3?Xc.indexOf(n)+1:jc.indexOf(n)+1),u}var s2=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function a2(n){let[,e,t,i,r,o,s,u,f,c,d,h]=n,m=As(e,r,i,t,o,s,u),D;return f?D=o2[f]:c?D=0:D=wr(d,h),[m,new Ne(D)]}function u2(n){return n.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var l2=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,c2=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,f2=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function ac(n){let[,e,t,i,r,o,s,u]=n;return[As(e,r,i,t,o,s,u),Ne.utcInstance]}function d2(n){let[,e,t,i,r,o,s,u]=n;return[As(e,u,t,i,r,o,s),Ne.utcInstance]}var h2=tn(Kv,ks),p2=tn(Jv,ks),m2=tn(Zv,ks),g2=tn(af),lf=nn(t2,on,qn,Wn),D2=nn(Qv,on,qn,Wn),y2=nn(Xv,on,qn,Wn),v2=nn(on,qn,Wn);function C2(n){return rn(n,[h2,lf],[p2,D2],[m2,y2],[g2,v2])}function E2(n){return rn(u2(n),[s2,a2])}function F2(n){return rn(n,[l2,ac],[c2,ac],[f2,d2])}function w2(n){return rn(n,[i2,r2])}var S2=nn(on);function T2(n){return rn(n,[n2,S2])}var _2=tn(jv,e2),M2=tn(uf),x2=nn(on,qn,Wn);function k2(n){return rn(n,[_2,lf],[M2,x2])}var uc="Invalid Duration",cf={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},A2={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...cf},Pe=146097/400,Jt=146097/4800,I2={years:{quarters:4,months:12,weeks:Pe/7,days:Pe,hours:Pe*24,minutes:Pe*24*60,seconds:Pe*24*60*60,milliseconds:Pe*24*60*60*1e3},quarters:{months:3,weeks:Pe/28,days:Pe/4,hours:Pe*24/4,minutes:Pe*24*60/4,seconds:Pe*24*60*60/4,milliseconds:Pe*24*60*60*1e3/4},months:{weeks:Jt/7,days:Jt,hours:Jt*24,minutes:Jt*24*60,seconds:Jt*24*60*60,milliseconds:Jt*24*60*60*1e3},...cf},xt=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],P2=xt.slice(0).reverse();function ct(n,e,t=!1){let i={values:t?e.values:{...n.values,...e.values||{}},loc:n.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||n.conversionAccuracy,matrix:e.matrix||n.matrix};return new L(i)}function ff(n,e){var i;let t=(i=e.milliseconds)!=null?i:0;for(let r of P2.slice(1))e[r]&&(t+=e[r]*n[r].milliseconds);return t}function lc(n,e){let t=ff(n,e)<0?-1:1;xt.reduceRight((i,r)=>{if(H(e[r]))return i;if(i){let o=e[i]*t,s=n[r][i],u=Math.floor(o/s);e[r]+=u*t,e[i]-=u*s*t}return r},null),xt.reduce((i,r)=>{if(H(e[r]))return i;if(i){let o=e[i]%1;e[i]-=o,e[r]+=o*n[i][r]}return r},null)}function b2(n){let e={};for(let[t,i]of Object.entries(n))i!==0&&(e[t]=i);return e}var L=class n{constructor(e){let t=e.conversionAccuracy==="longterm"||!1,i=t?I2:A2;e.matrix&&(i=e.matrix),this.values=e.values,this.loc=e.loc||Q.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=i,this.isLuxonDuration=!0}static fromMillis(e,t){return n.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(e==null||typeof e!="object")throw new Ce(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new n({values:gr(e,n.normalizeUnit),loc:Q.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(kt(e))return n.fromMillis(e);if(n.isDuration(e))return e;if(typeof e=="object")return n.fromObject(e);throw new Ce(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){let[i]=w2(e);return i?n.fromObject(i,t):n.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){let[i]=T2(e);return i?n.fromObject(i,t):n.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new Ce("need to specify a reason the Duration is invalid");let i=e instanceof _e?e:new _e(e,t);if(Z.throwOnInvalid)throw new us(i);return new n({invalid:i})}static normalizeUnit(e){let t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!t)throw new fr(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){let i={...t,floor:t.round!==!1&&t.floor!==!1};return this.isValid?Te.create(this.loc,i).formatDurationFromString(this,e):uc}toHuman(e={}){if(!this.isValid)return uc;let t=xt.map(i=>{let r=this.values[i];return H(r)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:i.slice(0,-1)}).format(r)}).filter(i=>i);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=Ms(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;let t=this.toMillis();return t<0||t>=864e5?null:(e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1},U.fromMillis(t,{zone:"UTC"}).toISOTime(e))}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.isValid?ff(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;let t=n.fromDurationLike(e),i={};for(let r of xt)(en(t.values,r)||en(this.values,r))&&(i[r]=t.get(r)+this.get(r));return ct(this,{values:i},!0)}minus(e){if(!this.isValid)return this;let t=n.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;let t={};for(let i of Object.keys(this.values))t[i]=Jc(e(this.values[i],i));return ct(this,{values:t},!0)}get(e){return this[n.normalizeUnit(e)]}set(e){if(!this.isValid)return this;let t={...this.values,...gr(e,n.normalizeUnit)};return ct(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:i,matrix:r}={}){let s={loc:this.loc.clone({locale:e,numberingSystem:t}),matrix:r,conversionAccuracy:i};return ct(this,s)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;let e=this.toObject();return lc(this.matrix,e),ct(this,{values:e},!0)}rescale(){if(!this.isValid)return this;let e=b2(this.normalize().shiftToAll().toObject());return ct(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(s=>n.normalizeUnit(s));let t={},i={},r=this.toObject(),o;for(let s of xt)if(e.indexOf(s)>=0){o=s;let u=0;for(let c in i)u+=this.matrix[c][s]*i[c],i[c]=0;kt(r[s])&&(u+=r[s]);let f=Math.trunc(u);t[s]=f,i[s]=(u*1e3-f*1e3)/1e3}else kt(r[s])&&(i[s]=r[s]);for(let s in i)i[s]!==0&&(t[o]+=s===o?i[s]:i[s]/this.matrix[o][s]);return lc(this.matrix,t),ct(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;let e={};for(let t of Object.keys(this.values))e[t]=this.values[t]===0?0:-this.values[t];return ct(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function t(i,r){return i===void 0||i===0?r===void 0||r===0:i===r}for(let i of xt)if(!t(this.values[i],e.values[i]))return!1;return!0}},Zt="Invalid Interval";function N2(n,e){return!n||!n.isValid?jt.invalid("missing or invalid start"):!e||!e.isValid?jt.invalid("missing or invalid end"):e<n?jt.invalid("end before start",`The end of an interval must be after its start, but you had start=${n.toISO()} and end=${e.toISO()}`):null}var jt=class n{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new Ce("need to specify a reason the Interval is invalid");let i=e instanceof _e?e:new _e(e,t);if(Z.throwOnInvalid)throw new as(i);return new n({invalid:i})}static fromDateTimes(e,t){let i=Ln(e),r=Ln(t),o=N2(i,r);return o==null?new n({start:i,end:r}):o}static after(e,t){let i=L.fromDurationLike(t),r=Ln(e);return n.fromDateTimes(r,r.plus(i))}static before(e,t){let i=L.fromDurationLike(t),r=Ln(e);return n.fromDateTimes(r.minus(i),r)}static fromISO(e,t){let[i,r]=(e||"").split("/",2);if(i&&r){let o,s;try{o=U.fromISO(i,t),s=o.isValid}catch(c){s=!1}let u,f;try{u=U.fromISO(r,t),f=u.isValid}catch(c){f=!1}if(s&&f)return n.fromDateTimes(o,u);if(s){let c=L.fromISO(r,t);if(c.isValid)return n.after(o,c)}else if(f){let c=L.fromISO(i,t);if(c.isValid)return n.before(u,c)}}return n.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;let t=this.start.startOf(e),i=this.end.startOf(e);return Math.floor(i.diff(t,e).get(e))+(i.valueOf()!==this.end.valueOf())}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:t}={}){return this.isValid?n.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];let t=e.map(Ln).filter(s=>this.contains(s)).sort(),i=[],{s:r}=this,o=0;for(;r<this.e;){let s=t[o]||this.e,u=+s>+this.e?this.e:s;i.push(n.fromDateTimes(r,u)),r=u,o+=1}return i}splitBy(e){let t=L.fromDurationLike(e);if(!this.isValid||!t.isValid||t.as("milliseconds")===0)return[];let{s:i}=this,r=1,o,s=[];for(;i<this.e;){let u=this.start.plus(t.mapUnits(f=>f*r));o=+u>+this.e?this.e:u,s.push(n.fromDateTimes(i,o)),i=o,r+=1}return s}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;let t=this.s>e.s?this.s:e.s,i=this.e<e.e?this.e:e.e;return t>=i?null:n.fromDateTimes(t,i)}union(e){if(!this.isValid)return this;let t=this.s<e.s?this.s:e.s,i=this.e>e.e?this.e:e.e;return n.fromDateTimes(t,i)}static merge(e){let[t,i]=e.sort((r,o)=>r.s-o.s).reduce(([r,o],s)=>o?o.overlaps(s)||o.abutsStart(s)?[r,o.union(s)]:[r.concat([o]),s]:[r,s],[[],null]);return i&&t.push(i),t}static xor(e){let t=null,i=0,r=[],o=e.map(f=>[{time:f.s,type:"s"},{time:f.e,type:"e"}]),s=Array.prototype.concat(...o),u=s.sort((f,c)=>f.time-c.time);for(let f of u)i+=f.type==="s"?1:-1,i===1?t=f.time:(t&&+t!=+f.time&&r.push(n.fromDateTimes(t,f.time)),t=null);return n.merge(r)}difference(...e){return n.xor([this].concat(e)).map(t=>this.intersection(t)).filter(t=>t&&!t.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:Zt}toLocaleString(e=dr,t={}){return this.isValid?Te.create(this.s.loc.clone(t),e).formatInterval(this):Zt}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Zt}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Zt}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Zt}toFormat(e,{separator:t=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:Zt}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):L.invalid(this.invalidReason)}mapEndpoints(e){return n.fromDateTimes(e(this.s),e(this.e))}},Qt=class{static hasDST(e=Z.defaultZone){let t=U.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return ht.isValidZone(e)}static normalizeZone(e){return dt(e,Z.defaultZone)}static months(e="long",{locale:t=null,numberingSystem:i=null,locObj:r=null,outputCalendar:o="gregory"}={}){return(r||Q.create(t,i,o)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:r=null,outputCalendar:o="gregory"}={}){return(r||Q.create(t,i,o)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:i=null,locObj:r=null}={}){return(r||Q.create(t,i,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:i=null,locObj:r=null}={}){return(r||Q.create(t,i,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Q.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return Q.create(t,null,"gregory").eras(e)}static features(){return{relative:$c()}}};function cc(n,e){let t=r=>r.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=t(e)-t(n);return Math.floor(L.fromMillis(i).as("days"))}function L2(n,e,t){let i=[["years",(f,c)=>c.year-f.year],["quarters",(f,c)=>c.quarter-f.quarter+(c.year-f.year)*4],["months",(f,c)=>c.month-f.month+(c.year-f.year)*12],["weeks",(f,c)=>{let d=cc(f,c);return(d-d%7)/7}],["days",cc]],r={},o=n,s,u;for(let[f,c]of i)t.indexOf(f)>=0&&(s=f,r[f]=c(n,e),u=o.plus(r),u>e?(r[f]--,n=o.plus(r),n>e&&(u=n,r[f]--,n=o.plus(r))):n=u);return[n,r,u,s]}function R2(n,e,t,i){let[r,o,s,u]=L2(n,e,t),f=e-r,c=t.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);c.length===0&&(s<e&&(s=r.plus({[u]:1})),s!==r&&(o[u]=(o[u]||0)+f/(s-r)));let d=L.fromObject(o,i);return c.length>0?L.fromMillis(f,i).shiftTo(...c).plus(d):d}var Is={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},fc={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},O2=Is.hanidec.replace(/[\[|\]]/g,"").split("");function B2(n){let e=parseInt(n,10);if(isNaN(e)){e="";for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);if(n[t].search(Is.hanidec)!==-1)e+=O2.indexOf(n[t]);else for(let r in fc){let[o,s]=fc[r];i>=o&&i<=s&&(e+=i-o)}}return parseInt(e,10)}else return e}function Be({numberingSystem:n},e=""){return new RegExp(`${Is[n||"latn"]}${e}`)}var V2="missing Intl.DateTimeFormat.formatToParts support";function W(n,e=t=>t){return{regex:n,deser:([t])=>e(B2(t))}}var U2="\xA0",df=`[ ${U2}]`,hf=new RegExp(df,"g");function H2(n){return n.replace(/\./g,"\\.?").replace(hf,df)}function dc(n){return n.replace(/\./g,"").replace(hf," ").toLowerCase()}function Ve(n,e){return n===null?null:{regex:RegExp(n.map(H2).join("|")),deser:([t])=>n.findIndex(i=>dc(t)===dc(i))+e}}function hc(n,e){return{regex:n,deser:([,t,i])=>wr(t,i),groups:e}}function or(n){return{regex:n,deser:([e])=>e}}function G2(n){return n.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function q2(n,e){let t=Be(e),i=Be(e,"{2}"),r=Be(e,"{3}"),o=Be(e,"{4}"),s=Be(e,"{6}"),u=Be(e,"{1,2}"),f=Be(e,"{1,3}"),c=Be(e,"{1,6}"),d=Be(e,"{1,9}"),h=Be(e,"{2,4}"),m=Be(e,"{4,6}"),D=x=>({regex:RegExp(G2(x.val)),deser:([k])=>k,literal:!0}),w=(x=>{if(n.literal)return D(x);switch(x.val){case"G":return Ve(e.eras("short"),0);case"GG":return Ve(e.eras("long"),0);case"y":return W(c);case"yy":return W(h,Ds);case"yyyy":return W(o);case"yyyyy":return W(m);case"yyyyyy":return W(s);case"M":return W(u);case"MM":return W(i);case"MMM":return Ve(e.months("short",!0),1);case"MMMM":return Ve(e.months("long",!0),1);case"L":return W(u);case"LL":return W(i);case"LLL":return Ve(e.months("short",!1),1);case"LLLL":return Ve(e.months("long",!1),1);case"d":return W(u);case"dd":return W(i);case"o":return W(f);case"ooo":return W(r);case"HH":return W(i);case"H":return W(u);case"hh":return W(i);case"h":return W(u);case"mm":return W(i);case"m":return W(u);case"q":return W(u);case"qq":return W(i);case"s":return W(u);case"ss":return W(i);case"S":return W(f);case"SSS":return W(r);case"u":return or(d);case"uu":return or(u);case"uuu":return W(t);case"a":return Ve(e.meridiems(),0);case"kkkk":return W(o);case"kk":return W(h,Ds);case"W":return W(u);case"WW":return W(i);case"E":case"c":return W(t);case"EEE":return Ve(e.weekdays("short",!1),1);case"EEEE":return Ve(e.weekdays("long",!1),1);case"ccc":return Ve(e.weekdays("short",!0),1);case"cccc":return Ve(e.weekdays("long",!0),1);case"Z":case"ZZ":return hc(new RegExp(`([+-]${u.source})(?::(${i.source}))?`),2);case"ZZZ":return hc(new RegExp(`([+-]${u.source})(${i.source})?`),2);case"z":return or(/[a-z_+-/]{1,256}?/i);case" ":return or(/[^\S\n\r]/);default:return D(x)}})(n)||{invalidReason:V2};return w.token=n,w}var W2={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Y2(n,e,t){let{type:i,value:r}=n;if(i==="literal"){let f=/^\s+$/.test(r);return{literal:!f,val:f?" ":r}}let o=e[i],s=i;i==="hour"&&(e.hour12!=null?s=e.hour12?"hour12":"hour24":e.hourCycle!=null?e.hourCycle==="h11"||e.hourCycle==="h12"?s="hour12":s="hour24":s=t.hour12?"hour12":"hour24");let u=W2[s];if(typeof u=="object"&&(u=u[o]),u)return{literal:!1,val:u}}function z2(n){return[`^${n.map(t=>t.regex).reduce((t,i)=>`${t}(${i.source})`,"")}$`,n]}function $2(n,e,t){let i=n.match(e);if(i){let r={},o=1;for(let s in t)if(en(t,s)){let u=t[s],f=u.groups?u.groups+1:1;!u.literal&&u.token&&(r[u.token.val[0]]=u.deser(i.slice(o,o+f))),o+=f}return[i,r]}else return[i,{}]}function K2(n){let e=o=>{switch(o){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},t=null,i;return H(n.z)||(t=ht.create(n.z)),H(n.Z)||(t||(t=new Ne(n.Z)),i=n.Z),H(n.q)||(n.M=(n.q-1)*3+1),H(n.h)||(n.h<12&&n.a===1?n.h+=12:n.h===12&&n.a===0&&(n.h=0)),n.G===0&&n.y&&(n.y=-n.y),H(n.u)||(n.S=_s(n.u)),[Object.keys(n).reduce((o,s)=>{let u=e(s);return u&&(o[u]=n[s]),o},{}),t,i]}var es=null;function J2(){return es||(es=U.fromMillis(1555555555555)),es}function Z2(n,e){if(n.literal)return n;let t=Te.macroTokenToFormatOpts(n.val),i=gf(t,e);return i==null||i.includes(void 0)?n:i}function pf(n,e){return Array.prototype.concat(...n.map(t=>Z2(t,e)))}function mf(n,e,t){let i=pf(Te.parseFormat(t),n),r=i.map(s=>q2(s,n)),o=r.find(s=>s.invalidReason);if(o)return{input:e,tokens:i,invalidReason:o.invalidReason};{let[s,u]=z2(r),f=RegExp(s,"i"),[c,d]=$2(e,f,u),[h,m,D]=d?K2(d):[null,null,void 0];if(en(d,"a")&&en(d,"H"))throw new Mt("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:i,regex:f,rawMatches:c,matches:d,result:h,zone:m,specificOffset:D}}}function Q2(n,e,t){let{result:i,zone:r,specificOffset:o,invalidReason:s}=mf(n,e,t);return[i,r,o,s]}function gf(n,e){if(!n)return null;let i=Te.create(e,n).dtFormatter(J2()),r=i.formatToParts(),o=i.resolvedOptions();return r.map(s=>Y2(s,n,o))}var Df=[0,31,59,90,120,151,181,212,243,273,304,334],yf=[0,31,60,91,121,152,182,213,244,274,305,335];function be(n,e){return new _e("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${n}, which is invalid`)}function vf(n,e,t){let i=new Date(Date.UTC(n,e-1,t));n<100&&n>=0&&i.setUTCFullYear(i.getUTCFullYear()-1900);let r=i.getUTCDay();return r===0?7:r}function Cf(n,e,t){return t+(Gn(n)?yf:Df)[e-1]}function Ef(n,e){let t=Gn(n)?yf:Df,i=t.findIndex(o=>o<e),r=e-t[i];return{month:i+1,day:r}}function ys(n){let{year:e,month:t,day:i}=n,r=Cf(e,t,i),o=vf(e,t,i),s=Math.floor((r-o+10)/7),u;return s<1?(u=e-1,s=mr(u)):s>mr(e)?(u=e+1,s=1):u=e,{weekYear:u,weekNumber:s,weekday:o,...Sr(n)}}function pc(n){let{weekYear:e,weekNumber:t,weekday:i}=n,r=vf(e,1,4),o=Bn(e),s=t*7+i-r-3,u;s<1?(u=e-1,s+=Bn(u)):s>o?(u=e+1,s-=Bn(e)):u=e;let{month:f,day:c}=Ef(u,s);return{year:u,month:f,day:c,...Sr(n)}}function ts(n){let{year:e,month:t,day:i}=n,r=Cf(e,t,i);return{year:e,ordinal:r,...Sr(n)}}function mc(n){let{year:e,ordinal:t}=n,{month:i,day:r}=Ef(e,t);return{year:e,month:i,day:r,...Sr(n)}}function X2(n){let e=Er(n.weekYear),t=nt(n.weekNumber,1,mr(n.weekYear)),i=nt(n.weekday,1,7);return e?t?i?!1:be("weekday",n.weekday):be("week",n.week):be("weekYear",n.weekYear)}function j2(n){let e=Er(n.year),t=nt(n.ordinal,1,Bn(n.year));return e?t?!1:be("ordinal",n.ordinal):be("year",n.year)}function Ff(n){let e=Er(n.year),t=nt(n.month,1,12),i=nt(n.day,1,pr(n.year,n.month));return e?t?i?!1:be("day",n.day):be("month",n.month):be("year",n.year)}function wf(n){let{hour:e,minute:t,second:i,millisecond:r}=n,o=nt(e,0,23)||e===24&&t===0&&i===0&&r===0,s=nt(t,0,59),u=nt(i,0,59),f=nt(r,0,999);return o?s?u?f?!1:be("millisecond",r):be("second",i):be("minute",t):be("hour",e)}var ns="Invalid DateTime",gc=864e13;function sr(n){return new _e("unsupported zone",`the zone "${n.name}" is not supported`)}function is(n){return n.weekData===null&&(n.weekData=ys(n.c)),n.weekData}function _t(n,e){let t={ts:n.ts,zone:n.zone,c:n.c,o:n.o,loc:n.loc,invalid:n.invalid};return new U({...t,...e,old:t})}function Sf(n,e,t){let i=n-e*60*1e3,r=t.offset(i);if(e===r)return[i,e];i-=(r-e)*60*1e3;let o=t.offset(i);return r===o?[i,r]:[n-Math.min(r,o)*60*1e3,Math.max(r,o)]}function ar(n,e){n+=e*60*1e3;let t=new Date(n);return{year:t.getUTCFullYear(),month:t.getUTCMonth()+1,day:t.getUTCDate(),hour:t.getUTCHours(),minute:t.getUTCMinutes(),second:t.getUTCSeconds(),millisecond:t.getUTCMilliseconds()}}function cr(n,e,t){return Sf(Fr(n),e,t)}function Dc(n,e){let t=n.o,i=n.c.year+Math.trunc(e.years),r=n.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,o={...n.c,year:i,month:r,day:Math.min(n.c.day,pr(i,r))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},s=L.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),u=Fr(o),[f,c]=Sf(u,t,n.zone);return s!==0&&(f+=s,c=n.zone.offset(f)),{ts:f,o:c}}function Nn(n,e,t,i,r,o){let{setZone:s,zone:u}=t;if(n&&Object.keys(n).length!==0||e){let f=e||u,c=U.fromObject(n,{...t,zone:f,specificOffset:o});return s?c:c.setZone(u)}else return U.invalid(new _e("unparsable",`the input "${r}" can't be parsed as ${i}`))}function ur(n,e,t=!0){return n.isValid?Te.create(Q.create("en-US"),{allowZ:t,forceSimple:!0}).formatDateTimeFromString(n,e):null}function rs(n,e){let t=n.c.year>9999||n.c.year<0,i="";return t&&n.c.year>=0&&(i+="+"),i+=ne(n.c.year,t?6:4),e?(i+="-",i+=ne(n.c.month),i+="-",i+=ne(n.c.day)):(i+=ne(n.c.month),i+=ne(n.c.day)),i}function yc(n,e,t,i,r,o){let s=ne(n.c.hour);return e?(s+=":",s+=ne(n.c.minute),(n.c.millisecond!==0||n.c.second!==0||!t)&&(s+=":")):s+=ne(n.c.minute),(n.c.millisecond!==0||n.c.second!==0||!t)&&(s+=ne(n.c.second),(n.c.millisecond!==0||!i)&&(s+=".",s+=ne(n.c.millisecond,3))),r&&(n.isOffsetFixed&&n.offset===0&&!o?s+="Z":n.o<0?(s+="-",s+=ne(Math.trunc(-n.o/60)),s+=":",s+=ne(Math.trunc(-n.o%60))):(s+="+",s+=ne(Math.trunc(n.o/60)),s+=":",s+=ne(Math.trunc(n.o%60)))),o&&(s+="["+n.zone.ianaName+"]"),s}var Tf={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},eC={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},tC={ordinal:1,hour:0,minute:0,second:0,millisecond:0},_f=["year","month","day","hour","minute","second","millisecond"],nC=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],iC=["year","ordinal","hour","minute","second","millisecond"];function vc(n){let e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[n.toLowerCase()];if(!e)throw new fr(n);return e}function Cc(n,e){let t=dt(e.zone,Z.defaultZone),i=Q.fromObject(e),r=Z.now(),o,s;if(H(n.year))o=r;else{for(let c of _f)H(n[c])&&(n[c]=Tf[c]);let u=Ff(n)||wf(n);if(u)return U.invalid(u);let f=t.offset(r);[o,s]=cr(n,f,t)}return new U({ts:o,zone:t,loc:i,o:s})}function Ec(n,e,t){let i=H(t.round)?!0:t.round,r=(s,u)=>(s=Ms(s,i||t.calendary?0:2,!0),e.loc.clone(t).relFormatter(t).format(s,u)),o=s=>t.calendary?e.hasSame(n,s)?0:e.startOf(s).diff(n.startOf(s),s).get(s):e.diff(n,s).get(s);if(t.unit)return r(o(t.unit),t.unit);for(let s of t.units){let u=o(s);if(Math.abs(u)>=1)return r(u,s)}return r(n>e?-0:0,t.units[t.units.length-1])}function Fc(n){let e={},t;return n.length>0&&typeof n[n.length-1]=="object"?(e=n[n.length-1],t=Array.from(n).slice(0,n.length-1)):t=Array.from(n),[e,t]}var U=class n{constructor(e){let t=e.zone||Z.defaultZone,i=e.invalid||(Number.isNaN(e.ts)?new _e("invalid input"):null)||(t.isValid?null:sr(t));this.ts=H(e.ts)?Z.now():e.ts;let r=null,o=null;if(!i)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(t))[r,o]=[e.old.c,e.old.o];else{let u=t.offset(this.ts);r=ar(this.ts,u),i=Number.isNaN(r.year)?new _e("invalid input"):null,r=i?null:r,o=i?null:u}this._zone=t,this.loc=e.loc||Q.create(),this.invalid=i,this.weekData=null,this.c=r,this.o=o,this.isLuxonDateTime=!0}static now(){return new n({})}static local(){let[e,t]=Fc(arguments),[i,r,o,s,u,f,c]=t;return Cc({year:i,month:r,day:o,hour:s,minute:u,second:f,millisecond:c},e)}static utc(){let[e,t]=Fc(arguments),[i,r,o,s,u,f,c]=t;return e.zone=Ne.utcInstance,Cc({year:i,month:r,day:o,hour:s,minute:u,second:f,millisecond:c},e)}static fromJSDate(e,t={}){let i=Iv(e)?e.valueOf():NaN;if(Number.isNaN(i))return n.invalid("invalid input");let r=dt(t.zone,Z.defaultZone);return r.isValid?new n({ts:i,zone:r,loc:Q.fromObject(t)}):n.invalid(sr(r))}static fromMillis(e,t={}){if(kt(e))return e<-gc||e>gc?n.invalid("Timestamp out of range"):new n({ts:e,zone:dt(t.zone,Z.defaultZone),loc:Q.fromObject(t)});throw new Ce(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(kt(e))return new n({ts:e*1e3,zone:dt(t.zone,Z.defaultZone),loc:Q.fromObject(t)});throw new Ce("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};let i=dt(t.zone,Z.defaultZone);if(!i.isValid)return n.invalid(sr(i));let r=Z.now(),o=H(t.specificOffset)?i.offset(r):t.specificOffset,s=gr(e,vc),u=!H(s.ordinal),f=!H(s.year),c=!H(s.month)||!H(s.day),d=f||c,h=s.weekYear||s.weekNumber,m=Q.fromObject(t);if((d||u)&&h)throw new Mt("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(c&&u)throw new Mt("Can't mix ordinal dates with month/day");let D=h||s.weekday&&!d,v,w,x=ar(r,o);D?(v=nC,w=eC,x=ys(x)):u?(v=iC,w=tC,x=ts(x)):(v=_f,w=Tf);let k=!1;for(let N of v){let q=s[N];H(q)?k?s[N]=w[N]:s[N]=x[N]:k=!0}let b=D?X2(s):u?j2(s):Ff(s),R=b||wf(s);if(R)return n.invalid(R);let E=D?pc(s):u?mc(s):s,[I,O]=cr(E,o,i),S=new n({ts:I,zone:i,o:O,loc:m});return s.weekday&&d&&e.weekday!==S.weekday?n.invalid("mismatched weekday",`you can't specify both a weekday of ${s.weekday} and a date of ${S.toISO()}`):S}static fromISO(e,t={}){let[i,r]=C2(e);return Nn(i,r,t,"ISO 8601",e)}static fromRFC2822(e,t={}){let[i,r]=E2(e);return Nn(i,r,t,"RFC 2822",e)}static fromHTTP(e,t={}){let[i,r]=F2(e);return Nn(i,r,t,"HTTP",t)}static fromFormat(e,t,i={}){if(H(e)||H(t))throw new Ce("fromFormat requires an input string and a format");let{locale:r=null,numberingSystem:o=null}=i,s=Q.fromOpts({locale:r,numberingSystem:o,defaultToEN:!0}),[u,f,c,d]=Q2(s,e,t);return d?n.invalid(d):Nn(u,f,i,`format ${t}`,e,c)}static fromString(e,t,i={}){return n.fromFormat(e,t,i)}static fromSQL(e,t={}){let[i,r]=k2(e);return Nn(i,r,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new Ce("need to specify a reason the DateTime is invalid");let i=e instanceof _e?e:new _e(e,t);if(Z.throwOnInvalid)throw new ss(i);return new n({invalid:i})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){let i=gf(e,Q.fromObject(t));return i?i.map(r=>r?r.val:null).join(""):null}static expandFormat(e,t={}){return pf(Te.parseFormat(e),Q.fromObject(t)).map(r=>r.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?is(this).weekYear:NaN}get weekNumber(){return this.isValid?is(this).weekNumber:NaN}get weekday(){return this.isValid?is(this).weekday:NaN}get ordinal(){return this.isValid?ts(this.c).ordinal:NaN}get monthShort(){return this.isValid?Qt.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Qt.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Qt.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Qt.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];let e=864e5,t=6e4,i=Fr(this.c),r=this.zone.offset(i-e),o=this.zone.offset(i+e),s=this.zone.offset(i-r*t),u=this.zone.offset(i-o*t);if(s===u)return[this];let f=i-s*t,c=i-u*t,d=ar(f,s),h=ar(c,u);return d.hour===h.hour&&d.minute===h.minute&&d.second===h.second&&d.millisecond===h.millisecond?[_t(this,{ts:f}),_t(this,{ts:c})]:[this]}get isInLeapYear(){return Gn(this.year)}get daysInMonth(){return pr(this.year,this.month)}get daysInYear(){return this.isValid?Bn(this.year):NaN}get weeksInWeekYear(){return this.isValid?mr(this.weekYear):NaN}resolvedLocaleOptions(e={}){let{locale:t,numberingSystem:i,calendar:r}=Te.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:i,outputCalendar:r}}toUTC(e=0,t={}){return this.setZone(Ne.instance(e),t)}toLocal(){return this.setZone(Z.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:i=!1}={}){if(e=dt(e,Z.defaultZone),e.equals(this.zone))return this;if(e.isValid){let r=this.ts;if(t||i){let o=e.offset(this.ts),s=this.toObject();[r]=cr(s,o,e)}return _t(this,{ts:r,zone:e})}else return n.invalid(sr(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:i}={}){let r=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:i});return _t(this,{loc:r})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;let t=gr(e,vc),i=!H(t.weekYear)||!H(t.weekNumber)||!H(t.weekday),r=!H(t.ordinal),o=!H(t.year),s=!H(t.month)||!H(t.day),u=o||s,f=t.weekYear||t.weekNumber;if((u||r)&&f)throw new Mt("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(s&&r)throw new Mt("Can't mix ordinal dates with month/day");let c;i?c=pc({...ys(this.c),...t}):H(t.ordinal)?(c={...this.toObject(),...t},H(t.day)&&(c.day=Math.min(pr(c.year,c.month),c.day))):c=mc({...ts(this.c),...t});let[d,h]=cr(c,this.o,this.zone);return _t(this,{ts:d,o:h})}plus(e){if(!this.isValid)return this;let t=L.fromDurationLike(e);return _t(this,Dc(this,t))}minus(e){if(!this.isValid)return this;let t=L.fromDurationLike(e).negate();return _t(this,Dc(this,t))}startOf(e){if(!this.isValid)return this;let t={},i=L.normalizeUnit(e);switch(i){case"years":t.month=1;case"quarters":case"months":t.day=1;case"weeks":case"days":t.hour=0;case"hours":t.minute=0;case"minutes":t.second=0;case"seconds":t.millisecond=0;break}if(i==="weeks"&&(t.weekday=1),i==="quarters"){let r=Math.ceil(this.month/3);t.month=(r-1)*3+1}return this.set(t)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,t={}){return this.isValid?Te.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):ns}toLocaleString(e=dr,t={}){return this.isValid?Te.create(this.loc.clone(t),e).formatDateTime(this):ns}toLocaleParts(e={}){return this.isValid?Te.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:i=!1,includeOffset:r=!0,extendedZone:o=!1}={}){if(!this.isValid)return null;let s=e==="extended",u=rs(this,s);return u+="T",u+=yc(this,s,t,i,r,o),u}toISODate({format:e="extended"}={}){return this.isValid?rs(this,e==="extended"):null}toISOWeekDate(){return ur(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:i=!0,includePrefix:r=!1,extendedZone:o=!1,format:s="extended"}={}){return this.isValid?(r?"T":"")+yc(this,s==="extended",t,e,i,o):null}toRFC2822(){return ur(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return ur(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?rs(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:i=!0}={}){let r="HH:mm:ss.SSS";return(t||e)&&(i&&(r+=" "),t?r+="z":e&&(r+="ZZ")),ur(this,r,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():ns}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};let t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",i={}){if(!this.isValid||!e.isValid)return L.invalid("created by diffing an invalid DateTime");let r={locale:this.locale,numberingSystem:this.numberingSystem,...i},o=Pv(t).map(L.normalizeUnit),s=e.valueOf()>this.valueOf(),u=s?this:e,f=s?e:this,c=R2(u,f,o,r);return s?c.negate():c}diffNow(e="milliseconds",t={}){return this.diff(n.now(),e,t)}until(e){return this.isValid?jt.fromDateTimes(this,e):this}hasSame(e,t){if(!this.isValid)return!1;let i=e.valueOf(),r=this.setZone(e.zone,{keepLocalTime:!0});return r.startOf(t)<=i&&i<=r.endOf(t)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;let t=e.base||n.fromObject({},{zone:this.zone}),i=e.padding?this<t?-e.padding:e.padding:0,r=["years","months","days","hours","minutes","seconds"],o=e.unit;return Array.isArray(e.unit)&&(r=e.unit,o=void 0),Ec(t,this.plus(i),{...e,numeric:"always",units:r,unit:o})}toRelativeCalendar(e={}){return this.isValid?Ec(e.base||n.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(n.isDateTime))throw new Ce("min requires all arguments be DateTimes");return oc(e,t=>t.valueOf(),Math.min)}static max(...e){if(!e.every(n.isDateTime))throw new Ce("max requires all arguments be DateTimes");return oc(e,t=>t.valueOf(),Math.max)}static fromFormatExplain(e,t,i={}){let{locale:r=null,numberingSystem:o=null}=i,s=Q.fromOpts({locale:r,numberingSystem:o,defaultToEN:!0});return mf(s,e,t)}static fromStringExplain(e,t,i={}){return n.fromFormatExplain(e,t,i)}static get DATE_SHORT(){return dr}static get DATE_MED(){return xc}static get DATE_MED_WITH_WEEKDAY(){return mv}static get DATE_FULL(){return kc}static get DATE_HUGE(){return Ac}static get TIME_SIMPLE(){return Ic}static get TIME_WITH_SECONDS(){return Pc}static get TIME_WITH_SHORT_OFFSET(){return bc}static get TIME_WITH_LONG_OFFSET(){return Nc}static get TIME_24_SIMPLE(){return Lc}static get TIME_24_WITH_SECONDS(){return Rc}static get TIME_24_WITH_SHORT_OFFSET(){return Oc}static get TIME_24_WITH_LONG_OFFSET(){return Bc}static get DATETIME_SHORT(){return Vc}static get DATETIME_SHORT_WITH_SECONDS(){return Uc}static get DATETIME_MED(){return Hc}static get DATETIME_MED_WITH_SECONDS(){return Gc}static get DATETIME_MED_WITH_WEEKDAY(){return gv}static get DATETIME_FULL(){return qc}static get DATETIME_FULL_WITH_SECONDS(){return Wc}static get DATETIME_HUGE(){return Yc}static get DATETIME_HUGE_WITH_SECONDS(){return zc}};function Ln(n){if(U.isDateTime(n))return n;if(n&&n.valueOf&&kt(n.valueOf()))return U.fromJSDate(n);if(n&&typeof n=="object")return U.fromObject(n);throw new Ce(`Unknown datetime argument: ${n}, of type ${typeof n}`)}var Ps={renderNullAs:"\\-",taskCompletionTracking:!1,taskCompletionUseEmojiShorthand:!1,taskCompletionText:"completion",taskCompletionDateFormat:"yyyy-MM-dd",recursiveSubTaskCompletion:!1,warnOnEmptyResult:!0,refreshEnabled:!0,refreshInterval:2500,defaultDateFormat:"MMMM dd, yyyy",defaultDateTimeFormat:"h:mm a - MMMM dd, yyyy",maxRecursiveRenderDepth:4,tableIdColumnName:"File",tableGroupColumnName:"Group",showResultCount:!0},rC={allowHtml:!0};({...Ps,...rC});var vs=class n{constructor(e){he(this,"value");he(this,"successful");this.value=e,this.successful=!0}map(e){return new n(e(this.value))}flatMap(e){return e(this.value)}mapErr(e){return this}bimap(e,t){return this.map(e)}orElse(e){return this.value}cast(){return this}orElseThrow(e){return this.value}},Cs=class n{constructor(e){he(this,"error");he(this,"successful");this.error=e,this.successful=!1}map(e){return this}flatMap(e){return this}mapErr(e){return new n(e(this.error))}bimap(e,t){return this.mapErr(t)}orElse(e){return e}cast(){return this}orElseThrow(e){throw e?new Error(e(this.error)):new Error(""+this.error)}},Dr;(function(n){function e(o){return new vs(o)}n.success=e;function t(o){return new Cs(o)}n.failure=t;function i(o,s,u){return o.successful?s.successful?u(o.value,s.value):t(s.error):t(o.error)}n.flatMap2=i;function r(o,s,u){return i(o,s,(f,c)=>e(u(f,c)))}n.map2=r})(Dr||(Dr={}));var oC=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},yr={exports:{}};yr.exports;(function(n,e){(function(t,i){n.exports=i()})(typeof self!="undefined"?self:oC,function(){return function(t){var i={};function r(o){if(i[o])return i[o].exports;var s=i[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}return r.m=t,r.c=i,r.d=function(o,s,u){r.o(o,s)||Object.defineProperty(o,s,{configurable:!1,enumerable:!0,get:u})},r.r=function(o){Object.defineProperty(o,"__esModule",{value:!0})},r.n=function(o){var s=o&&o.__esModule?function(){return o.default}:function(){return o};return r.d(s,"a",s),s},r.o=function(o,s){return Object.prototype.hasOwnProperty.call(o,s)},r.p="",r(r.s=0)}([function(t,i,r){function o(p){if(!(this instanceof o))return new o(p);this._=p}var s=o.prototype;function u(p,y){for(var C=0;C<p;C++)y(C)}function f(p,y,C){return function(F,T){u(T.length,function(_){F(T[_],_,T)})}(function(F,T,_){y=p(y,F,T,_)},C),y}function c(p,y){return f(function(C,F,T,_){return C.concat([p(F,T,_)])},[],y)}function d(p,y){var C={v:0,buf:y};return u(p,function(){var F;C={v:C.v<<1|(F=C.buf,F[0]>>7),buf:function(T){var _=f(function(M,B,z,de){return M.concat(z===de.length-1?Buffer.from([B,0]).readUInt16BE(0):de.readUInt16BE(z))},[],T);return Buffer.from(c(function(M){return(M<<1&65535)>>8},_))}(C.buf)}}),C}function h(){return typeof Buffer!="undefined"}function m(){if(!h())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function D(p){m();var y=f(function(_,M){return _+M},0,p);if(y%8!=0)throw new Error("The bits ["+p.join(", ")+"] add up to "+y+" which is not an even number of bytes; the total should be divisible by 8");var C,F=y/8,T=(C=function(_){return _>48},f(function(_,M){return _||(C(M)?M:_)},null,p));if(T)throw new Error(T+" bit range requested exceeds 48 bit (6 byte) Number max.");return new o(function(_,M){var B=F+M;return B>_.length?N(M,F.toString()+" bytes"):S(B,f(function(z,de){var ae=d(de,z.buf);return{coll:z.coll.concat(ae.v),buf:ae.buf}},{coll:[],buf:_.slice(M,B)},p).coll)})}function v(p,y){return new o(function(C,F){return m(),F+y>C.length?N(F,y+" bytes for "+p):S(F+y,C.slice(F,F+y))})}function w(p,y){if(typeof(C=y)!="number"||Math.floor(C)!==C||y<0||y>6)throw new Error(p+" requires integer length in range [0, 6].");var C}function x(p){return w("uintBE",p),v("uintBE("+p+")",p).map(function(y){return y.readUIntBE(0,p)})}function k(p){return w("uintLE",p),v("uintLE("+p+")",p).map(function(y){return y.readUIntLE(0,p)})}function b(p){return w("intBE",p),v("intBE("+p+")",p).map(function(y){return y.readIntBE(0,p)})}function R(p){return w("intLE",p),v("intLE("+p+")",p).map(function(y){return y.readIntLE(0,p)})}function E(p){return p instanceof o}function I(p){return{}.toString.call(p)==="[object Array]"}function O(p){return h()&&Buffer.isBuffer(p)}function S(p,y){return{status:!0,index:p,value:y,furthest:-1,expected:[]}}function N(p,y){return I(y)||(y=[y]),{status:!1,index:-1,value:null,furthest:p,expected:y}}function q(p,y){if(!y||p.furthest>y.furthest)return p;var C=p.furthest===y.furthest?function(F,T){if(function(){if(o._supportsSet!==void 0)return o._supportsSet;var Ze=typeof Set!="undefined";return o._supportsSet=Ze,Ze}()&&Array.from){for(var _=new Set(F),M=0;M<T.length;M++)_.add(T[M]);var B=Array.from(_);return B.sort(),B}for(var z={},de=0;de<F.length;de++)z[F[de]]=!0;for(var ae=0;ae<T.length;ae++)z[T[ae]]=!0;var Je=[];for(var Fe in z)({}).hasOwnProperty.call(z,Fe)&&Je.push(Fe);return Je.sort(),Je}(p.expected,y.expected):y.expected;return{status:p.status,index:p.index,value:p.value,furthest:y.furthest,expected:C}}var X={};function se(p,y){if(O(p))return{offset:y,line:-1,column:-1};p in X||(X[p]={});for(var C=X[p],F=0,T=0,_=0,M=y;M>=0;){if(M in C){F=C[M].line,_===0&&(_=C[M].lineStart);break}(p.charAt(M)===`
`||p.charAt(M)==="\r"&&p.charAt(M+1)!==`
`)&&(T++,_===0&&(_=M+1)),M--}var B=F+T,z=y-_;return C[y]={line:B,lineStart:_},{offset:y,line:B+1,column:z+1}}function Y(p){if(!E(p))throw new Error("not a parser: "+p)}function Ee(p,y){return typeof p=="string"?p.charAt(y):p[y]}function re(p){if(typeof p!="number")throw new Error("not a number: "+p)}function De(p){if(typeof p!="function")throw new Error("not a function: "+p)}function ee(p){if(typeof p!="string")throw new Error("not a string: "+p)}var ln=2,Yn=3,Re=8,cn=5*Re,zn=4*Re,fn="  ";function ye(p,y){return new Array(y+1).join(p)}function Ge(p,y,C){var F=y-p.length;return F<=0?p:ye(C,F)+p}function Us(p,y,C,F){return{from:p-y>0?p-y:0,to:p+C>F?F:p+C}}function Vf(p,y){var C,F,T,_,M,B=y.index,z=B.offset,de=1;if(z===p.length)return"Got the end of the input";if(O(p)){var ae=z-z%Re,Je=z-ae,Fe=Us(ae,cn,zn+Re,p.length),Ze=c(function(ie){return c(function(bt){return Ge(bt.toString(16),2,"0")},ie)},function(ie,bt){var Nt=ie.length,gt=[],Lt=0;if(Nt<=bt)return[ie.slice()];for(var Rt=0;Rt<Nt;Rt++)gt[Lt]||gt.push([]),gt[Lt].push(ie[Rt]),(Rt+1)%bt==0&&Lt++;return gt}(p.slice(Fe.from,Fe.to).toJSON().data,Re));_=function(ie){return ie.from===0&&ie.to===1?{from:ie.from,to:ie.to}:{from:ie.from/Re,to:Math.floor(ie.to/Re)}}(Fe),F=ae/Re,C=3*Je,Je>=4&&(C+=1),de=2,T=c(function(ie){return ie.length<=4?ie.join(" "):ie.slice(0,4).join(" ")+"  "+ie.slice(4).join(" ")},Ze),(M=(8*(_.to>0?_.to-1:_.to)).toString(16).length)<2&&(M=2)}else{var Pt=p.split(/\r\n|[\n\r\u2028\u2029]/);C=B.column-1,F=B.line-1,_=Us(F,ln,Yn,Pt.length),T=Pt.slice(_.from,_.to),M=_.to.toString().length}var Jf=F-_.from;return O(p)&&(M=(8*(_.to>0?_.to-1:_.to)).toString(16).length)<2&&(M=2),f(function(ie,bt,Nt){var gt,Lt=Nt===Jf,Rt=Lt?"> ":fn;return gt=O(p)?Ge((8*(_.from+Nt)).toString(16),M,"0"):Ge((_.from+Nt+1).toString(),M," "),[].concat(ie,[Rt+gt+" | "+bt],Lt?[fn+ye(" ",M)+" | "+Ge("",C," ")+ye("^",de)]:[])},[],T).join(`
`)}function Hs(p,y){return[`
`,"-- PARSING FAILED "+ye("-",50),`

`,Vf(p,y),`

`,(C=y.expected,C.length===1?`Expected:

`+C[0]:`Expected one of the following: 

`+C.join(", ")),`
`].join("");var C}function Gs(p){return p.flags!==void 0?p.flags:[p.global?"g":"",p.ignoreCase?"i":"",p.multiline?"m":"",p.unicode?"u":"",p.sticky?"y":""].join("")}function $n(){for(var p=[].slice.call(arguments),y=p.length,C=0;C<y;C+=1)Y(p[C]);return o(function(F,T){for(var _,M=new Array(y),B=0;B<y;B+=1){if(!(_=q(p[B]._(F,T),_)).status)return _;M[B]=_.value,T=_.index}return q(S(T,M),_)})}function pt(){var p=[].slice.call(arguments);if(p.length===0)throw new Error("seqMap needs at least one argument");var y=p.pop();return De(y),$n.apply(null,p).map(function(C){return y.apply(null,C)})}function Kn(){var p=[].slice.call(arguments),y=p.length;if(y===0)return Jn("zero alternates");for(var C=0;C<y;C+=1)Y(p[C]);return o(function(F,T){for(var _,M=0;M<p.length;M+=1)if((_=q(p[M]._(F,T),_)).status)return _;return _})}function qs(p,y){return br(p,y).or(mt([]))}function br(p,y){return Y(p),Y(y),pt(p,y.then(p).many(),function(C,F){return[C].concat(F)})}function dn(p){ee(p);var y="'"+p+"'";return o(function(C,F){var T=F+p.length,_=C.slice(F,T);return _===p?S(T,_):N(F,y)})}function Ke(p,y){(function(T){if(!(T instanceof RegExp))throw new Error("not a regexp: "+T);for(var _=Gs(T),M=0;M<_.length;M++){var B=_.charAt(M);if(B!=="i"&&B!=="m"&&B!=="u"&&B!=="s")throw new Error('unsupported regexp flag "'+B+'": '+T)}})(p),arguments.length>=2?re(y):y=0;var C=function(T){return RegExp("^(?:"+T.source+")",Gs(T))}(p),F=""+p;return o(function(T,_){var M=C.exec(T.slice(_));if(M){if(0<=y&&y<=M.length){var B=M[0],z=M[y];return S(_+B.length,z)}return N(_,"valid match group (0 to "+M.length+") in "+F)}return N(_,F)})}function mt(p){return o(function(y,C){return S(C,p)})}function Jn(p){return o(function(y,C){return N(C,p)})}function Zn(p){if(E(p))return o(function(y,C){var F=p._(y,C);return F.index=C,F.value="",F});if(typeof p=="string")return Zn(dn(p));if(p instanceof RegExp)return Zn(Ke(p));throw new Error("not a string, regexp, or parser: "+p)}function Ws(p){return Y(p),o(function(y,C){var F=p._(y,C),T=y.slice(C,F.index);return F.status?N(C,'not "'+T+'"'):S(C,null)})}function Qn(p){return De(p),o(function(y,C){var F=Ee(y,C);return C<y.length&&p(F)?S(C+1,F):N(C,"a character/byte matching "+p)})}function Ys(p,y){arguments.length<2&&(y=p,p=void 0);var C=o(function(F,T){return C._=y()._,C._(F,T)});return p?C.desc(p):C}function Nr(){return Jn("fantasy-land/empty")}s.parse=function(p){if(typeof p!="string"&&!O(p))throw new Error(".parse must be called with a string or Buffer as its argument");var y,C=this.skip(Lr)._(p,0);return y=C.status?{status:!0,value:C.value}:{status:!1,index:se(p,C.furthest),expected:C.expected},delete X[p],y},s.tryParse=function(p){var y=this.parse(p);if(y.status)return y.value;var C=Hs(p,y),F=new Error(C);throw F.type="ParsimmonError",F.result=y,F},s.assert=function(p,y){return this.chain(function(C){return p(C)?mt(C):Jn(y)})},s.or=function(p){return Kn(this,p)},s.trim=function(p){return this.wrap(p,p)},s.wrap=function(p,y){return pt(p,this,y,function(C,F){return F})},s.thru=function(p){return p(this)},s.then=function(p){return Y(p),$n(this,p).map(function(y){return y[1]})},s.many=function(){var p=this;return o(function(y,C){for(var F=[],T=void 0;;){if(!(T=q(p._(y,C),T)).status)return q(S(C,F),T);if(C===T.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");C=T.index,F.push(T.value)}})},s.tieWith=function(p){return ee(p),this.map(function(y){if(function(T){if(!I(T))throw new Error("not an array: "+T)}(y),y.length){ee(y[0]);for(var C=y[0],F=1;F<y.length;F++)ee(y[F]),C+=p+y[F];return C}return""})},s.tie=function(){return this.tieWith("")},s.times=function(p,y){var C=this;return arguments.length<2&&(y=p),re(p),re(y),o(function(F,T){for(var _=[],M=void 0,B=void 0,z=0;z<p;z+=1){if(B=q(M=C._(F,T),B),!M.status)return B;T=M.index,_.push(M.value)}for(;z<y&&(B=q(M=C._(F,T),B),M.status);z+=1)T=M.index,_.push(M.value);return q(S(T,_),B)})},s.result=function(p){return this.map(function(){return p})},s.atMost=function(p){return this.times(0,p)},s.atLeast=function(p){return pt(this.times(p),this.many(),function(y,C){return y.concat(C)})},s.map=function(p){De(p);var y=this;return o(function(C,F){var T=y._(C,F);return T.status?q(S(T.index,p(T.value)),T):T})},s.contramap=function(p){De(p);var y=this;return o(function(C,F){var T=y.parse(p(C.slice(F)));return T.status?S(F+C.length,T.value):T})},s.promap=function(p,y){return De(p),De(y),this.contramap(p).map(y)},s.skip=function(p){return $n(this,p).map(function(y){return y[0]})},s.mark=function(){return pt(hn,this,hn,function(p,y,C){return{start:p,value:y,end:C}})},s.node=function(p){return pt(hn,this,hn,function(y,C,F){return{name:p,value:C,start:y,end:F}})},s.sepBy=function(p){return qs(this,p)},s.sepBy1=function(p){return br(this,p)},s.lookahead=function(p){return this.skip(Zn(p))},s.notFollowedBy=function(p){return this.skip(Ws(p))},s.desc=function(p){I(p)||(p=[p]);var y=this;return o(function(C,F){var T=y._(C,F);return T.status||(T.expected=p),T})},s.fallback=function(p){return this.or(mt(p))},s.ap=function(p){return pt(p,this,function(y,C){return y(C)})},s.chain=function(p){var y=this;return o(function(C,F){var T=y._(C,F);return T.status?q(p(T.value)._(C,T.index),T):T})},s.concat=s.or,s.empty=Nr,s.of=mt,s["fantasy-land/ap"]=s.ap,s["fantasy-land/chain"]=s.chain,s["fantasy-land/concat"]=s.concat,s["fantasy-land/empty"]=s.empty,s["fantasy-land/of"]=s.of,s["fantasy-land/map"]=s.map;var hn=o(function(p,y){return S(y,se(p,y))}),Uf=o(function(p,y){return y>=p.length?N(y,"any character/byte"):S(y+1,Ee(p,y))}),Hf=o(function(p,y){return S(p.length,p.slice(y))}),Lr=o(function(p,y){return y<p.length?N(y,"EOF"):S(y,null)}),Gf=Ke(/[0-9]/).desc("a digit"),qf=Ke(/[0-9]*/).desc("optional digits"),Wf=Ke(/[a-z]/i).desc("a letter"),Yf=Ke(/[a-z]*/i).desc("optional letters"),zf=Ke(/\s*/).desc("optional whitespace"),$f=Ke(/\s+/).desc("whitespace"),zs=dn("\r"),$s=dn(`
`),Ks=dn(`\r
`),Js=Kn(Ks,$s,zs).desc("newline"),Kf=Kn(Js,Lr);o.all=Hf,o.alt=Kn,o.any=Uf,o.cr=zs,o.createLanguage=function(p){var y={};for(var C in p)({}).hasOwnProperty.call(p,C)&&function(F){y[F]=Ys(function(){return p[F](y)})}(C);return y},o.crlf=Ks,o.custom=function(p){return o(p(S,N))},o.digit=Gf,o.digits=qf,o.empty=Nr,o.end=Kf,o.eof=Lr,o.fail=Jn,o.formatError=Hs,o.index=hn,o.isParser=E,o.lazy=Ys,o.letter=Wf,o.letters=Yf,o.lf=$s,o.lookahead=Zn,o.makeFailure=N,o.makeSuccess=S,o.newline=Js,o.noneOf=function(p){return Qn(function(y){return p.indexOf(y)<0}).desc("none of '"+p+"'")},o.notFollowedBy=Ws,o.of=mt,o.oneOf=function(p){for(var y=p.split(""),C=0;C<y.length;C++)y[C]="'"+y[C]+"'";return Qn(function(F){return p.indexOf(F)>=0}).desc(y)},o.optWhitespace=zf,o.Parser=o,o.range=function(p,y){return Qn(function(C){return p<=C&&C<=y}).desc(p+"-"+y)},o.regex=Ke,o.regexp=Ke,o.sepBy=qs,o.sepBy1=br,o.seq=$n,o.seqMap=pt,o.seqObj=function(){for(var p,y={},C=0,F=(p=arguments,Array.prototype.slice.call(p)),T=F.length,_=0;_<T;_+=1){var M=F[_];if(!E(M)){if(I(M)&&M.length===2&&typeof M[0]=="string"&&E(M[1])){var B=M[0];if(Object.prototype.hasOwnProperty.call(y,B))throw new Error("seqObj: duplicate key "+B);y[B]=!0,C++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(C===0)throw new Error("seqObj expects at least one named parser, found zero");return o(function(z,de){for(var ae,Je={},Fe=0;Fe<T;Fe+=1){var Ze,Pt;if(I(F[Fe])?(Ze=F[Fe][0],Pt=F[Fe][1]):(Ze=null,Pt=F[Fe]),!(ae=q(Pt._(z,de),ae)).status)return ae;Ze&&(Je[Ze]=ae.value),de=ae.index}return q(S(de,Je),ae)})},o.string=dn,o.succeed=mt,o.takeWhile=function(p){return De(p),o(function(y,C){for(var F=C;F<y.length&&p(Ee(y,F));)F++;return S(F,y.slice(C,F))})},o.test=Qn,o.whitespace=$f,o["fantasy-land/empty"]=Nr,o["fantasy-land/of"]=mt,o.Binary={bitSeq:D,bitSeqObj:function(p){m();var y={},C=0,F=c(function(_){if(I(_)){var M=_;if(M.length!==2)throw new Error("["+M.join(", ")+"] should be length 2, got length "+M.length);if(ee(M[0]),re(M[1]),Object.prototype.hasOwnProperty.call(y,M[0]))throw new Error("duplicate key in bitSeqObj: "+M[0]);return y[M[0]]=!0,C++,M}return re(_),[null,_]},p);if(C<1)throw new Error("bitSeqObj expects at least one named pair, got ["+p.join(", ")+"]");var T=c(function(_){return _[0]},F);return D(c(function(_){return _[1]},F)).map(function(_){return f(function(M,B){return B[0]!==null&&(M[B[0]]=B[1]),M},{},c(function(M,B){return[M,_[B]]},T))})},byte:function(p){if(m(),re(p),p>255)throw new Error("Value specified to byte constructor ("+p+"=0x"+p.toString(16)+") is larger in value than a single byte.");var y=(p>15?"0x":"0x0")+p.toString(16);return o(function(C,F){var T=Ee(C,F);return T===p?S(F+1,T):N(F,y)})},buffer:function(p){return v("buffer",p).map(function(y){return Buffer.from(y)})},encodedString:function(p,y){return v("string",y).map(function(C){return C.toString(p)})},uintBE:x,uint8BE:x(1),uint16BE:x(2),uint32BE:x(4),uintLE:k,uint8LE:k(1),uint16LE:k(2),uint32LE:k(4),intBE:b,int8BE:b(1),int16BE:b(2),int32BE:b(4),intLE:R,int8LE:R(1),int16LE:R(2),int32LE:R(4),floatBE:v("floatBE",4).map(function(p){return p.readFloatBE(0)}),floatLE:v("floatLE",4).map(function(p){return p.readFloatLE(0)}),doubleBE:v("doubleBE",8).map(function(p){return p.readDoubleBE(0)}),doubleLE:v("doubleLE",8).map(function(p){return p.readDoubleLE(0)})},t.exports=o}])})})(yr,yr.exports);var g=yr.exports,bs=()=>/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC3\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC08\uDC26](?:\u200D\u2B1B)?|[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC2\uDECE-\uDEDB\uDEE0-\uDEE8]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g;function Mf(n){return n==null?n:n.shiftToAll().normalize()}function wc(n){return n.includes("/")&&(n=n.substring(n.lastIndexOf("/")+1)),n.endsWith(".md")&&(n=n.substring(0,n.length-3)),n}g.alt(g.regex(new RegExp(bs(),"")),g.regex(/[0-9\p{Letter}_-]+/u).map(n=>n.toLocaleLowerCase()),g.whitespace.map(n=>"-"),g.any.map(n=>"")).many().map(n=>n.join(""));var sC=g.alt(g.regex(new RegExp(bs(),"")),g.regex(/[0-9\p{Letter}_-]+/u),g.whitespace.map(n=>" "),g.any.map(n=>" ")).many().map(n=>n.join("").split(/\s+/).join(" ").trim());function aC(n){return sC.tryParse(n)}function uC(n){return n=Mf(n),n=L.fromObject(Object.fromEntries(Object.entries(n.toObject()).filter(([,e])=>e!=0))),n.toHuman()}var Un;(function(n){function e(E,I=Ps,O=!1){let S=t(E);if(!S)return I.renderNullAs;switch(S.type){case"null":return I.renderNullAs;case"string":return S.value;case"number":case"boolean":return""+S.value;case"html":return S.value.outerHTML;case"widget":return S.value.markdown();case"link":return S.value.markdown();case"function":return"<function>";case"array":let N="";return O&&(N+="["),N+=S.value.map(q=>e(q,I,!0)).join(", "),O&&(N+="]"),N;case"object":return"{ "+Object.entries(S.value).map(q=>q[0]+": "+e(q[1],I,!0)).join(", ")+" }";case"date":return S.value.second==0&&S.value.hour==0&&S.value.minute==0?S.value.toFormat(I.defaultDateFormat):S.value.toFormat(I.defaultDateTimeFormat);case"duration":return uC(S.value)}}n.toString=e;function t(E){return m(E)?{type:"null",value:E}:c(E)?{type:"number",value:E}:f(E)?{type:"string",value:E}:v(E)?{type:"boolean",value:E}:h(E)?{type:"duration",value:E}:d(E)?{type:"date",value:E}:x(E)?{type:"widget",value:E}:D(E)?{type:"array",value:E}:w(E)?{type:"link",value:E}:R(E)?{type:"function",value:E}:k(E)?{type:"html",value:E}:b(E)?{type:"object",value:E}:void 0}n.wrapValue=t;function i(E,I){if(b(E)){let O={};for(let[S,N]of Object.entries(E))O[S]=i(N,I);return O}else if(D(E)){let O=[];for(let S of E)O.push(i(S,I));return O}else return I(E)}n.mapLeaves=i;function r(E,I,O){var q,X;if(E===void 0&&(E=null),I===void 0&&(I=null),E===null&&I===null)return 0;if(E===null)return-1;if(I===null)return 1;let S=t(E),N=t(I);if(S===void 0&&N===void 0)return 0;if(S===void 0)return-1;if(N===void 0)return 1;if(S.type!=N.type)return S.type.localeCompare(N.type);if(S.value===N.value)return 0;switch(S.type){case"string":return S.value.localeCompare(N.value);case"number":return S.value<N.value?-1:S.value==N.value?0:1;case"null":return 0;case"boolean":return S.value==N.value?0:S.value?1:-1;case"link":let se=S.value,Y=N.value,Ee=O!=null?O:ye=>ye,re=Ee(se.path).localeCompare(Ee(Y.path));if(re!=0)return re;let De=se.type.localeCompare(Y.type);return De!=0?De:se.subpath&&!Y.subpath?1:!se.subpath&&Y.subpath?-1:!se.subpath&&!Y.subpath?0:((q=se.subpath)!=null?q:"").localeCompare((X=Y.subpath)!=null?X:"");case"date":return S.value<N.value?-1:S.value.equals(N.value)?0:1;case"duration":return S.value<N.value?-1:S.value.equals(N.value)?0:1;case"array":let ee=S.value,ln=N.value;for(let ye=0;ye<Math.min(ee.length,ln.length);ye++){let Ge=r(ee[ye],ln[ye]);if(Ge!=0)return Ge}return ee.length-ln.length;case"object":let Yn=S.value,Re=N.value,cn=Array.from(Object.keys(Yn)),zn=Array.from(Object.keys(Re));cn.sort(),zn.sort();let fn=r(cn,zn);if(fn!=0)return fn;for(let ye of cn){let Ge=r(Yn[ye],Re[ye]);if(Ge!=0)return Ge}return 0;case"widget":case"html":case"function":return 0}}n.compareValue=r;function o(E){var I;return(I=t(E))==null?void 0:I.type}n.typeOf=o;function s(E){let I=t(E);if(!I)return!1;switch(I.type){case"number":return I.value!=0;case"string":return I.value.length>0;case"boolean":return I.value;case"link":return!!I.value.path;case"date":return I.value.toMillis()!=0;case"duration":return I.value.as("seconds")!=0;case"object":return Object.keys(I.value).length>0;case"array":return I.value.length>0;case"null":return!1;case"html":case"widget":case"function":return!0}}n.isTruthy=s;function u(E){if(E==null)return E;if(n.isArray(E))return[].concat(E.map(I=>u(I)));if(n.isObject(E)){let I={};for(let[O,S]of Object.entries(E))I[O]=u(S);return I}else return E}n.deepCopy=u;function f(E){return typeof E=="string"}n.isString=f;function c(E){return typeof E=="number"}n.isNumber=c;function d(E){return E instanceof U}n.isDate=d;function h(E){return E instanceof L}n.isDuration=h;function m(E){return E==null}n.isNull=m;function D(E){return Array.isArray(E)}n.isArray=D;function v(E){return typeof E=="boolean"}n.isBoolean=v;function w(E){return E instanceof vr}n.isLink=w;function x(E){return E instanceof Hn}n.isWidget=x;function k(E){return typeof HTMLElement!="undefined"?E instanceof HTMLElement:!1}n.isHtml=k;function b(E){return typeof E=="object"&&!k(E)&&!x(E)&&!D(E)&&!h(E)&&!d(E)&&!w(E)&&E!==void 0&&!m(E)}n.isObject=b;function R(E){return typeof E=="function"}n.isFunction=R})(Un||(Un={}));var Sc;(function(n){function e(r){return Un.isObject(r)&&Object.keys(r).length==2&&"key"in r&&"rows"in r}n.isElementGroup=e;function t(r){for(let o of r)if(!e(o))return!1;return!0}n.isGrouping=t;function i(r){if(t(r)){let o=0;for(let s of r)o+=i(s.rows);return o}else return r.length}n.count=i})(Sc||(Sc={}));var vr=class n{constructor(e){he(this,"path");he(this,"display");he(this,"subpath");he(this,"embed");he(this,"type");Object.assign(this,e)}static file(e,t=!1,i){return new n({path:e,embed:t,display:i,subpath:void 0,type:"file"})}static infer(e,t=!1,i){if(e.includes("#^")){let r=e.split("#^");return n.block(r[0],r[1],t,i)}else if(e.includes("#")){let r=e.split("#");return n.header(r[0],r[1],t,i)}else return n.file(e,t,i)}static header(e,t,i,r){return new n({path:e,embed:i,display:r,subpath:aC(t),type:"header"})}static block(e,t,i,r){return new n({path:e,embed:i,display:r,subpath:t,type:"block"})}static fromObject(e){return new n(e)}equals(e){return e==null||e==null?!1:this.path==e.path&&this.type==e.type&&this.subpath==e.subpath}toString(){return this.markdown()}toObject(){return{path:this.path,type:this.type,subpath:this.subpath,display:this.display,embed:this.embed}}withPath(e){return new n(Object.assign({},this,{path:e}))}withDisplay(e){return new n(Object.assign({},this,{display:e}))}withHeader(e){return n.header(this.path,e,this.embed,this.display)}toFile(){return n.file(this.path,this.embed,this.display)}toEmbed(){if(this.embed)return this;{let e=new n(this);return e.embed=!0,e}}fromEmbed(){if(this.embed){let e=new n(this);return e.embed=!1,e}else return this}markdown(){let e=(this.embed?"!":"")+"[["+this.obsidianLink();return this.display?e+="|"+this.display:(e+="|"+wc(this.path),(this.type=="header"||this.type=="block")&&(e+=" > "+this.subpath)),e+="]]",e}obsidianLink(){var t,i;let e=this.path.replaceAll("|","\\|");return this.type=="header"?e+"#"+((t=this.subpath)==null?void 0:t.replaceAll("|","\\|")):this.type=="block"?e+"#^"+((i=this.subpath)==null?void 0:i.replaceAll("|","\\|")):e}fileName(){return wc(this.path).replace(".md","")}},Hn=class{constructor(e){he(this,"$widget");this.$widget=e}},Es=class extends Hn{constructor(t,i){super("dataview:list-pair");he(this,"key");he(this,"value");this.key=t,this.value=i}markdown(){return`${Un.toString(this.key)}: ${Un.toString(this.value)}`}},Fs=class extends Hn{constructor(t,i){super("dataview:external-link");he(this,"url");he(this,"display");this.url=t,this.display=i}markdown(){var t;return`[${(t=this.display)!=null?t:this.url}](${this.url})`}},Tc;(function(n){function e(s,u){return new Es(s,u)}n.listPair=e;function t(s,u){return new Fs(s,u)}n.externalLink=t;function i(s){return s.$widget==="dataview:list-pair"}n.isListPair=i;function r(s){return s.$widget==="dataview:external-link"}n.isExternalLink=r;function o(s){return i(s)||r(s)}n.isBuiltin=o})(Tc||(Tc={}));var J;(function(n){function e(m){return{type:"variable",name:m}}n.variable=e;function t(m){return{type:"literal",value:m}}n.literal=t;function i(m,D,v){return{type:"binaryop",left:m,op:D,right:v}}n.binaryOp=i;function r(m,D){return{type:"index",object:m,index:D}}n.index=r;function o(m){let D=m.split("."),v=n.variable(D[0]);for(let w=1;w<D.length;w++)v=n.index(v,n.literal(D[w]));return v}n.indexVariable=o;function s(m,D){return{type:"lambda",arguments:m,value:D}}n.lambda=s;function u(m,D){return{type:"function",func:m,arguments:D}}n.func=u;function f(m){return{type:"list",values:m}}n.list=f;function c(m){return{type:"object",values:m}}n.object=c;function d(m){return{type:"negated",child:m}}n.negate=d;function h(m){return m=="<="||m=="<"||m==">"||m==">="||m=="!="||m=="="}n.isCompareOp=h,n.NULL=n.literal(null)})(J||(J={}));var ze;(function(n){function e(d){return{type:"tag",tag:d}}n.tag=e;function t(d){return{type:"csv",path:d}}n.csv=t;function i(d){return{type:"folder",folder:d}}n.folder=i;function r(d,h){return{type:"link",file:d,direction:h?"incoming":"outgoing"}}n.link=r;function o(d,h,m){return{type:"binaryop",left:d,op:h,right:m}}n.binaryOp=o;function s(d,h){return{type:"binaryop",left:d,op:"&",right:h}}n.and=s;function u(d,h){return{type:"binaryop",left:d,op:"|",right:h}}n.or=u;function f(d){return{type:"negate",child:d}}n.negate=f;function c(){return{type:"empty"}}n.empty=c})(ze||(ze={}));var _c=new RegExp(bs(),""),ws={year:L.fromObject({years:1}),years:L.fromObject({years:1}),yr:L.fromObject({years:1}),yrs:L.fromObject({years:1}),month:L.fromObject({months:1}),months:L.fromObject({months:1}),mo:L.fromObject({months:1}),mos:L.fromObject({months:1}),week:L.fromObject({weeks:1}),weeks:L.fromObject({weeks:1}),wk:L.fromObject({weeks:1}),wks:L.fromObject({weeks:1}),w:L.fromObject({weeks:1}),day:L.fromObject({days:1}),days:L.fromObject({days:1}),d:L.fromObject({days:1}),hour:L.fromObject({hours:1}),hours:L.fromObject({hours:1}),hr:L.fromObject({hours:1}),hrs:L.fromObject({hours:1}),h:L.fromObject({hours:1}),minute:L.fromObject({minutes:1}),minutes:L.fromObject({minutes:1}),min:L.fromObject({minutes:1}),mins:L.fromObject({minutes:1}),m:L.fromObject({minutes:1}),second:L.fromObject({seconds:1}),seconds:L.fromObject({seconds:1}),sec:L.fromObject({seconds:1}),secs:L.fromObject({seconds:1}),s:L.fromObject({seconds:1})},Ss={now:()=>U.local(),today:()=>U.local().startOf("day"),yesterday:()=>U.local().startOf("day").minus(L.fromObject({days:1})),tomorrow:()=>U.local().startOf("day").plus(L.fromObject({days:1})),sow:()=>U.local().startOf("week"),"start-of-week":()=>U.local().startOf("week"),eow:()=>U.local().endOf("week"),"end-of-week":()=>U.local().endOf("week"),soy:()=>U.local().startOf("year"),"start-of-year":()=>U.local().startOf("year"),eoy:()=>U.local().endOf("year"),"end-of-year":()=>U.local().endOf("year"),som:()=>U.local().startOf("month"),"start-of-month":()=>U.local().startOf("month"),eom:()=>U.local().endOf("month"),"end-of-month":()=>U.local().endOf("month")},Ts=["FROM","WHERE","LIMIT","GROUP","FLATTEN"];function lC(n){let e=-1;for(;(e=n.indexOf("|",e+1))>=0;)if(!(e>0&&n[e-1]=="\\"))return[n.substring(0,e).replace(/\\\|/g,"|"),n.substring(e+1)];return[n.replace(/\\\|/g,"|"),void 0]}function cC(n){let[e,t]=lC(n);return vr.infer(e,!1,t)}function Rn(n,e,t){return g.seqMap(n,g.seq(g.optWhitespace,e,g.optWhitespace,n).many(),(i,r)=>{if(r.length==0)return i;let o=t(i,r[0][1],r[0][3]);for(let s=1;s<r.length;s++)o=t(o,r[s][1],r[s][3]);return o})}function fC(n,...e){return g.custom((t,i)=>(r,o)=>{let s=n._(r,o);if(!s.status)return s;for(let u of e){let f=u(s.value)._(r,s.index);if(!f.status)return s;s=f}return s})}var Ue=g.createLanguage({number:n=>g.regexp(/-?[0-9]+(\.[0-9]+)?/).map(e=>Number.parseFloat(e)).desc("number"),string:n=>g.string('"').then(g.alt(n.escapeCharacter,g.noneOf('"\\')).atLeast(0).map(e=>e.join(""))).skip(g.string('"')).desc("string"),escapeCharacter:n=>g.string("\\").then(g.any).map(e=>e==='"'?'"':e==="\\"?"\\":"\\"+e),bool:n=>g.regexp(/true|false|True|False/).map(e=>e.toLowerCase()=="true").desc("boolean ('true' or 'false')"),tag:n=>g.seqMap(g.string("#"),g.alt(g.regexp(/[^\u2000-\u206F\u2E00-\u2E7F'!"#$%&()*+,.:;<=>?@^`{|}~\[\]\\\s]/).desc("text")).many(),(e,t)=>e+t.join("")).desc("tag ('#hello/stuff')"),identifier:n=>g.seqMap(g.alt(g.regexp(/\p{Letter}/u),g.regexp(_c).desc("text")),g.alt(g.regexp(/[0-9\p{Letter}_-]/u),g.regexp(_c).desc("text")).many(),(e,t)=>e+t.join("")).desc("variable identifier"),link:n=>g.regexp(/\[\[([^\[\]]*?)\]\]/u,1).map(e=>cC(e)).desc("file link"),embedLink:n=>g.seqMap(g.string("!").atMost(1),n.link,(e,t)=>(e.length>0&&(t.embed=!0),t)).desc("file link"),binaryPlusMinus:n=>g.regexp(/\+|-/).map(e=>e).desc("'+' or '-'"),binaryMulDiv:n=>g.regexp(/\*|\/|%/).map(e=>e).desc("'*' or '/' or '%'"),binaryCompareOp:n=>g.regexp(/>=|<=|!=|>|<|=/).map(e=>e).desc("'>=' or '<=' or '!=' or '=' or '>' or '<'"),binaryBooleanOp:n=>g.regexp(/and|or|&|\|/i).map(e=>e.toLowerCase()=="and"?"&":e.toLowerCase()=="or"?"|":e).desc("'and' or 'or'"),rootDate:n=>g.seqMap(g.regexp(/\d{4}/),g.string("-"),g.regexp(/\d{2}/),(e,t,i)=>U.fromObject({year:Number.parseInt(e),month:Number.parseInt(i)})).desc("date in format YYYY-MM[-DDTHH-MM-SS.MS]"),dateShorthand:n=>g.alt(...Object.keys(Ss).sort((e,t)=>t.length-e.length).map(g.string)),date:n=>fC(n.rootDate,e=>g.seqMap(g.string("-"),g.regexp(/\d{2}/),(t,i)=>e.set({day:Number.parseInt(i)})),e=>g.seqMap(g.string("T"),g.regexp(/\d{2}/),(t,i)=>e.set({hour:Number.parseInt(i)})),e=>g.seqMap(g.string(":"),g.regexp(/\d{2}/),(t,i)=>e.set({minute:Number.parseInt(i)})),e=>g.seqMap(g.string(":"),g.regexp(/\d{2}/),(t,i)=>e.set({second:Number.parseInt(i)})),e=>g.alt(g.seqMap(g.string("."),g.regexp(/\d{3}/),(t,i)=>e.set({millisecond:Number.parseInt(i)})),g.succeed(e)),e=>g.alt(g.seqMap(g.string("+").or(g.string("-")),g.regexp(/\d{1,2}(:\d{2})?/),(t,i)=>e.setZone("UTC"+t+i,{keepLocalTime:!0})),g.seqMap(g.string("Z"),()=>e.setZone("utc",{keepLocalTime:!0})),g.seqMap(g.string("["),g.regexp(/[0-9A-Za-z+-\/]+/u),g.string("]"),(t,i,r)=>e.setZone(i,{keepLocalTime:!0})))).assert(e=>e.isValid,"valid date").desc("date in format YYYY-MM[-DDTHH-MM-SS.MS]"),datePlus:n=>g.alt(n.dateShorthand.map(e=>Ss[e]()),n.date).desc("date in format YYYY-MM[-DDTHH-MM-SS.MS] or in shorthand"),durationType:n=>g.alt(...Object.keys(ws).sort((e,t)=>t.length-e.length).map(g.string)),duration:n=>g.seqMap(n.number,g.optWhitespace,n.durationType,(e,t,i)=>ws[i].mapUnits(r=>r*e)).sepBy1(g.string(",").trim(g.optWhitespace).or(g.optWhitespace)).map(e=>e.reduce((t,i)=>t.plus(i))).desc("duration like 4hr2min"),rawNull:n=>g.string("null"),tagSource:n=>n.tag.map(e=>ze.tag(e)),csvSource:n=>g.seqMap(g.string("csv(").skip(g.optWhitespace),n.string,g.string(")"),(e,t,i)=>ze.csv(t)),linkIncomingSource:n=>n.link.map(e=>ze.link(e.path,!0)),linkOutgoingSource:n=>g.seqMap(g.string("outgoing(").skip(g.optWhitespace),n.link,g.string(")"),(e,t,i)=>ze.link(t.path,!1)),folderSource:n=>n.string.map(e=>ze.folder(e)),parensSource:n=>g.seqMap(g.string("("),g.optWhitespace,n.source,g.optWhitespace,g.string(")"),(e,t,i,r,o)=>i),negateSource:n=>g.seqMap(g.alt(g.string("-"),g.string("!")),n.atomSource,(e,t)=>ze.negate(t)),atomSource:n=>g.alt(n.parensSource,n.negateSource,n.linkOutgoingSource,n.linkIncomingSource,n.folderSource,n.tagSource,n.csvSource),binaryOpSource:n=>Rn(n.atomSource,n.binaryBooleanOp.map(e=>e),ze.binaryOp),source:n=>n.binaryOpSource,variableField:n=>n.identifier.chain(e=>Ts.includes(e.toUpperCase())?g.fail("Variable fields cannot be a keyword ("+Ts.join(" or ")+")"):g.succeed(J.variable(e))).desc("variable"),numberField:n=>n.number.map(e=>J.literal(e)).desc("number"),stringField:n=>n.string.map(e=>J.literal(e)).desc("string"),boolField:n=>n.bool.map(e=>J.literal(e)).desc("boolean"),dateField:n=>g.seqMap(g.string("date("),g.optWhitespace,n.datePlus,g.optWhitespace,g.string(")"),(e,t,i,r,o)=>J.literal(i)).desc("date"),durationField:n=>g.seqMap(g.string("dur("),g.optWhitespace,n.duration,g.optWhitespace,g.string(")"),(e,t,i,r,o)=>J.literal(i)).desc("duration"),nullField:n=>n.rawNull.map(e=>J.NULL),linkField:n=>n.link.map(e=>J.literal(e)),listField:n=>n.field.sepBy(g.string(",").trim(g.optWhitespace)).wrap(g.string("[").skip(g.optWhitespace),g.optWhitespace.then(g.string("]"))).map(e=>J.list(e)).desc("list ('[1, 2, 3]')"),objectField:n=>g.seqMap(n.identifier.or(n.string),g.string(":").trim(g.optWhitespace),n.field,(e,t,i)=>({name:e,value:i})).sepBy(g.string(",").trim(g.optWhitespace)).wrap(g.string("{").skip(g.optWhitespace),g.optWhitespace.then(g.string("}"))).map(e=>{let t={};for(let i of e)t[i.name]=i.value;return J.object(t)}).desc("object ('{ a: 1, b: 2 }')"),atomInlineField:n=>g.alt(n.date,n.duration.map(e=>Mf(e)),n.string,n.tag,n.embedLink,n.bool,n.number,n.rawNull),inlineFieldList:n=>n.atomInlineField.sepBy(g.string(",").trim(g.optWhitespace).lookahead(n.atomInlineField)),inlineField:n=>g.alt(g.seqMap(n.atomInlineField,g.string(",").trim(g.optWhitespace),n.inlineFieldList,(e,t,i)=>[e].concat(i)),n.atomInlineField),atomField:n=>g.alt(n.embedLink.map(e=>J.literal(e)),n.negatedField,n.linkField,n.listField,n.objectField,n.lambdaField,n.parensField,n.boolField,n.numberField,n.stringField,n.dateField,n.durationField,n.nullField,n.variableField),indexField:n=>g.seqMap(n.atomField,g.alt(n.dotPostfix,n.indexPostfix,n.functionPostfix).many(),(e,t)=>{let i=e;for(let r of t)switch(r.type){case"dot":i=J.index(i,J.literal(r.field));break;case"index":i=J.index(i,r.field);break;case"function":i=J.func(i,r.fields);break}return i}),negatedField:n=>g.seqMap(g.string("!"),n.indexField,(e,t)=>J.negate(t)).desc("negated field"),parensField:n=>g.seqMap(g.string("("),g.optWhitespace,n.field,g.optWhitespace,g.string(")"),(e,t,i,r,o)=>i),lambdaField:n=>g.seqMap(n.identifier.sepBy(g.string(",").trim(g.optWhitespace)).wrap(g.string("(").trim(g.optWhitespace),g.string(")").trim(g.optWhitespace)),g.string("=>").trim(g.optWhitespace),n.field,(e,t,i)=>({type:"lambda",arguments:e,value:i})),dotPostfix:n=>g.seqMap(g.string("."),n.identifier,(e,t)=>({type:"dot",field:t})),indexPostfix:n=>g.seqMap(g.string("["),g.optWhitespace,n.field,g.optWhitespace,g.string("]"),(e,t,i,r,o)=>({type:"index",field:i})),functionPostfix:n=>g.seqMap(g.string("("),g.optWhitespace,n.field.sepBy(g.string(",").trim(g.optWhitespace)),g.optWhitespace,g.string(")"),(e,t,i,r,o)=>({type:"function",fields:i})),binaryMulDivField:n=>Rn(n.indexField,n.binaryMulDiv,J.binaryOp),binaryPlusMinusField:n=>Rn(n.binaryMulDivField,n.binaryPlusMinus,J.binaryOp),binaryCompareField:n=>Rn(n.binaryPlusMinusField,n.binaryCompareOp,J.binaryOp),binaryBooleanField:n=>Rn(n.binaryCompareField,n.binaryBooleanOp,J.binaryOp),binaryOpField:n=>n.binaryBooleanField,field:n=>n.binaryOpField});function dC(n){try{return Dr.success(Ue.field.tryParse(n))}catch(e){return Dr.failure(""+e)}}var Cr;(function(n){function e(i,r){return{name:i,field:r}}n.named=e;function t(i,r){return{field:i,direction:r}}n.sortBy=t})(Cr||(Cr={}));function hC(n){return g.custom((e,t)=>(i,r)=>{let o=n._(i,r);return o.status?Object.assign({},o,{value:[o.value,i.substring(r,o.index)]}):o})}function pC(n){return n.split(/[\r\n]+/).map(e=>e.trim()).join("")}function Mc(n,e){return g.eof.map(n).or(g.whitespace.then(e))}var xf=g.createLanguage({queryType:n=>g.alt(g.regexp(/TABLE|LIST|TASK|CALENDAR/i)).map(e=>e.toLowerCase()).desc("query type ('TABLE', 'LIST', 'TASK', or 'CALENDAR')"),explicitNamedField:n=>g.seqMap(Ue.field.skip(g.whitespace),g.regexp(/AS/i).skip(g.whitespace),Ue.identifier.or(Ue.string),(e,t,i)=>Cr.named(i,e)),comment:()=>g.Parser((n,e)=>{let t=n.substring(e);if(!t.startsWith("//"))return g.makeFailure(e,"Not a comment");t=t.split(`
`)[0];let i=t.substring(2).trim();return g.makeSuccess(e+t.length,i)}),namedField:n=>g.alt(n.explicitNamedField,hC(Ue.field).map(([e,t])=>Cr.named(pC(t),e))),sortField:n=>g.seqMap(Ue.field.skip(g.optWhitespace),g.regexp(/ASCENDING|DESCENDING|ASC|DESC/i).atMost(1),(e,t)=>{let i=t.length==0?"ascending":t[0].toLowerCase();return i=="desc"&&(i="descending"),i=="asc"&&(i="ascending"),{field:e,direction:i}}),headerClause:n=>n.queryType.chain(e=>{switch(e){case"table":return Mc(()=>({type:e,fields:[],showId:!0}),g.seqMap(g.regexp(/WITHOUT\s+ID/i).skip(g.optWhitespace).atMost(1),g.sepBy(n.namedField,g.string(",").trim(g.optWhitespace)),(t,i)=>({type:e,fields:i,showId:t.length==0})));case"list":return Mc(()=>({type:e,format:void 0,showId:!0}),g.seqMap(g.regexp(/WITHOUT\s+ID/i).skip(g.optWhitespace).atMost(1),Ue.field.atMost(1),(t,i)=>({type:e,format:i.length==1?i[0]:void 0,showId:t.length==0})));case"task":return g.succeed({type:e});case"calendar":return g.whitespace.then(g.seqMap(n.namedField,t=>({type:e,showId:!0,field:t})));default:return g.fail(`Unrecognized query type '${e}'`)}}).desc("TABLE or LIST or TASK or CALENDAR"),fromClause:n=>g.seqMap(g.regexp(/FROM/i),g.whitespace,Ue.source,(e,t,i)=>i),whereClause:n=>g.seqMap(g.regexp(/WHERE/i),g.whitespace,Ue.field,(e,t,i)=>({type:"where",clause:i})).desc("WHERE <expression>"),sortByClause:n=>g.seqMap(g.regexp(/SORT/i),g.whitespace,n.sortField.sepBy1(g.string(",").trim(g.optWhitespace)),(e,t,i)=>({type:"sort",fields:i})).desc("SORT field [ASC/DESC]"),limitClause:n=>g.seqMap(g.regexp(/LIMIT/i),g.whitespace,Ue.field,(e,t,i)=>({type:"limit",amount:i})).desc("LIMIT <value>"),flattenClause:n=>g.seqMap(g.regexp(/FLATTEN/i).skip(g.whitespace),n.namedField,(e,t)=>({type:"flatten",field:t})).desc("FLATTEN <value> [AS <name>]"),groupByClause:n=>g.seqMap(g.regexp(/GROUP BY/i).skip(g.whitespace),n.namedField,(e,t)=>({type:"group",field:t})).desc("GROUP BY <value> [AS <name>]"),clause:n=>g.alt(n.fromClause,n.whereClause,n.sortByClause,n.limitClause,n.groupByClause,n.flattenClause),query:n=>g.seqMap(n.headerClause.trim(os),n.fromClause.trim(os).atMost(1),n.clause.trim(os).many(),(e,t,i)=>({header:e,source:t.length==0?ze.folder(""):t[0],operations:i,settings:Ps}))}),os=g.alt(g.whitespace,xf.comment).many().map(n=>n.join("")),mC=n=>{var e;return n?(e=n.plugins.plugins.dataview)==null?void 0:e.api:window.DataviewAPI},gC=n=>n.plugins.enabledPlugins.has("dataview");$e.DATE_SHORTHANDS=Ss;$e.DURATION_TYPES=ws;$e.EXPRESSION=Ue;$e.KEYWORDS=Ts;$e.QUERY_LANGUAGE=xf;$e.getAPI=mC;$e.isPluginEnabled=gC;$e.parseField=dC});var SC={};nd(SC,{default:()=>Pr});module.exports=id(SC);var Of=require("obsidian");var le=require("obsidian");var Xs=require("obsidian");var Qe=[{value:"gemini-2.5-pro-preview-05-06",label:"Gemini 2.5 Pro",defaultForRoles:["chat"]},{value:"gemini-2.5-flash-preview-04-17",label:"Gemini 2.5 Flash",defaultForRoles:["summary"]},{value:"gemini-2.0-flash-lite",label:"Gemini 2.0 Flash Lite",defaultForRoles:["completions"]}];function Dt(n){let e=Qe.find(t=>{var i;return(i=t.defaultForRoles)==null?void 0:i.includes(n)});if(e)return e.value;if(Qe.length>0)return console.warn(`No default model specified for role '${n}'. Falling back to the first model in GEMINI_MODELS: ${Qe[0].label}`),Qe[0].value;throw console.error("CRITICAL: GEMINI_MODELS is empty. Cannot determine a fallback model."),new Error("CRITICAL: GEMINI_MODELS array is empty. Please configure available models.")}function Qs(n){let e=new Set(Qe.map(o=>o.value)),t=!1,i=[],r={...n};if(!e.has(r.chatModelName)){let o=Dt("chat");o&&(i.push(`Chat model: '${r.chatModelName}' -> '${o}'`),r.chatModelName=o,t=!0)}if(!e.has(r.summaryModelName)){let o=Dt("summary");o&&(i.push(`Summary model: '${r.summaryModelName}' -> '${o}'`),r.summaryModelName=o,t=!0)}if(!e.has(r.completionsModelName)){let o=Dt("completions");o&&(i.push(`Completions model: '${r.completionsModelName}' -> '${o}'`),r.completionsModelName=o,t=!0)}return{updatedSettings:r,settingsChanged:t,changedSettingsInfo:i}}function Xn(n,e,t,i,r){let o=new Xs.Setting(n).setName(i).setDesc(r).addDropdown(s=>(Qe.forEach(u=>{s.addOption(u.value,u.label)}),s.setValue(String(e.settings[t])).onChange(async u=>{e.settings[t]=u,await e.saveSettings()}),s))}var ei=require("obsidian"),jn=class extends ei.AbstractInputSuggest{constructor(e,t,i){super(e,t),this.inputEl=t,this.folderSelectCallback=i}getSuggestions(e){return this.app.vault.getAllLoadedFiles().filter(i=>i instanceof ei.TFolder).filter(i=>i.path.toLowerCase().contains(e.toLowerCase()))}renderSuggestion(e,t){t.setText(e.path)}selectSuggestion(e,t){this.inputEl.value=e.path,this.inputEl.trigger("input"),this.close(),this.folderSelectCallback(e.path)}};var rd,od;function sd(){return{geminiUrl:rd,vertexUrl:od}}function ad(n,e,t){var i,r,o;if(!(!((i=n.httpOptions)===null||i===void 0)&&i.baseUrl)){let s=sd();return n.vertexai?(r=s.vertexUrl)!==null&&r!==void 0?r:e:(o=s.geminiUrl)!==null&&o!==void 0?o:t}return n.httpOptions.baseUrl}var Bt=class{};function G(n,e){let t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){let o=e[r];return o!=null?String(o):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function a(n,e,t){for(let o=0;o<e.length-1;o++){let s=e[o];if(s.endsWith("[]")){let u=s.slice(0,-2);if(!(u in n))if(Array.isArray(t))n[u]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(n[u])){let f=n[u];if(Array.isArray(t))for(let c=0;c<f.length;c++){let d=f[c];a(d,e.slice(o+1),t[c])}else for(let c of f)a(c,e.slice(o+1),t)}return}else if(s.endsWith("[0]")){let u=s.slice(0,-3);u in n||(n[u]=[{}]);let f=n[u];a(f[0],e.slice(o+1),t);return}(!n[s]||typeof n[s]!="object")&&(n[s]={}),n=n[s]}let i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else n[i]=t}function l(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;let i=e[t];if(i.endsWith("[]")){let r=i.slice(0,-2);if(r in n){let o=n[r];return Array.isArray(o)?o.map(s=>l(s,e.slice(t+1))):void 0}else return}else n=n[i]}return n}catch(t){if(t instanceof TypeError)return;throw t}}function oe(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Ya(n,e){let t=oe(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function za(n,e){return Array.isArray(e)?e.map(t=>oi(n,t)):[oi(n,e)]}function oi(n,e){if(typeof e=="object"&&e!==null)return e;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof e}`)}function ud(n,e){let t=oi(n,e);if(t.mimeType&&t.mimeType.startsWith("image/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function ld(n,e){let t=oi(n,e);if(t.mimeType&&t.mimeType.startsWith("audio/"))return t;throw new Error(`Unsupported mime type: ${t.mimeType}`)}function js(n,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function $a(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>js(n,t)):[js(n,e)]}function Or(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function ea(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function ta(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function ve(n,e){if(e==null)throw new Error("ContentUnion is required");return Or(e)?e:{role:"user",parts:$a(n,e)}}function Ka(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{let i=ve(n,t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){let t=ve(n,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>ve(n,t)):[ve(n,e)]}function K(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(ea(e)||ta(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ve(n,e)]}let t=[],i=[],r=Or(e[0]);for(let o of e){let s=Or(o);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)t.push(o);else{if(ea(o)||ta(o))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(o)}}return r||t.push({role:"user",parts:$a(n,i)}),t}function Ja(n,e){return e}function Za(n,e){if(typeof e=="object")return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function Di(n,e){return e}function xe(n,e){if(!Array.isArray(e))throw new Error("tool is required and must be an array of Tools");return e}function cd(n,e,t,i=1){let r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function ot(n,e){if(typeof e!="string")throw new Error("name must be a string");return cd(n,e,"cachedContents")}function st(n,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function Qa(n,e){if(typeof e!="string")throw new Error("fromName must be a string");return e.startsWith("files/")?e.split("files/")[1]:e}function fd(n,e){let t={};if(l(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");let i=l(e,["thought"]);i!=null&&a(t,["thought"],i);let r=l(e,["codeExecutionResult"]);r!=null&&a(t,["codeExecutionResult"],r);let o=l(e,["executableCode"]);o!=null&&a(t,["executableCode"],o);let s=l(e,["fileData"]);s!=null&&a(t,["fileData"],s);let u=l(e,["functionCall"]);u!=null&&a(t,["functionCall"],u);let f=l(e,["functionResponse"]);f!=null&&a(t,["functionResponse"],f);let c=l(e,["inlineData"]);c!=null&&a(t,["inlineData"],c);let d=l(e,["text"]);return d!=null&&a(t,["text"],d),t}function na(n,e){let t={},i=l(e,["parts"]);i!=null&&(Array.isArray(i)?a(t,["parts"],i.map(o=>fd(n,o))):a(t,["parts"],i));let r=l(e,["role"]);return r!=null&&a(t,["role"],r),t}function dd(n,e){let t={};if(l(e,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");let i=l(e,["description"]);i!=null&&a(t,["description"],i);let r=l(e,["name"]);r!=null&&a(t,["name"],r);let o=l(e,["parameters"]);return o!=null&&a(t,["parameters"],o),t}function hd(){return{}}function pd(n,e){let t={},i=l(e,["mode"]);i!=null&&a(t,["mode"],i);let r=l(e,["dynamicThreshold"]);return r!=null&&a(t,["dynamicThreshold"],r),t}function md(n,e){let t={},i=l(e,["dynamicRetrievalConfig"]);return i!=null&&a(t,["dynamicRetrievalConfig"],pd(n,i)),t}function gd(n,e){let t={},i=l(e,["functionDeclarations"]);if(i!=null&&(Array.isArray(i)?a(t,["functionDeclarations"],i.map(u=>dd(n,u))):a(t,["functionDeclarations"],i)),l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");l(e,["googleSearch"])!=null&&a(t,["googleSearch"],hd());let o=l(e,["googleSearchRetrieval"]);o!=null&&a(t,["googleSearchRetrieval"],md(n,o));let s=l(e,["codeExecution"]);return s!=null&&a(t,["codeExecution"],s),t}function Dd(n,e){let t={},i=l(e,["mode"]);i!=null&&a(t,["mode"],i);let r=l(e,["allowedFunctionNames"]);return r!=null&&a(t,["allowedFunctionNames"],r),t}function yd(n,e){let t={},i=l(e,["functionCallingConfig"]);return i!=null&&a(t,["functionCallingConfig"],Dd(n,i)),t}function vd(n,e,t){let i={},r=l(e,["ttl"]);t!==void 0&&r!=null&&a(t,["ttl"],r);let o=l(e,["expireTime"]);t!==void 0&&o!=null&&a(t,["expireTime"],o);let s=l(e,["displayName"]);t!==void 0&&s!=null&&a(t,["displayName"],s);let u=l(e,["contents"]);t!==void 0&&u!=null&&(Array.isArray(u)?a(t,["contents"],K(n,K(n,u).map(h=>na(n,h)))):a(t,["contents"],K(n,u)));let f=l(e,["systemInstruction"]);t!==void 0&&f!=null&&a(t,["systemInstruction"],na(n,ve(n,f)));let c=l(e,["tools"]);t!==void 0&&c!=null&&(Array.isArray(c)?a(t,["tools"],c.map(h=>gd(n,h))):a(t,["tools"],c));let d=l(e,["toolConfig"]);return t!==void 0&&d!=null&&a(t,["toolConfig"],yd(n,d)),i}function Cd(n,e){let t={},i=l(e,["model"]);i!=null&&a(t,["model"],Ya(n,i));let r=l(e,["config"]);return r!=null&&a(t,["config"],vd(n,r,t)),t}function Ed(n,e){let t={},i=l(e,["name"]);i!=null&&a(t,["_url","name"],ot(n,i));let r=l(e,["config"]);return r!=null&&a(t,["config"],r),t}function Fd(n,e){let t={},i=l(e,["name"]);i!=null&&a(t,["_url","name"],ot(n,i));let r=l(e,["config"]);return r!=null&&a(t,["config"],r),t}function wd(n,e,t){let i={},r=l(e,["ttl"]);t!==void 0&&r!=null&&a(t,["ttl"],r);let o=l(e,["expireTime"]);return t!==void 0&&o!=null&&a(t,["expireTime"],o),i}function Sd(n,e){let t={},i=l(e,["name"]);i!=null&&a(t,["_url","name"],ot(n,i));let r=l(e,["config"]);return r!=null&&a(t,["config"],wd(n,r,t)),t}function Td(n,e,t){let i={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&a(t,["_query","pageSize"],r);let o=l(e,["pageToken"]);return t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),i}function _d(n,e){let t={},i=l(e,["config"]);return i!=null&&a(t,["config"],Td(n,i,t)),t}function Md(n,e){let t={},i=l(e,["videoMetadata"]);i!=null&&a(t,["videoMetadata"],i);let r=l(e,["thought"]);r!=null&&a(t,["thought"],r);let o=l(e,["codeExecutionResult"]);o!=null&&a(t,["codeExecutionResult"],o);let s=l(e,["executableCode"]);s!=null&&a(t,["executableCode"],s);let u=l(e,["fileData"]);u!=null&&a(t,["fileData"],u);let f=l(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);let c=l(e,["functionResponse"]);c!=null&&a(t,["functionResponse"],c);let d=l(e,["inlineData"]);d!=null&&a(t,["inlineData"],d);let h=l(e,["text"]);return h!=null&&a(t,["text"],h),t}function ia(n,e){let t={},i=l(e,["parts"]);i!=null&&(Array.isArray(i)?a(t,["parts"],i.map(o=>Md(n,o))):a(t,["parts"],i));let r=l(e,["role"]);return r!=null&&a(t,["role"],r),t}function xd(n,e){let t={},i=l(e,["example"]);i!=null&&a(t,["example"],i);let r=l(e,["pattern"]);r!=null&&a(t,["pattern"],r);let o=l(e,["default"]);o!=null&&a(t,["default"],o);let s=l(e,["maxLength"]);s!=null&&a(t,["maxLength"],s);let u=l(e,["minLength"]);u!=null&&a(t,["minLength"],u);let f=l(e,["minProperties"]);f!=null&&a(t,["minProperties"],f);let c=l(e,["maxProperties"]);c!=null&&a(t,["maxProperties"],c);let d=l(e,["anyOf"]);d!=null&&a(t,["anyOf"],d);let h=l(e,["description"]);h!=null&&a(t,["description"],h);let m=l(e,["enum"]);m!=null&&a(t,["enum"],m);let D=l(e,["format"]);D!=null&&a(t,["format"],D);let v=l(e,["items"]);v!=null&&a(t,["items"],v);let w=l(e,["maxItems"]);w!=null&&a(t,["maxItems"],w);let x=l(e,["maximum"]);x!=null&&a(t,["maximum"],x);let k=l(e,["minItems"]);k!=null&&a(t,["minItems"],k);let b=l(e,["minimum"]);b!=null&&a(t,["minimum"],b);let R=l(e,["nullable"]);R!=null&&a(t,["nullable"],R);let E=l(e,["properties"]);E!=null&&a(t,["properties"],E);let I=l(e,["propertyOrdering"]);I!=null&&a(t,["propertyOrdering"],I);let O=l(e,["required"]);O!=null&&a(t,["required"],O);let S=l(e,["title"]);S!=null&&a(t,["title"],S);let N=l(e,["type"]);return N!=null&&a(t,["type"],N),t}function kd(n,e){let t={},i=l(e,["response"]);i!=null&&a(t,["response"],xd(n,i));let r=l(e,["description"]);r!=null&&a(t,["description"],r);let o=l(e,["name"]);o!=null&&a(t,["name"],o);let s=l(e,["parameters"]);return s!=null&&a(t,["parameters"],s),t}function Ad(){return{}}function Id(n,e){let t={},i=l(e,["mode"]);i!=null&&a(t,["mode"],i);let r=l(e,["dynamicThreshold"]);return r!=null&&a(t,["dynamicThreshold"],r),t}function Pd(n,e){let t={},i=l(e,["dynamicRetrievalConfig"]);return i!=null&&a(t,["dynamicRetrievalConfig"],Id(n,i)),t}function bd(n,e){let t={},i=l(e,["functionDeclarations"]);i!=null&&(Array.isArray(i)?a(t,["functionDeclarations"],i.map(f=>kd(n,f))):a(t,["functionDeclarations"],i));let r=l(e,["retrieval"]);r!=null&&a(t,["retrieval"],r),l(e,["googleSearch"])!=null&&a(t,["googleSearch"],Ad());let s=l(e,["googleSearchRetrieval"]);s!=null&&a(t,["googleSearchRetrieval"],Pd(n,s));let u=l(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function Nd(n,e){let t={},i=l(e,["mode"]);i!=null&&a(t,["mode"],i);let r=l(e,["allowedFunctionNames"]);return r!=null&&a(t,["allowedFunctionNames"],r),t}function Ld(n,e){let t={},i=l(e,["functionCallingConfig"]);return i!=null&&a(t,["functionCallingConfig"],Nd(n,i)),t}function Rd(n,e,t){let i={},r=l(e,["ttl"]);t!==void 0&&r!=null&&a(t,["ttl"],r);let o=l(e,["expireTime"]);t!==void 0&&o!=null&&a(t,["expireTime"],o);let s=l(e,["displayName"]);t!==void 0&&s!=null&&a(t,["displayName"],s);let u=l(e,["contents"]);t!==void 0&&u!=null&&(Array.isArray(u)?a(t,["contents"],K(n,K(n,u).map(h=>ia(n,h)))):a(t,["contents"],K(n,u)));let f=l(e,["systemInstruction"]);t!==void 0&&f!=null&&a(t,["systemInstruction"],ia(n,ve(n,f)));let c=l(e,["tools"]);t!==void 0&&c!=null&&(Array.isArray(c)?a(t,["tools"],c.map(h=>bd(n,h))):a(t,["tools"],c));let d=l(e,["toolConfig"]);return t!==void 0&&d!=null&&a(t,["toolConfig"],Ld(n,d)),i}function Od(n,e){let t={},i=l(e,["model"]);i!=null&&a(t,["model"],Ya(n,i));let r=l(e,["config"]);return r!=null&&a(t,["config"],Rd(n,r,t)),t}function Bd(n,e){let t={},i=l(e,["name"]);i!=null&&a(t,["_url","name"],ot(n,i));let r=l(e,["config"]);return r!=null&&a(t,["config"],r),t}function Vd(n,e){let t={},i=l(e,["name"]);i!=null&&a(t,["_url","name"],ot(n,i));let r=l(e,["config"]);return r!=null&&a(t,["config"],r),t}function Ud(n,e,t){let i={},r=l(e,["ttl"]);t!==void 0&&r!=null&&a(t,["ttl"],r);let o=l(e,["expireTime"]);return t!==void 0&&o!=null&&a(t,["expireTime"],o),i}function Hd(n,e){let t={},i=l(e,["name"]);i!=null&&a(t,["_url","name"],ot(n,i));let r=l(e,["config"]);return r!=null&&a(t,["config"],Ud(n,r,t)),t}function Gd(n,e,t){let i={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&a(t,["_query","pageSize"],r);let o=l(e,["pageToken"]);return t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),i}function qd(n,e){let t={},i=l(e,["config"]);return i!=null&&a(t,["config"],Gd(n,i,t)),t}function ii(n,e){let t={},i=l(e,["name"]);i!=null&&a(t,["name"],i);let r=l(e,["displayName"]);r!=null&&a(t,["displayName"],r);let o=l(e,["model"]);o!=null&&a(t,["model"],o);let s=l(e,["createTime"]);s!=null&&a(t,["createTime"],s);let u=l(e,["updateTime"]);u!=null&&a(t,["updateTime"],u);let f=l(e,["expireTime"]);f!=null&&a(t,["expireTime"],f);let c=l(e,["usageMetadata"]);return c!=null&&a(t,["usageMetadata"],c),t}function Wd(){return{}}function Yd(n,e){let t={},i=l(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);let r=l(e,["cachedContents"]);return r!=null&&(Array.isArray(r)?a(t,["cachedContents"],r.map(o=>ii(n,o))):a(t,["cachedContents"],r)),t}function ri(n,e){let t={},i=l(e,["name"]);i!=null&&a(t,["name"],i);let r=l(e,["displayName"]);r!=null&&a(t,["displayName"],r);let o=l(e,["model"]);o!=null&&a(t,["model"],o);let s=l(e,["createTime"]);s!=null&&a(t,["createTime"],s);let u=l(e,["updateTime"]);u!=null&&a(t,["updateTime"],u);let f=l(e,["expireTime"]);f!=null&&a(t,["expireTime"],f);let c=l(e,["usageMetadata"]);return c!=null&&a(t,["usageMetadata"],c),t}function zd(){return{}}function $d(n,e){let t={},i=l(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);let r=l(e,["cachedContents"]);return r!=null&&(Array.isArray(r)?a(t,["cachedContents"],r.map(o=>ri(n,o))):a(t,["cachedContents"],r)),t}var si;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(si||(si={}));var ai=class{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,o;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let s={config:{}};i?typeof i=="object"?s=Object.assign({},i):s=i:s={config:{}},s.config&&(s.config.pageToken=t.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(o=(r=s.config)===null||r===void 0?void 0:r.pageSize)!==null&&o!==void 0?o:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};var ra;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(ra||(ra={}));var oa;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(oa||(oa={}));var sa;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT"})(sa||(sa={}));var aa;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(aa||(aa={}));var ua;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(ua||(ua={}));var la;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(la||(la={}));var ca;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(ca||(ca={}));var fa;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY"})(fa||(fa={}));var da;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(da||(da={}));var ha;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ha||(ha={}));var pa;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(pa||(pa={}));var ma;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(ma||(ma={}));var ui;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(ui||(ui={}));var ga;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ga||(ga={}));var Da;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Da||(Da={}));var ya;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(ya||(ya={}));var va;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(va||(va={}));var Ca;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Ca||(Ca={}));var Ea;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Ea||(Ea={}));var Fa;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi"})(Fa||(Fa={}));var wa;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(wa||(wa={}));var Sa;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Sa||(Sa={}));var Ta;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Ta||(Ta={}));var _a;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(_a||(_a={}));var Ma;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Ma||(Ma={}));var xa;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(xa||(xa={}));var ka;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(ka||(ka={}));var Aa;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Aa||(Aa={}));var Ia;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Ia||(Ia={}));var Pa;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Pa||(Pa={}));var Ot=class{get text(){var e,t,i,r,o,s,u,f;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let c="",d=!1,h=[];for(let m of(f=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(let[D,v]of Object.entries(m))D!=="text"&&D!=="thought"&&(v!==null||v!==void 0)&&h.push(D);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,c+=m.text}}return h.length>0&&console.warn(`there are non-text parts ${h} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?c:void 0}get data(){var e,t,i,r,o,s,u,f;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let c="",d=[];for(let h of(f=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&f!==void 0?f:[]){for(let[m,D]of Object.entries(h))m!=="inlineData"&&(D!==null||D!==void 0)&&d.push(m);h.inlineData&&typeof h.inlineData.data=="string"&&(c+=atob(h.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}get functionCalls(){var e,t,i,r,o,s,u,f;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let c=(f=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((c==null?void 0:c.length)!==0)return c}get executableCode(){var e,t,i,r,o,s,u,f,c;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let d=(f=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(h=>h.executableCode).map(h=>h.executableCode).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.code}get codeExecutionResult(){var e,t,i,r,o,s,u,f,c;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let d=(f=(u=(s=(o=this.candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||f===void 0?void 0:f.filter(h=>h.codeExecutionResult).map(h=>h.codeExecutionResult).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return(c=d==null?void 0:d[0])===null||c===void 0?void 0:c.output}},li=class{},ci=class{},fi=class{},Br=class{};var di=class{},hi=class{},Vr=class{},mn=class{constructor(e){let t={};for(let i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}},Ur=class{},Hr=class{};var Gr=class extends Bt{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ai(si.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,o;let s,u="",f={};if(this.apiClient.isVertexAI()){let c=Od(this.apiClient,e);return u=G("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>ri(this.apiClient,d))}else{let c=Cd(this.apiClient,e);return u=G("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>ii(this.apiClient,d))}}async get(e){var t,i,r,o;let s,u="",f={};if(this.apiClient.isVertexAI()){let c=Bd(this.apiClient,e);return u=G("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>ri(this.apiClient,d))}else{let c=Ed(this.apiClient,e);return u=G("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>ii(this.apiClient,d))}}async delete(e){var t,i,r,o;let s,u="",f={};if(this.apiClient.isVertexAI()){let c=Vd(this.apiClient,e);return u=G("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(()=>{let d=zd(),h=new di;return Object.assign(h,d),h})}else{let c=Fd(this.apiClient,e);return u=G("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(()=>{let d=Wd(),h=new di;return Object.assign(h,d),h})}}async update(e){var t,i,r,o;let s,u="",f={};if(this.apiClient.isVertexAI()){let c=Hd(this.apiClient,e);return u=G("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>ri(this.apiClient,d))}else{let c=Sd(this.apiClient,e);return u=G("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>ii(this.apiClient,d))}}async listInternal(e){var t,i,r,o;let s,u="",f={};if(this.apiClient.isVertexAI()){let c=qd(this.apiClient,e);return u=G("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{let h=$d(this.apiClient,d),m=new hi;return Object.assign(m,h),m})}else{let c=_d(this.apiClient,e);return u=G("cachedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{let h=Yd(this.apiClient,d),m=new hi;return Object.assign(m,h),m})}}};function ba(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ce(n){return this instanceof ce?(this.v=n,this):new ce(n)}function pi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(D){return function(v){return Promise.resolve(v).then(D,h)}}function u(D,v){i[D]&&(r[D]=function(w){return new Promise(function(x,k){o.push([D,w,x,k])>1||f(D,w)})},v&&(r[D]=v(r[D])))}function f(D,v){try{c(i[D](v))}catch(w){m(o[0][3],w)}}function c(D){D.value instanceof ce?Promise.resolve(D.value.v).then(d,h):m(o[0][2],D)}function d(D){f("next",D)}function h(D){f("throw",D)}function m(D,v){D(v),o.shift(),o.length&&f(o[0][0],o[0][1])}}function qr(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof ba=="function"?ba(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(o){t[o]=n[o]&&function(s){return new Promise(function(u,f){s=n[o](s),r(u,f,s.done,s.value)})}}function r(o,s,u,f){Promise.resolve(f).then(function(c){o({value:c,done:u})},s)}}function Kd(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;let t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:Xa(t)}function Xa(n){if(n.parts===void 0||n.parts.length===0)return!1;for(let e of n.parts)if(e===void 0||Object.keys(e).length===0||e.text!==void 0&&e.text==="")return!1;return!0}function Jd(n){if(n.length!==0){if(n[0].role!=="user")throw new Error("History must start with a user turn.");for(let e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Zd(n){if(n===void 0||n.length===0)return[];let e=[],t=n.length,i=0,r=n[0];for(;i<t;)if(n[i].role==="user")r=n[i],i++;else{let o=[],s=!0;for(;i<t&&n[i].role==="model";)o.push(n[i]),s&&!Xa(n[i])&&(s=!1),i++;s&&(e.push(r),e.push(...o))}return e}var Wr=class{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Yr(this.apiClient,this.modelsModule,e.model,e.config,e.history)}},Yr=class{constructor(e,t,i,r={},o=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=o,this.sendPromise=Promise.resolve(),Jd(o)}async sendMessage(e){var t;await this.sendPromise;let i=ve(this.apiClient,e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var o,s;let f=(s=(o=(await r).candidates)===null||o===void 0?void 0:o[0])===null||s===void 0?void 0:s.content,c=f?[f]:[];this.recordHistory(i,c)})(),await this.sendPromise,r}async sendMessageStream(e){var t;await this.sendPromise;let i=ve(this.apiClient,e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{});let o=await r;return this.processStreamResponse(o,i)}getHistory(e=!1){return e?Zd(this.history):this.history}processStreamResponse(e,t){var i,r;return pi(this,arguments,function*(){var s,u,f,c;let d=[];try{for(var h=!0,m=qr(e),D;D=yield ce(m.next()),s=D.done,!s;h=!0){c=D.value,h=!1;let v=c;if(Kd(v)){let w=(r=(i=v.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;w!==void 0&&d.push(w)}yield yield ce(v)}}catch(v){u={error:v}}finally{try{!h&&!s&&(f=m.return)&&(yield ce(f.call(m)))}finally{if(u)throw u.error}}this.recordHistory(t,d)})}recordHistory(e,t){let i=[];t.length>0&&t.every(r=>r.role==="model")?i=t:i.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...i)}};function Qd(n,e,t){let i={},r=l(e,["pageSize"]);t!==void 0&&r!=null&&a(t,["_query","pageSize"],r);let o=l(e,["pageToken"]);return t!==void 0&&o!=null&&a(t,["_query","pageToken"],o),i}function Xd(n,e){let t={},i=l(e,["config"]);return i!=null&&a(t,["config"],Qd(n,i,t)),t}function jd(n,e){let t={},i=l(e,["details"]);i!=null&&a(t,["details"],i);let r=l(e,["message"]);r!=null&&a(t,["message"],r);let o=l(e,["code"]);return o!=null&&a(t,["code"],o),t}function eh(n,e){let t={},i=l(e,["name"]);i!=null&&a(t,["name"],i);let r=l(e,["displayName"]);r!=null&&a(t,["displayName"],r);let o=l(e,["mimeType"]);o!=null&&a(t,["mimeType"],o);let s=l(e,["sizeBytes"]);s!=null&&a(t,["sizeBytes"],s);let u=l(e,["createTime"]);u!=null&&a(t,["createTime"],u);let f=l(e,["expirationTime"]);f!=null&&a(t,["expirationTime"],f);let c=l(e,["updateTime"]);c!=null&&a(t,["updateTime"],c);let d=l(e,["sha256Hash"]);d!=null&&a(t,["sha256Hash"],d);let h=l(e,["uri"]);h!=null&&a(t,["uri"],h);let m=l(e,["downloadUri"]);m!=null&&a(t,["downloadUri"],m);let D=l(e,["state"]);D!=null&&a(t,["state"],D);let v=l(e,["source"]);v!=null&&a(t,["source"],v);let w=l(e,["videoMetadata"]);w!=null&&a(t,["videoMetadata"],w);let x=l(e,["error"]);return x!=null&&a(t,["error"],jd(n,x)),t}function th(n,e){let t={},i=l(e,["file"]);i!=null&&a(t,["file"],eh(n,i));let r=l(e,["config"]);return r!=null&&a(t,["config"],r),t}function nh(n,e){let t={},i=l(e,["name"]);i!=null&&a(t,["_url","file"],Qa(n,i));let r=l(e,["config"]);return r!=null&&a(t,["config"],r),t}function ih(n,e){let t={},i=l(e,["name"]);i!=null&&a(t,["_url","file"],Qa(n,i));let r=l(e,["config"]);return r!=null&&a(t,["config"],r),t}function rh(n,e){let t={},i=l(e,["details"]);i!=null&&a(t,["details"],i);let r=l(e,["message"]);r!=null&&a(t,["message"],r);let o=l(e,["code"]);return o!=null&&a(t,["code"],o),t}function zr(n,e){let t={},i=l(e,["name"]);i!=null&&a(t,["name"],i);let r=l(e,["displayName"]);r!=null&&a(t,["displayName"],r);let o=l(e,["mimeType"]);o!=null&&a(t,["mimeType"],o);let s=l(e,["sizeBytes"]);s!=null&&a(t,["sizeBytes"],s);let u=l(e,["createTime"]);u!=null&&a(t,["createTime"],u);let f=l(e,["expirationTime"]);f!=null&&a(t,["expirationTime"],f);let c=l(e,["updateTime"]);c!=null&&a(t,["updateTime"],c);let d=l(e,["sha256Hash"]);d!=null&&a(t,["sha256Hash"],d);let h=l(e,["uri"]);h!=null&&a(t,["uri"],h);let m=l(e,["downloadUri"]);m!=null&&a(t,["downloadUri"],m);let D=l(e,["state"]);D!=null&&a(t,["state"],D);let v=l(e,["source"]);v!=null&&a(t,["source"],v);let w=l(e,["videoMetadata"]);w!=null&&a(t,["videoMetadata"],w);let x=l(e,["error"]);return x!=null&&a(t,["error"],rh(n,x)),t}function oh(n,e){let t={},i=l(e,["nextPageToken"]);i!=null&&a(t,["nextPageToken"],i);let r=l(e,["files"]);return r!=null&&(Array.isArray(r)?a(t,["files"],r.map(o=>zr(n,o))):a(t,["files"],r)),t}function sh(){return{}}function ah(){return{}}var $r=class extends Bt{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ai(si.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>zr(this.apiClient,t))}async listInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=Xd(this.apiClient,e);return o=G("files",u._url),s=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{let c=oh(this.apiClient,f),d=new Vr;return Object.assign(d,c),d})}}async createInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=th(this.apiClient,e);return o=G("upload/v1beta/files",u._url),s=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(()=>{let f=sh(),c=new Ur;return Object.assign(c,f),c})}}async get(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=nh(this.apiClient,e);return o=G("files/{file}",u._url),s=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>zr(this.apiClient,f))}}async delete(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let u=ih(this.apiClient,e);return o=G("files/{file}",u._url),s=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(()=>{let f=ah(),c=new Hr;return Object.assign(c,f),c})}}};function uh(n,e){let t={};if(l(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");let i=l(e,["thought"]);i!=null&&a(t,["thought"],i);let r=l(e,["codeExecutionResult"]);r!=null&&a(t,["codeExecutionResult"],r);let o=l(e,["executableCode"]);o!=null&&a(t,["executableCode"],o);let s=l(e,["fileData"]);s!=null&&a(t,["fileData"],s);let u=l(e,["functionCall"]);u!=null&&a(t,["functionCall"],u);let f=l(e,["functionResponse"]);f!=null&&a(t,["functionResponse"],f);let c=l(e,["inlineData"]);c!=null&&a(t,["inlineData"],c);let d=l(e,["text"]);return d!=null&&a(t,["text"],d),t}function lh(n,e){let t={},i=l(e,["videoMetadata"]);i!=null&&a(t,["videoMetadata"],i);let r=l(e,["thought"]);r!=null&&a(t,["thought"],r);let o=l(e,["codeExecutionResult"]);o!=null&&a(t,["codeExecutionResult"],o);let s=l(e,["executableCode"]);s!=null&&a(t,["executableCode"],s);let u=l(e,["fileData"]);u!=null&&a(t,["fileData"],u);let f=l(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);let c=l(e,["functionResponse"]);c!=null&&a(t,["functionResponse"],c);let d=l(e,["inlineData"]);d!=null&&a(t,["inlineData"],d);let h=l(e,["text"]);return h!=null&&a(t,["text"],h),t}function ch(n,e){let t={},i=l(e,["parts"]);i!=null&&(Array.isArray(i)?a(t,["parts"],i.map(o=>uh(n,o))):a(t,["parts"],i));let r=l(e,["role"]);return r!=null&&a(t,["role"],r),t}function fh(n,e){let t={},i=l(e,["parts"]);i!=null&&(Array.isArray(i)?a(t,["parts"],i.map(o=>lh(n,o))):a(t,["parts"],i));let r=l(e,["role"]);return r!=null&&a(t,["role"],r),t}function dh(n,e){let t={},i=l(e,["example"]);i!=null&&a(t,["example"],i);let r=l(e,["pattern"]);r!=null&&a(t,["pattern"],r);let o=l(e,["default"]);o!=null&&a(t,["default"],o);let s=l(e,["maxLength"]);s!=null&&a(t,["maxLength"],s);let u=l(e,["minLength"]);u!=null&&a(t,["minLength"],u);let f=l(e,["minProperties"]);f!=null&&a(t,["minProperties"],f);let c=l(e,["maxProperties"]);c!=null&&a(t,["maxProperties"],c);let d=l(e,["anyOf"]);d!=null&&a(t,["anyOf"],d);let h=l(e,["description"]);h!=null&&a(t,["description"],h);let m=l(e,["enum"]);m!=null&&a(t,["enum"],m);let D=l(e,["format"]);D!=null&&a(t,["format"],D);let v=l(e,["items"]);v!=null&&a(t,["items"],v);let w=l(e,["maxItems"]);w!=null&&a(t,["maxItems"],w);let x=l(e,["maximum"]);x!=null&&a(t,["maximum"],x);let k=l(e,["minItems"]);k!=null&&a(t,["minItems"],k);let b=l(e,["minimum"]);b!=null&&a(t,["minimum"],b);let R=l(e,["nullable"]);R!=null&&a(t,["nullable"],R);let E=l(e,["properties"]);E!=null&&a(t,["properties"],E);let I=l(e,["propertyOrdering"]);I!=null&&a(t,["propertyOrdering"],I);let O=l(e,["required"]);O!=null&&a(t,["required"],O);let S=l(e,["title"]);S!=null&&a(t,["title"],S);let N=l(e,["type"]);return N!=null&&a(t,["type"],N),t}function hh(n,e){let t={};if(l(e,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");let i=l(e,["description"]);i!=null&&a(t,["description"],i);let r=l(e,["name"]);r!=null&&a(t,["name"],r);let o=l(e,["parameters"]);return o!=null&&a(t,["parameters"],o),t}function ph(n,e){let t={},i=l(e,["response"]);i!=null&&a(t,["response"],dh(n,i));let r=l(e,["description"]);r!=null&&a(t,["description"],r);let o=l(e,["name"]);o!=null&&a(t,["name"],o);let s=l(e,["parameters"]);return s!=null&&a(t,["parameters"],s),t}function mh(){return{}}function gh(){return{}}function Dh(n,e){let t={},i=l(e,["mode"]);i!=null&&a(t,["mode"],i);let r=l(e,["dynamicThreshold"]);return r!=null&&a(t,["dynamicThreshold"],r),t}function yh(n,e){let t={},i=l(e,["mode"]);i!=null&&a(t,["mode"],i);let r=l(e,["dynamicThreshold"]);return r!=null&&a(t,["dynamicThreshold"],r),t}function vh(n,e){let t={},i=l(e,["dynamicRetrievalConfig"]);return i!=null&&a(t,["dynamicRetrievalConfig"],Dh(n,i)),t}function Ch(n,e){let t={},i=l(e,["dynamicRetrievalConfig"]);return i!=null&&a(t,["dynamicRetrievalConfig"],yh(n,i)),t}function Eh(n,e){let t={},i=l(e,["functionDeclarations"]);if(i!=null&&(Array.isArray(i)?a(t,["functionDeclarations"],i.map(u=>hh(n,u))):a(t,["functionDeclarations"],i)),l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");l(e,["googleSearch"])!=null&&a(t,["googleSearch"],mh());let o=l(e,["googleSearchRetrieval"]);o!=null&&a(t,["googleSearchRetrieval"],vh(n,o));let s=l(e,["codeExecution"]);return s!=null&&a(t,["codeExecution"],s),t}function Fh(n,e){let t={},i=l(e,["functionDeclarations"]);i!=null&&(Array.isArray(i)?a(t,["functionDeclarations"],i.map(f=>ph(n,f))):a(t,["functionDeclarations"],i));let r=l(e,["retrieval"]);r!=null&&a(t,["retrieval"],r),l(e,["googleSearch"])!=null&&a(t,["googleSearch"],gh());let s=l(e,["googleSearchRetrieval"]);s!=null&&a(t,["googleSearchRetrieval"],Ch(n,s));let u=l(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function wh(n,e){let t={},i=l(e,["handle"]);if(i!=null&&a(t,["handle"],i),l(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function Sh(n,e){let t={},i=l(e,["handle"]);i!=null&&a(t,["handle"],i);let r=l(e,["transparent"]);return r!=null&&a(t,["transparent"],r),t}function Th(){return{}}function Na(){return{}}function _h(n,e){let t={},i=l(e,["disabled"]);i!=null&&a(t,["disabled"],i);let r=l(e,["startOfSpeechSensitivity"]);r!=null&&a(t,["startOfSpeechSensitivity"],r);let o=l(e,["endOfSpeechSensitivity"]);o!=null&&a(t,["endOfSpeechSensitivity"],o);let s=l(e,["prefixPaddingMs"]);s!=null&&a(t,["prefixPaddingMs"],s);let u=l(e,["silenceDurationMs"]);return u!=null&&a(t,["silenceDurationMs"],u),t}function Mh(n,e){let t={},i=l(e,["disabled"]);i!=null&&a(t,["disabled"],i);let r=l(e,["startOfSpeechSensitivity"]);r!=null&&a(t,["startOfSpeechSensitivity"],r);let o=l(e,["endOfSpeechSensitivity"]);o!=null&&a(t,["endOfSpeechSensitivity"],o);let s=l(e,["prefixPaddingMs"]);s!=null&&a(t,["prefixPaddingMs"],s);let u=l(e,["silenceDurationMs"]);return u!=null&&a(t,["silenceDurationMs"],u),t}function xh(n,e){let t={},i=l(e,["automaticActivityDetection"]);i!=null&&a(t,["automaticActivityDetection"],_h(n,i));let r=l(e,["activityHandling"]);r!=null&&a(t,["activityHandling"],r);let o=l(e,["turnCoverage"]);return o!=null&&a(t,["turnCoverage"],o),t}function kh(n,e){let t={},i=l(e,["automaticActivityDetection"]);i!=null&&a(t,["automaticActivityDetection"],Mh(n,i));let r=l(e,["activityHandling"]);r!=null&&a(t,["activityHandling"],r);let o=l(e,["turnCoverage"]);return o!=null&&a(t,["turnCoverage"],o),t}function Ah(n,e){let t={},i=l(e,["targetTokens"]);return i!=null&&a(t,["targetTokens"],i),t}function Ih(n,e){let t={},i=l(e,["targetTokens"]);return i!=null&&a(t,["targetTokens"],i),t}function Ph(n,e){let t={},i=l(e,["triggerTokens"]);i!=null&&a(t,["triggerTokens"],i);let r=l(e,["slidingWindow"]);return r!=null&&a(t,["slidingWindow"],Ah(n,r)),t}function bh(n,e){let t={},i=l(e,["triggerTokens"]);i!=null&&a(t,["triggerTokens"],i);let r=l(e,["slidingWindow"]);return r!=null&&a(t,["slidingWindow"],Ih(n,r)),t}function Nh(n,e,t){let i={},r=l(e,["generationConfig"]);t!==void 0&&r!=null&&a(t,["setup","generationConfig"],r);let o=l(e,["responseModalities"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig","responseModalities"],o);let s=l(e,["temperature"]);t!==void 0&&s!=null&&a(t,["setup","generationConfig","temperature"],s);let u=l(e,["topP"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topP"],u);let f=l(e,["topK"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","topK"],f);let c=l(e,["maxOutputTokens"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","maxOutputTokens"],c);let d=l(e,["mediaResolution"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","mediaResolution"],d);let h=l(e,["seed"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","seed"],h);let m=l(e,["speechConfig"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","speechConfig"],m);let D=l(e,["systemInstruction"]);t!==void 0&&D!=null&&a(t,["setup","systemInstruction"],ch(n,ve(n,D)));let v=l(e,["tools"]);t!==void 0&&v!=null&&(Array.isArray(v)?a(t,["setup","tools"],xe(n,xe(n,v).map(R=>Eh(n,Di(n,R))))):a(t,["setup","tools"],xe(n,v)));let w=l(e,["sessionResumption"]);if(t!==void 0&&w!=null&&a(t,["setup","sessionResumption"],wh(n,w)),l(e,["inputAudioTranscription"])!==void 0)throw new Error("inputAudioTranscription parameter is not supported in Gemini API.");let x=l(e,["outputAudioTranscription"]);t!==void 0&&x!=null&&a(t,["setup","outputAudioTranscription"],Th());let k=l(e,["realtimeInputConfig"]);t!==void 0&&k!=null&&a(t,["setup","realtimeInputConfig"],xh(n,k));let b=l(e,["contextWindowCompression"]);return t!==void 0&&b!=null&&a(t,["setup","contextWindowCompression"],Ph(n,b)),i}function Lh(n,e,t){let i={},r=l(e,["generationConfig"]);t!==void 0&&r!=null&&a(t,["setup","generationConfig"],r);let o=l(e,["responseModalities"]);t!==void 0&&o!=null&&a(t,["setup","generationConfig","responseModalities"],o);let s=l(e,["temperature"]);t!==void 0&&s!=null&&a(t,["setup","generationConfig","temperature"],s);let u=l(e,["topP"]);t!==void 0&&u!=null&&a(t,["setup","generationConfig","topP"],u);let f=l(e,["topK"]);t!==void 0&&f!=null&&a(t,["setup","generationConfig","topK"],f);let c=l(e,["maxOutputTokens"]);t!==void 0&&c!=null&&a(t,["setup","generationConfig","maxOutputTokens"],c);let d=l(e,["mediaResolution"]);t!==void 0&&d!=null&&a(t,["setup","generationConfig","mediaResolution"],d);let h=l(e,["seed"]);t!==void 0&&h!=null&&a(t,["setup","generationConfig","seed"],h);let m=l(e,["speechConfig"]);t!==void 0&&m!=null&&a(t,["setup","generationConfig","speechConfig"],m);let D=l(e,["systemInstruction"]);t!==void 0&&D!=null&&a(t,["setup","systemInstruction"],fh(n,ve(n,D)));let v=l(e,["tools"]);t!==void 0&&v!=null&&(Array.isArray(v)?a(t,["setup","tools"],xe(n,xe(n,v).map(E=>Fh(n,Di(n,E))))):a(t,["setup","tools"],xe(n,v)));let w=l(e,["sessionResumption"]);t!==void 0&&w!=null&&a(t,["setup","sessionResumption"],Sh(n,w));let x=l(e,["inputAudioTranscription"]);t!==void 0&&x!=null&&a(t,["setup","inputAudioTranscription"],Na());let k=l(e,["outputAudioTranscription"]);t!==void 0&&k!=null&&a(t,["setup","outputAudioTranscription"],Na());let b=l(e,["realtimeInputConfig"]);t!==void 0&&b!=null&&a(t,["setup","realtimeInputConfig"],kh(n,b));let R=l(e,["contextWindowCompression"]);return t!==void 0&&R!=null&&a(t,["setup","contextWindowCompression"],bh(n,R)),i}function Rh(n,e){let t={},i=l(e,["model"]);i!=null&&a(t,["setup","model"],oe(n,i));let r=l(e,["config"]);return r!=null&&a(t,["config"],Nh(n,r,t)),t}function Oh(n,e){let t={},i=l(e,["model"]);i!=null&&a(t,["setup","model"],oe(n,i));let r=l(e,["config"]);return r!=null&&a(t,["config"],Lh(n,r,t)),t}function Bh(){return{}}function Vh(){return{}}function Uh(){return{}}function Hh(){return{}}function Gh(n,e){let t={},i=l(e,["media"]);i!=null&&a(t,["mediaChunks"],za(n,i));let r=l(e,["audio"]);r!=null&&a(t,["audio"],ld(n,r));let o=l(e,["audioStreamEnd"]);o!=null&&a(t,["audioStreamEnd"],o);let s=l(e,["video"]);s!=null&&a(t,["video"],ud(n,s));let u=l(e,["text"]);return u!=null&&a(t,["text"],u),l(e,["activityStart"])!=null&&a(t,["activityStart"],Bh()),l(e,["activityEnd"])!=null&&a(t,["activityEnd"],Uh()),t}function qh(n,e){let t={},i=l(e,["media"]);if(i!=null&&a(t,["mediaChunks"],za(n,i)),l(e,["audio"])!==void 0)throw new Error("audio parameter is not supported in Vertex AI.");let r=l(e,["audioStreamEnd"]);if(r!=null&&a(t,["audioStreamEnd"],r),l(e,["video"])!==void 0)throw new Error("video parameter is not supported in Vertex AI.");if(l(e,["text"])!==void 0)throw new Error("text parameter is not supported in Vertex AI.");return l(e,["activityStart"])!=null&&a(t,["activityStart"],Vh()),l(e,["activityEnd"])!=null&&a(t,["activityEnd"],Hh()),t}function Wh(){return{}}function Yh(){return{}}function zh(n,e){let t={},i=l(e,["thought"]);i!=null&&a(t,["thought"],i);let r=l(e,["codeExecutionResult"]);r!=null&&a(t,["codeExecutionResult"],r);let o=l(e,["executableCode"]);o!=null&&a(t,["executableCode"],o);let s=l(e,["fileData"]);s!=null&&a(t,["fileData"],s);let u=l(e,["functionCall"]);u!=null&&a(t,["functionCall"],u);let f=l(e,["functionResponse"]);f!=null&&a(t,["functionResponse"],f);let c=l(e,["inlineData"]);c!=null&&a(t,["inlineData"],c);let d=l(e,["text"]);return d!=null&&a(t,["text"],d),t}function $h(n,e){let t={},i=l(e,["videoMetadata"]);i!=null&&a(t,["videoMetadata"],i);let r=l(e,["thought"]);r!=null&&a(t,["thought"],r);let o=l(e,["codeExecutionResult"]);o!=null&&a(t,["codeExecutionResult"],o);let s=l(e,["executableCode"]);s!=null&&a(t,["executableCode"],s);let u=l(e,["fileData"]);u!=null&&a(t,["fileData"],u);let f=l(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);let c=l(e,["functionResponse"]);c!=null&&a(t,["functionResponse"],c);let d=l(e,["inlineData"]);d!=null&&a(t,["inlineData"],d);let h=l(e,["text"]);return h!=null&&a(t,["text"],h),t}function Kh(n,e){let t={},i=l(e,["parts"]);i!=null&&(Array.isArray(i)?a(t,["parts"],i.map(o=>zh(n,o))):a(t,["parts"],i));let r=l(e,["role"]);return r!=null&&a(t,["role"],r),t}function Jh(n,e){let t={},i=l(e,["parts"]);i!=null&&(Array.isArray(i)?a(t,["parts"],i.map(o=>$h(n,o))):a(t,["parts"],i));let r=l(e,["role"]);return r!=null&&a(t,["role"],r),t}function La(n,e){let t={},i=l(e,["text"]);i!=null&&a(t,["text"],i);let r=l(e,["finished"]);return r!=null&&a(t,["finished"],r),t}function Ra(n,e){let t={},i=l(e,["text"]);i!=null&&a(t,["text"],i);let r=l(e,["finished"]);return r!=null&&a(t,["finished"],r),t}function Zh(n,e){let t={},i=l(e,["modelTurn"]);i!=null&&a(t,["modelTurn"],Kh(n,i));let r=l(e,["turnComplete"]);r!=null&&a(t,["turnComplete"],r);let o=l(e,["interrupted"]);o!=null&&a(t,["interrupted"],o);let s=l(e,["generationComplete"]);s!=null&&a(t,["generationComplete"],s);let u=l(e,["inputTranscription"]);u!=null&&a(t,["inputTranscription"],La(n,u));let f=l(e,["outputTranscription"]);return f!=null&&a(t,["outputTranscription"],La(n,f)),t}function Qh(n,e){let t={},i=l(e,["modelTurn"]);i!=null&&a(t,["modelTurn"],Jh(n,i));let r=l(e,["turnComplete"]);r!=null&&a(t,["turnComplete"],r);let o=l(e,["interrupted"]);o!=null&&a(t,["interrupted"],o);let s=l(e,["generationComplete"]);s!=null&&a(t,["generationComplete"],s);let u=l(e,["inputTranscription"]);u!=null&&a(t,["inputTranscription"],Ra(n,u));let f=l(e,["outputTranscription"]);return f!=null&&a(t,["outputTranscription"],Ra(n,f)),t}function Xh(n,e){let t={},i=l(e,["id"]);i!=null&&a(t,["id"],i);let r=l(e,["args"]);r!=null&&a(t,["args"],r);let o=l(e,["name"]);return o!=null&&a(t,["name"],o),t}function jh(n,e){let t={},i=l(e,["args"]);i!=null&&a(t,["args"],i);let r=l(e,["name"]);return r!=null&&a(t,["name"],r),t}function ep(n,e){let t={},i=l(e,["functionCalls"]);return i!=null&&(Array.isArray(i)?a(t,["functionCalls"],i.map(r=>Xh(n,r))):a(t,["functionCalls"],i)),t}function tp(n,e){let t={},i=l(e,["functionCalls"]);return i!=null&&(Array.isArray(i)?a(t,["functionCalls"],i.map(r=>jh(n,r))):a(t,["functionCalls"],i)),t}function np(n,e){let t={},i=l(e,["ids"]);return i!=null&&a(t,["ids"],i),t}function ip(n,e){let t={},i=l(e,["ids"]);return i!=null&&a(t,["ids"],i),t}function ti(n,e){let t={},i=l(e,["modality"]);i!=null&&a(t,["modality"],i);let r=l(e,["tokenCount"]);return r!=null&&a(t,["tokenCount"],r),t}function ni(n,e){let t={},i=l(e,["modality"]);i!=null&&a(t,["modality"],i);let r=l(e,["tokenCount"]);return r!=null&&a(t,["tokenCount"],r),t}function rp(n,e){let t={},i=l(e,["promptTokenCount"]);i!=null&&a(t,["promptTokenCount"],i);let r=l(e,["cachedContentTokenCount"]);r!=null&&a(t,["cachedContentTokenCount"],r);let o=l(e,["responseTokenCount"]);o!=null&&a(t,["responseTokenCount"],o);let s=l(e,["toolUsePromptTokenCount"]);s!=null&&a(t,["toolUsePromptTokenCount"],s);let u=l(e,["thoughtsTokenCount"]);u!=null&&a(t,["thoughtsTokenCount"],u);let f=l(e,["totalTokenCount"]);f!=null&&a(t,["totalTokenCount"],f);let c=l(e,["promptTokensDetails"]);c!=null&&(Array.isArray(c)?a(t,["promptTokensDetails"],c.map(D=>ti(n,D))):a(t,["promptTokensDetails"],c));let d=l(e,["cacheTokensDetails"]);d!=null&&(Array.isArray(d)?a(t,["cacheTokensDetails"],d.map(D=>ti(n,D))):a(t,["cacheTokensDetails"],d));let h=l(e,["responseTokensDetails"]);h!=null&&(Array.isArray(h)?a(t,["responseTokensDetails"],h.map(D=>ti(n,D))):a(t,["responseTokensDetails"],h));let m=l(e,["toolUsePromptTokensDetails"]);return m!=null&&(Array.isArray(m)?a(t,["toolUsePromptTokensDetails"],m.map(D=>ti(n,D))):a(t,["toolUsePromptTokensDetails"],m)),t}function op(n,e){let t={},i=l(e,["promptTokenCount"]);i!=null&&a(t,["promptTokenCount"],i);let r=l(e,["cachedContentTokenCount"]);r!=null&&a(t,["cachedContentTokenCount"],r);let o=l(e,["candidatesTokenCount"]);o!=null&&a(t,["responseTokenCount"],o);let s=l(e,["toolUsePromptTokenCount"]);s!=null&&a(t,["toolUsePromptTokenCount"],s);let u=l(e,["thoughtsTokenCount"]);u!=null&&a(t,["thoughtsTokenCount"],u);let f=l(e,["totalTokenCount"]);f!=null&&a(t,["totalTokenCount"],f);let c=l(e,["promptTokensDetails"]);c!=null&&(Array.isArray(c)?a(t,["promptTokensDetails"],c.map(v=>ni(n,v))):a(t,["promptTokensDetails"],c));let d=l(e,["cacheTokensDetails"]);d!=null&&(Array.isArray(d)?a(t,["cacheTokensDetails"],d.map(v=>ni(n,v))):a(t,["cacheTokensDetails"],d));let h=l(e,["candidatesTokensDetails"]);h!=null&&(Array.isArray(h)?a(t,["responseTokensDetails"],h.map(v=>ni(n,v))):a(t,["responseTokensDetails"],h));let m=l(e,["toolUsePromptTokensDetails"]);m!=null&&(Array.isArray(m)?a(t,["toolUsePromptTokensDetails"],m.map(v=>ni(n,v))):a(t,["toolUsePromptTokensDetails"],m));let D=l(e,["trafficType"]);return D!=null&&a(t,["trafficType"],D),t}function sp(n,e){let t={},i=l(e,["timeLeft"]);return i!=null&&a(t,["timeLeft"],i),t}function ap(n,e){let t={},i=l(e,["timeLeft"]);return i!=null&&a(t,["timeLeft"],i),t}function up(n,e){let t={},i=l(e,["newHandle"]);i!=null&&a(t,["newHandle"],i);let r=l(e,["resumable"]);r!=null&&a(t,["resumable"],r);let o=l(e,["lastConsumedClientMessageIndex"]);return o!=null&&a(t,["lastConsumedClientMessageIndex"],o),t}function lp(n,e){let t={},i=l(e,["newHandle"]);i!=null&&a(t,["newHandle"],i);let r=l(e,["resumable"]);r!=null&&a(t,["resumable"],r);let o=l(e,["lastConsumedClientMessageIndex"]);return o!=null&&a(t,["lastConsumedClientMessageIndex"],o),t}function cp(n,e){let t={};l(e,["setupComplete"])!=null&&a(t,["setupComplete"],Wh());let r=l(e,["serverContent"]);r!=null&&a(t,["serverContent"],Zh(n,r));let o=l(e,["toolCall"]);o!=null&&a(t,["toolCall"],ep(n,o));let s=l(e,["toolCallCancellation"]);s!=null&&a(t,["toolCallCancellation"],np(n,s));let u=l(e,["usageMetadata"]);u!=null&&a(t,["usageMetadata"],rp(n,u));let f=l(e,["goAway"]);f!=null&&a(t,["goAway"],sp(n,f));let c=l(e,["sessionResumptionUpdate"]);return c!=null&&a(t,["sessionResumptionUpdate"],up(n,c)),t}function fp(n,e){let t={};l(e,["setupComplete"])!=null&&a(t,["setupComplete"],Yh());let r=l(e,["serverContent"]);r!=null&&a(t,["serverContent"],Qh(n,r));let o=l(e,["toolCall"]);o!=null&&a(t,["toolCall"],tp(n,o));let s=l(e,["toolCallCancellation"]);s!=null&&a(t,["toolCallCancellation"],ip(n,s));let u=l(e,["usageMetadata"]);u!=null&&a(t,["usageMetadata"],op(n,u));let f=l(e,["goAway"]);f!=null&&a(t,["goAway"],ap(n,f));let c=l(e,["sessionResumptionUpdate"]);return c!=null&&a(t,["sessionResumptionUpdate"],lp(n,c)),t}function dp(n,e){let t={};if(l(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");let i=l(e,["thought"]);i!=null&&a(t,["thought"],i);let r=l(e,["codeExecutionResult"]);r!=null&&a(t,["codeExecutionResult"],r);let o=l(e,["executableCode"]);o!=null&&a(t,["executableCode"],o);let s=l(e,["fileData"]);s!=null&&a(t,["fileData"],s);let u=l(e,["functionCall"]);u!=null&&a(t,["functionCall"],u);let f=l(e,["functionResponse"]);f!=null&&a(t,["functionResponse"],f);let c=l(e,["inlineData"]);c!=null&&a(t,["inlineData"],c);let d=l(e,["text"]);return d!=null&&a(t,["text"],d),t}function yi(n,e){let t={},i=l(e,["parts"]);i!=null&&(Array.isArray(i)?a(t,["parts"],i.map(o=>dp(n,o))):a(t,["parts"],i));let r=l(e,["role"]);return r!=null&&a(t,["role"],r),t}function hp(n,e){let t={};if(l(e,["example"])!==void 0)throw new Error("example parameter is not supported in Gemini API.");if(l(e,["pattern"])!==void 0)throw new Error("pattern parameter is not supported in Gemini API.");if(l(e,["default"])!==void 0)throw new Error("default parameter is not supported in Gemini API.");if(l(e,["maxLength"])!==void 0)throw new Error("maxLength parameter is not supported in Gemini API.");if(l(e,["minLength"])!==void 0)throw new Error("minLength parameter is not supported in Gemini API.");if(l(e,["minProperties"])!==void 0)throw new Error("minProperties parameter is not supported in Gemini API.");if(l(e,["maxProperties"])!==void 0)throw new Error("maxProperties parameter is not supported in Gemini API.");let i=l(e,["anyOf"]);i!=null&&a(t,["anyOf"],i);let r=l(e,["description"]);r!=null&&a(t,["description"],r);let o=l(e,["enum"]);o!=null&&a(t,["enum"],o);let s=l(e,["format"]);s!=null&&a(t,["format"],s);let u=l(e,["items"]);u!=null&&a(t,["items"],u);let f=l(e,["maxItems"]);f!=null&&a(t,["maxItems"],f);let c=l(e,["maximum"]);c!=null&&a(t,["maximum"],c);let d=l(e,["minItems"]);d!=null&&a(t,["minItems"],d);let h=l(e,["minimum"]);h!=null&&a(t,["minimum"],h);let m=l(e,["nullable"]);m!=null&&a(t,["nullable"],m);let D=l(e,["properties"]);D!=null&&a(t,["properties"],D);let v=l(e,["propertyOrdering"]);v!=null&&a(t,["propertyOrdering"],v);let w=l(e,["required"]);w!=null&&a(t,["required"],w);let x=l(e,["title"]);x!=null&&a(t,["title"],x);let k=l(e,["type"]);return k!=null&&a(t,["type"],k),t}function pp(n,e){let t={};if(l(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let i=l(e,["category"]);i!=null&&a(t,["category"],i);let r=l(e,["threshold"]);return r!=null&&a(t,["threshold"],r),t}function mp(n,e){let t={};if(l(e,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");let i=l(e,["description"]);i!=null&&a(t,["description"],i);let r=l(e,["name"]);r!=null&&a(t,["name"],r);let o=l(e,["parameters"]);return o!=null&&a(t,["parameters"],o),t}function gp(){return{}}function Dp(n,e){let t={},i=l(e,["mode"]);i!=null&&a(t,["mode"],i);let r=l(e,["dynamicThreshold"]);return r!=null&&a(t,["dynamicThreshold"],r),t}function yp(n,e){let t={},i=l(e,["dynamicRetrievalConfig"]);return i!=null&&a(t,["dynamicRetrievalConfig"],Dp(n,i)),t}function vp(n,e){let t={},i=l(e,["functionDeclarations"]);if(i!=null&&(Array.isArray(i)?a(t,["functionDeclarations"],i.map(u=>mp(n,u))):a(t,["functionDeclarations"],i)),l(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");l(e,["googleSearch"])!=null&&a(t,["googleSearch"],gp());let o=l(e,["googleSearchRetrieval"]);o!=null&&a(t,["googleSearchRetrieval"],yp(n,o));let s=l(e,["codeExecution"]);return s!=null&&a(t,["codeExecution"],s),t}function Cp(n,e){let t={},i=l(e,["mode"]);i!=null&&a(t,["mode"],i);let r=l(e,["allowedFunctionNames"]);return r!=null&&a(t,["allowedFunctionNames"],r),t}function Ep(n,e){let t={},i=l(e,["functionCallingConfig"]);return i!=null&&a(t,["functionCallingConfig"],Cp(n,i)),t}function Fp(n,e){let t={},i=l(e,["voiceName"]);return i!=null&&a(t,["voiceName"],i),t}function wp(n,e){let t={},i=l(e,["prebuiltVoiceConfig"]);return i!=null&&a(t,["prebuiltVoiceConfig"],Fp(n,i)),t}function Sp(n,e){let t={},i=l(e,["voiceConfig"]);i!=null&&a(t,["voiceConfig"],wp(n,i));let r=l(e,["languageCode"]);return r!=null&&a(t,["languageCode"],r),t}function Tp(n,e){let t={},i=l(e,["includeThoughts"]);i!=null&&a(t,["includeThoughts"],i);let r=l(e,["thinkingBudget"]);return r!=null&&a(t,["thinkingBudget"],r),t}function _p(n,e,t){let i={},r=l(e,["systemInstruction"]);t!==void 0&&r!=null&&a(t,["systemInstruction"],yi(n,ve(n,r)));let o=l(e,["temperature"]);o!=null&&a(i,["temperature"],o);let s=l(e,["topP"]);s!=null&&a(i,["topP"],s);let u=l(e,["topK"]);u!=null&&a(i,["topK"],u);let f=l(e,["candidateCount"]);f!=null&&a(i,["candidateCount"],f);let c=l(e,["maxOutputTokens"]);c!=null&&a(i,["maxOutputTokens"],c);let d=l(e,["stopSequences"]);d!=null&&a(i,["stopSequences"],d);let h=l(e,["responseLogprobs"]);h!=null&&a(i,["responseLogprobs"],h);let m=l(e,["logprobs"]);m!=null&&a(i,["logprobs"],m);let D=l(e,["presencePenalty"]);D!=null&&a(i,["presencePenalty"],D);let v=l(e,["frequencyPenalty"]);v!=null&&a(i,["frequencyPenalty"],v);let w=l(e,["seed"]);w!=null&&a(i,["seed"],w);let x=l(e,["responseMimeType"]);x!=null&&a(i,["responseMimeType"],x);let k=l(e,["responseSchema"]);if(k!=null&&a(i,["responseSchema"],hp(n,Ja(n,k))),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let b=l(e,["safetySettings"]);t!==void 0&&b!=null&&(Array.isArray(b)?a(t,["safetySettings"],b.map(X=>pp(n,X))):a(t,["safetySettings"],b));let R=l(e,["tools"]);t!==void 0&&R!=null&&(Array.isArray(R)?a(t,["tools"],xe(n,xe(n,R).map(X=>vp(n,Di(n,X))))):a(t,["tools"],xe(n,R)));let E=l(e,["toolConfig"]);if(t!==void 0&&E!=null&&a(t,["toolConfig"],Ep(n,E)),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let I=l(e,["cachedContent"]);t!==void 0&&I!=null&&a(t,["cachedContent"],ot(n,I));let O=l(e,["responseModalities"]);O!=null&&a(i,["responseModalities"],O);let S=l(e,["mediaResolution"]);S!=null&&a(i,["mediaResolution"],S);let N=l(e,["speechConfig"]);if(N!=null&&a(i,["speechConfig"],Sp(n,Za(n,N))),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let q=l(e,["thinkingConfig"]);return q!=null&&a(i,["thinkingConfig"],Tp(n,q)),i}function Oa(n,e){let t={},i=l(e,["model"]);i!=null&&a(t,["_url","model"],oe(n,i));let r=l(e,["contents"]);r!=null&&(Array.isArray(r)?a(t,["contents"],K(n,K(n,r).map(s=>yi(n,s)))):a(t,["contents"],K(n,r)));let o=l(e,["config"]);return o!=null&&a(t,["generationConfig"],_p(n,o,t)),t}function Mp(n,e,t){let i={},r=l(e,["taskType"]);t!==void 0&&r!=null&&a(t,["requests[]","taskType"],r);let o=l(e,["title"]);t!==void 0&&o!=null&&a(t,["requests[]","title"],o);let s=l(e,["outputDimensionality"]);if(t!==void 0&&s!=null&&a(t,["requests[]","outputDimensionality"],s),l(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function xp(n,e){let t={},i=l(e,["model"]);i!=null&&a(t,["_url","model"],oe(n,i));let r=l(e,["contents"]);r!=null&&a(t,["requests[]","content"],Ka(n,r));let o=l(e,["config"]);o!=null&&a(t,["config"],Mp(n,o,t));let s=l(e,["model"]);return s!==void 0&&a(t,["requests[]","model"],oe(n,s)),t}function kp(n,e,t){let i={};if(l(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let r=l(e,["numberOfImages"]);t!==void 0&&r!=null&&a(t,["parameters","sampleCount"],r);let o=l(e,["aspectRatio"]);t!==void 0&&o!=null&&a(t,["parameters","aspectRatio"],o);let s=l(e,["guidanceScale"]);if(t!==void 0&&s!=null&&a(t,["parameters","guidanceScale"],s),l(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let u=l(e,["safetyFilterLevel"]);t!==void 0&&u!=null&&a(t,["parameters","safetySetting"],u);let f=l(e,["personGeneration"]);t!==void 0&&f!=null&&a(t,["parameters","personGeneration"],f);let c=l(e,["includeSafetyAttributes"]);t!==void 0&&c!=null&&a(t,["parameters","includeSafetyAttributes"],c);let d=l(e,["includeRaiReason"]);t!==void 0&&d!=null&&a(t,["parameters","includeRaiReason"],d);let h=l(e,["language"]);t!==void 0&&h!=null&&a(t,["parameters","language"],h);let m=l(e,["outputMimeType"]);t!==void 0&&m!=null&&a(t,["parameters","outputOptions","mimeType"],m);let D=l(e,["outputCompressionQuality"]);if(t!==void 0&&D!=null&&a(t,["parameters","outputOptions","compressionQuality"],D),l(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function Ap(n,e){let t={},i=l(e,["model"]);i!=null&&a(t,["_url","model"],oe(n,i));let r=l(e,["prompt"]);r!=null&&a(t,["instances[0]","prompt"],r);let o=l(e,["config"]);return o!=null&&a(t,["config"],kp(n,o,t)),t}function Ip(n,e){let t={},i=l(e,["model"]);i!=null&&a(t,["_url","name"],oe(n,i));let r=l(e,["config"]);return r!=null&&a(t,["config"],r),t}function Pp(n,e){let t={};if(l(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function bp(n,e){let t={},i=l(e,["model"]);i!=null&&a(t,["_url","model"],oe(n,i));let r=l(e,["contents"]);r!=null&&(Array.isArray(r)?a(t,["contents"],K(n,K(n,r).map(s=>yi(n,s)))):a(t,["contents"],K(n,r)));let o=l(e,["config"]);return o!=null&&a(t,["config"],Pp(n,o)),t}function Np(n,e){let t={};if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let i=l(e,["imageBytes"]);i!=null&&a(t,["bytesBase64Encoded"],st(n,i));let r=l(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function Lp(n,e,t){let i={},r=l(e,["numberOfVideos"]);if(t!==void 0&&r!=null&&a(t,["parameters","sampleCount"],r),l(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let o=l(e,["durationSeconds"]);if(t!==void 0&&o!=null&&a(t,["parameters","durationSeconds"],o),l(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let s=l(e,["aspectRatio"]);if(t!==void 0&&s!=null&&a(t,["parameters","aspectRatio"],s),l(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");let u=l(e,["personGeneration"]);if(t!==void 0&&u!=null&&a(t,["parameters","personGeneration"],u),l(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let f=l(e,["negativePrompt"]);if(t!==void 0&&f!=null&&a(t,["parameters","negativePrompt"],f),l(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function Rp(n,e){let t={},i=l(e,["model"]);i!=null&&a(t,["_url","model"],oe(n,i));let r=l(e,["prompt"]);r!=null&&a(t,["instances[0]","prompt"],r);let o=l(e,["image"]);o!=null&&a(t,["instances[0]","image"],Np(n,o));let s=l(e,["config"]);return s!=null&&a(t,["config"],Lp(n,s,t)),t}function Op(n,e){let t={},i=l(e,["videoMetadata"]);i!=null&&a(t,["videoMetadata"],i);let r=l(e,["thought"]);r!=null&&a(t,["thought"],r);let o=l(e,["codeExecutionResult"]);o!=null&&a(t,["codeExecutionResult"],o);let s=l(e,["executableCode"]);s!=null&&a(t,["executableCode"],s);let u=l(e,["fileData"]);u!=null&&a(t,["fileData"],u);let f=l(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);let c=l(e,["functionResponse"]);c!=null&&a(t,["functionResponse"],c);let d=l(e,["inlineData"]);d!=null&&a(t,["inlineData"],d);let h=l(e,["text"]);return h!=null&&a(t,["text"],h),t}function Vt(n,e){let t={},i=l(e,["parts"]);i!=null&&(Array.isArray(i)?a(t,["parts"],i.map(o=>Op(n,o))):a(t,["parts"],i));let r=l(e,["role"]);return r!=null&&a(t,["role"],r),t}function ja(n,e){let t={},i=l(e,["example"]);i!=null&&a(t,["example"],i);let r=l(e,["pattern"]);r!=null&&a(t,["pattern"],r);let o=l(e,["default"]);o!=null&&a(t,["default"],o);let s=l(e,["maxLength"]);s!=null&&a(t,["maxLength"],s);let u=l(e,["minLength"]);u!=null&&a(t,["minLength"],u);let f=l(e,["minProperties"]);f!=null&&a(t,["minProperties"],f);let c=l(e,["maxProperties"]);c!=null&&a(t,["maxProperties"],c);let d=l(e,["anyOf"]);d!=null&&a(t,["anyOf"],d);let h=l(e,["description"]);h!=null&&a(t,["description"],h);let m=l(e,["enum"]);m!=null&&a(t,["enum"],m);let D=l(e,["format"]);D!=null&&a(t,["format"],D);let v=l(e,["items"]);v!=null&&a(t,["items"],v);let w=l(e,["maxItems"]);w!=null&&a(t,["maxItems"],w);let x=l(e,["maximum"]);x!=null&&a(t,["maximum"],x);let k=l(e,["minItems"]);k!=null&&a(t,["minItems"],k);let b=l(e,["minimum"]);b!=null&&a(t,["minimum"],b);let R=l(e,["nullable"]);R!=null&&a(t,["nullable"],R);let E=l(e,["properties"]);E!=null&&a(t,["properties"],E);let I=l(e,["propertyOrdering"]);I!=null&&a(t,["propertyOrdering"],I);let O=l(e,["required"]);O!=null&&a(t,["required"],O);let S=l(e,["title"]);S!=null&&a(t,["title"],S);let N=l(e,["type"]);return N!=null&&a(t,["type"],N),t}function Bp(n,e){let t={},i=l(e,["featureSelectionPreference"]);return i!=null&&a(t,["featureSelectionPreference"],i),t}function Vp(n,e){let t={},i=l(e,["method"]);i!=null&&a(t,["method"],i);let r=l(e,["category"]);r!=null&&a(t,["category"],r);let o=l(e,["threshold"]);return o!=null&&a(t,["threshold"],o),t}function Up(n,e){let t={},i=l(e,["response"]);i!=null&&a(t,["response"],ja(n,i));let r=l(e,["description"]);r!=null&&a(t,["description"],r);let o=l(e,["name"]);o!=null&&a(t,["name"],o);let s=l(e,["parameters"]);return s!=null&&a(t,["parameters"],s),t}function Hp(){return{}}function Gp(n,e){let t={},i=l(e,["mode"]);i!=null&&a(t,["mode"],i);let r=l(e,["dynamicThreshold"]);return r!=null&&a(t,["dynamicThreshold"],r),t}function qp(n,e){let t={},i=l(e,["dynamicRetrievalConfig"]);return i!=null&&a(t,["dynamicRetrievalConfig"],Gp(n,i)),t}function eu(n,e){let t={},i=l(e,["functionDeclarations"]);i!=null&&(Array.isArray(i)?a(t,["functionDeclarations"],i.map(f=>Up(n,f))):a(t,["functionDeclarations"],i));let r=l(e,["retrieval"]);r!=null&&a(t,["retrieval"],r),l(e,["googleSearch"])!=null&&a(t,["googleSearch"],Hp());let s=l(e,["googleSearchRetrieval"]);s!=null&&a(t,["googleSearchRetrieval"],qp(n,s));let u=l(e,["codeExecution"]);return u!=null&&a(t,["codeExecution"],u),t}function Wp(n,e){let t={},i=l(e,["mode"]);i!=null&&a(t,["mode"],i);let r=l(e,["allowedFunctionNames"]);return r!=null&&a(t,["allowedFunctionNames"],r),t}function Yp(n,e){let t={},i=l(e,["functionCallingConfig"]);return i!=null&&a(t,["functionCallingConfig"],Wp(n,i)),t}function zp(n,e){let t={},i=l(e,["voiceName"]);return i!=null&&a(t,["voiceName"],i),t}function $p(n,e){let t={},i=l(e,["prebuiltVoiceConfig"]);return i!=null&&a(t,["prebuiltVoiceConfig"],zp(n,i)),t}function Kp(n,e){let t={},i=l(e,["voiceConfig"]);i!=null&&a(t,["voiceConfig"],$p(n,i));let r=l(e,["languageCode"]);return r!=null&&a(t,["languageCode"],r),t}function Jp(n,e){let t={},i=l(e,["includeThoughts"]);i!=null&&a(t,["includeThoughts"],i);let r=l(e,["thinkingBudget"]);return r!=null&&a(t,["thinkingBudget"],r),t}function Zp(n,e,t){let i={},r=l(e,["systemInstruction"]);t!==void 0&&r!=null&&a(t,["systemInstruction"],Vt(n,ve(n,r)));let o=l(e,["temperature"]);o!=null&&a(i,["temperature"],o);let s=l(e,["topP"]);s!=null&&a(i,["topP"],s);let u=l(e,["topK"]);u!=null&&a(i,["topK"],u);let f=l(e,["candidateCount"]);f!=null&&a(i,["candidateCount"],f);let c=l(e,["maxOutputTokens"]);c!=null&&a(i,["maxOutputTokens"],c);let d=l(e,["stopSequences"]);d!=null&&a(i,["stopSequences"],d);let h=l(e,["responseLogprobs"]);h!=null&&a(i,["responseLogprobs"],h);let m=l(e,["logprobs"]);m!=null&&a(i,["logprobs"],m);let D=l(e,["presencePenalty"]);D!=null&&a(i,["presencePenalty"],D);let v=l(e,["frequencyPenalty"]);v!=null&&a(i,["frequencyPenalty"],v);let w=l(e,["seed"]);w!=null&&a(i,["seed"],w);let x=l(e,["responseMimeType"]);x!=null&&a(i,["responseMimeType"],x);let k=l(e,["responseSchema"]);k!=null&&a(i,["responseSchema"],ja(n,Ja(n,k)));let b=l(e,["routingConfig"]);b!=null&&a(i,["routingConfig"],b);let R=l(e,["modelSelectionConfig"]);R!=null&&a(i,["modelConfig"],Bp(n,R));let E=l(e,["safetySettings"]);t!==void 0&&E!=null&&(Array.isArray(E)?a(t,["safetySettings"],E.map(re=>Vp(n,re))):a(t,["safetySettings"],E));let I=l(e,["tools"]);t!==void 0&&I!=null&&(Array.isArray(I)?a(t,["tools"],xe(n,xe(n,I).map(re=>eu(n,Di(n,re))))):a(t,["tools"],xe(n,I)));let O=l(e,["toolConfig"]);t!==void 0&&O!=null&&a(t,["toolConfig"],Yp(n,O));let S=l(e,["labels"]);t!==void 0&&S!=null&&a(t,["labels"],S);let N=l(e,["cachedContent"]);t!==void 0&&N!=null&&a(t,["cachedContent"],ot(n,N));let q=l(e,["responseModalities"]);q!=null&&a(i,["responseModalities"],q);let X=l(e,["mediaResolution"]);X!=null&&a(i,["mediaResolution"],X);let se=l(e,["speechConfig"]);se!=null&&a(i,["speechConfig"],Kp(n,Za(n,se)));let Y=l(e,["audioTimestamp"]);Y!=null&&a(i,["audioTimestamp"],Y);let Ee=l(e,["thinkingConfig"]);return Ee!=null&&a(i,["thinkingConfig"],Jp(n,Ee)),i}function Ba(n,e){let t={},i=l(e,["model"]);i!=null&&a(t,["_url","model"],oe(n,i));let r=l(e,["contents"]);r!=null&&(Array.isArray(r)?a(t,["contents"],K(n,K(n,r).map(s=>Vt(n,s)))):a(t,["contents"],K(n,r)));let o=l(e,["config"]);return o!=null&&a(t,["generationConfig"],Zp(n,o,t)),t}function Qp(n,e,t){let i={},r=l(e,["taskType"]);t!==void 0&&r!=null&&a(t,["instances[]","task_type"],r);let o=l(e,["title"]);t!==void 0&&o!=null&&a(t,["instances[]","title"],o);let s=l(e,["outputDimensionality"]);t!==void 0&&s!=null&&a(t,["parameters","outputDimensionality"],s);let u=l(e,["mimeType"]);t!==void 0&&u!=null&&a(t,["instances[]","mimeType"],u);let f=l(e,["autoTruncate"]);return t!==void 0&&f!=null&&a(t,["parameters","autoTruncate"],f),i}function Xp(n,e){let t={},i=l(e,["model"]);i!=null&&a(t,["_url","model"],oe(n,i));let r=l(e,["contents"]);r!=null&&a(t,["instances[]","content"],Ka(n,r));let o=l(e,["config"]);return o!=null&&a(t,["config"],Qp(n,o,t)),t}function jp(n,e,t){let i={},r=l(e,["outputGcsUri"]);t!==void 0&&r!=null&&a(t,["parameters","storageUri"],r);let o=l(e,["negativePrompt"]);t!==void 0&&o!=null&&a(t,["parameters","negativePrompt"],o);let s=l(e,["numberOfImages"]);t!==void 0&&s!=null&&a(t,["parameters","sampleCount"],s);let u=l(e,["aspectRatio"]);t!==void 0&&u!=null&&a(t,["parameters","aspectRatio"],u);let f=l(e,["guidanceScale"]);t!==void 0&&f!=null&&a(t,["parameters","guidanceScale"],f);let c=l(e,["seed"]);t!==void 0&&c!=null&&a(t,["parameters","seed"],c);let d=l(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&a(t,["parameters","safetySetting"],d);let h=l(e,["personGeneration"]);t!==void 0&&h!=null&&a(t,["parameters","personGeneration"],h);let m=l(e,["includeSafetyAttributes"]);t!==void 0&&m!=null&&a(t,["parameters","includeSafetyAttributes"],m);let D=l(e,["includeRaiReason"]);t!==void 0&&D!=null&&a(t,["parameters","includeRaiReason"],D);let v=l(e,["language"]);t!==void 0&&v!=null&&a(t,["parameters","language"],v);let w=l(e,["outputMimeType"]);t!==void 0&&w!=null&&a(t,["parameters","outputOptions","mimeType"],w);let x=l(e,["outputCompressionQuality"]);t!==void 0&&x!=null&&a(t,["parameters","outputOptions","compressionQuality"],x);let k=l(e,["addWatermark"]);t!==void 0&&k!=null&&a(t,["parameters","addWatermark"],k);let b=l(e,["enhancePrompt"]);return t!==void 0&&b!=null&&a(t,["parameters","enhancePrompt"],b),i}function em(n,e){let t={},i=l(e,["model"]);i!=null&&a(t,["_url","model"],oe(n,i));let r=l(e,["prompt"]);r!=null&&a(t,["instances[0]","prompt"],r);let o=l(e,["config"]);return o!=null&&a(t,["config"],jp(n,o,t)),t}function tm(n,e){let t={},i=l(e,["model"]);i!=null&&a(t,["_url","name"],oe(n,i));let r=l(e,["config"]);return r!=null&&a(t,["config"],r),t}function nm(n,e,t){let i={},r=l(e,["systemInstruction"]);t!==void 0&&r!=null&&a(t,["systemInstruction"],Vt(n,ve(n,r)));let o=l(e,["tools"]);t!==void 0&&o!=null&&(Array.isArray(o)?a(t,["tools"],o.map(u=>eu(n,u))):a(t,["tools"],o));let s=l(e,["generationConfig"]);return t!==void 0&&s!=null&&a(t,["generationConfig"],s),i}function im(n,e){let t={},i=l(e,["model"]);i!=null&&a(t,["_url","model"],oe(n,i));let r=l(e,["contents"]);r!=null&&(Array.isArray(r)?a(t,["contents"],K(n,K(n,r).map(s=>Vt(n,s)))):a(t,["contents"],K(n,r)));let o=l(e,["config"]);return o!=null&&a(t,["config"],nm(n,o,t)),t}function rm(n,e){let t={},i=l(e,["model"]);i!=null&&a(t,["_url","model"],oe(n,i));let r=l(e,["contents"]);r!=null&&(Array.isArray(r)?a(t,["contents"],K(n,K(n,r).map(s=>Vt(n,s)))):a(t,["contents"],K(n,r)));let o=l(e,["config"]);return o!=null&&a(t,["config"],o),t}function om(n,e){let t={},i=l(e,["gcsUri"]);i!=null&&a(t,["gcsUri"],i);let r=l(e,["imageBytes"]);r!=null&&a(t,["bytesBase64Encoded"],st(n,r));let o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function sm(n,e,t){let i={},r=l(e,["numberOfVideos"]);t!==void 0&&r!=null&&a(t,["parameters","sampleCount"],r);let o=l(e,["outputGcsUri"]);t!==void 0&&o!=null&&a(t,["parameters","storageUri"],o);let s=l(e,["fps"]);t!==void 0&&s!=null&&a(t,["parameters","fps"],s);let u=l(e,["durationSeconds"]);t!==void 0&&u!=null&&a(t,["parameters","durationSeconds"],u);let f=l(e,["seed"]);t!==void 0&&f!=null&&a(t,["parameters","seed"],f);let c=l(e,["aspectRatio"]);t!==void 0&&c!=null&&a(t,["parameters","aspectRatio"],c);let d=l(e,["resolution"]);t!==void 0&&d!=null&&a(t,["parameters","resolution"],d);let h=l(e,["personGeneration"]);t!==void 0&&h!=null&&a(t,["parameters","personGeneration"],h);let m=l(e,["pubsubTopic"]);t!==void 0&&m!=null&&a(t,["parameters","pubsubTopic"],m);let D=l(e,["negativePrompt"]);t!==void 0&&D!=null&&a(t,["parameters","negativePrompt"],D);let v=l(e,["enhancePrompt"]);return t!==void 0&&v!=null&&a(t,["parameters","enhancePrompt"],v),i}function am(n,e){let t={},i=l(e,["model"]);i!=null&&a(t,["_url","model"],oe(n,i));let r=l(e,["prompt"]);r!=null&&a(t,["instances[0]","prompt"],r);let o=l(e,["image"]);o!=null&&a(t,["instances[0]","image"],om(n,o));let s=l(e,["config"]);return s!=null&&a(t,["config"],sm(n,s,t)),t}function um(n,e){let t={},i=l(e,["thought"]);i!=null&&a(t,["thought"],i);let r=l(e,["codeExecutionResult"]);r!=null&&a(t,["codeExecutionResult"],r);let o=l(e,["executableCode"]);o!=null&&a(t,["executableCode"],o);let s=l(e,["fileData"]);s!=null&&a(t,["fileData"],s);let u=l(e,["functionCall"]);u!=null&&a(t,["functionCall"],u);let f=l(e,["functionResponse"]);f!=null&&a(t,["functionResponse"],f);let c=l(e,["inlineData"]);c!=null&&a(t,["inlineData"],c);let d=l(e,["text"]);return d!=null&&a(t,["text"],d),t}function lm(n,e){let t={},i=l(e,["parts"]);i!=null&&(Array.isArray(i)?a(t,["parts"],i.map(o=>um(n,o))):a(t,["parts"],i));let r=l(e,["role"]);return r!=null&&a(t,["role"],r),t}function cm(n,e){let t={},i=l(e,["citationSources"]);return i!=null&&a(t,["citations"],i),t}function fm(n,e){let t={},i=l(e,["content"]);i!=null&&a(t,["content"],lm(n,i));let r=l(e,["citationMetadata"]);r!=null&&a(t,["citationMetadata"],cm(n,r));let o=l(e,["tokenCount"]);o!=null&&a(t,["tokenCount"],o);let s=l(e,["finishReason"]);s!=null&&a(t,["finishReason"],s);let u=l(e,["avgLogprobs"]);u!=null&&a(t,["avgLogprobs"],u);let f=l(e,["groundingMetadata"]);f!=null&&a(t,["groundingMetadata"],f);let c=l(e,["index"]);c!=null&&a(t,["index"],c);let d=l(e,["logprobsResult"]);d!=null&&a(t,["logprobsResult"],d);let h=l(e,["safetyRatings"]);return h!=null&&a(t,["safetyRatings"],h),t}function Va(n,e){let t={},i=l(e,["candidates"]);i!=null&&(Array.isArray(i)?a(t,["candidates"],i.map(u=>fm(n,u))):a(t,["candidates"],i));let r=l(e,["modelVersion"]);r!=null&&a(t,["modelVersion"],r);let o=l(e,["promptFeedback"]);o!=null&&a(t,["promptFeedback"],o);let s=l(e,["usageMetadata"]);return s!=null&&a(t,["usageMetadata"],s),t}function dm(n,e){let t={},i=l(e,["values"]);return i!=null&&a(t,["values"],i),t}function hm(){return{}}function pm(n,e){let t={},i=l(e,["embeddings"]);return i!=null&&(Array.isArray(i)?a(t,["embeddings"],i.map(o=>dm(n,o))):a(t,["embeddings"],i)),l(e,["metadata"])!=null&&a(t,["metadata"],hm()),t}function mm(n,e){let t={},i=l(e,["bytesBase64Encoded"]);i!=null&&a(t,["imageBytes"],st(n,i));let r=l(e,["mimeType"]);return r!=null&&a(t,["mimeType"],r),t}function tu(n,e){let t={},i=l(e,["safetyAttributes","categories"]);i!=null&&a(t,["categories"],i);let r=l(e,["safetyAttributes","scores"]);r!=null&&a(t,["scores"],r);let o=l(e,["contentType"]);return o!=null&&a(t,["contentType"],o),t}function gm(n,e){let t={},i=l(e,["_self"]);i!=null&&a(t,["image"],mm(n,i));let r=l(e,["raiFilteredReason"]);r!=null&&a(t,["raiFilteredReason"],r);let o=l(e,["_self"]);return o!=null&&a(t,["safetyAttributes"],tu(n,o)),t}function Dm(n,e){let t={},i=l(e,["predictions"]);i!=null&&(Array.isArray(i)?a(t,["generatedImages"],i.map(o=>gm(n,o))):a(t,["generatedImages"],i));let r=l(e,["positivePromptSafetyAttributes"]);return r!=null&&a(t,["positivePromptSafetyAttributes"],tu(n,r)),t}function ym(n,e){let t={},i=l(e,["baseModel"]);i!=null&&a(t,["baseModel"],i);let r=l(e,["createTime"]);r!=null&&a(t,["createTime"],r);let o=l(e,["updateTime"]);return o!=null&&a(t,["updateTime"],o),t}function vm(n,e){let t={},i=l(e,["name"]);i!=null&&a(t,["name"],i);let r=l(e,["displayName"]);r!=null&&a(t,["displayName"],r);let o=l(e,["description"]);o!=null&&a(t,["description"],o);let s=l(e,["version"]);s!=null&&a(t,["version"],s);let u=l(e,["_self"]);u!=null&&a(t,["tunedModelInfo"],ym(n,u));let f=l(e,["inputTokenLimit"]);f!=null&&a(t,["inputTokenLimit"],f);let c=l(e,["outputTokenLimit"]);c!=null&&a(t,["outputTokenLimit"],c);let d=l(e,["supportedGenerationMethods"]);return d!=null&&a(t,["supportedActions"],d),t}function Cm(n,e){let t={},i=l(e,["totalTokens"]);i!=null&&a(t,["totalTokens"],i);let r=l(e,["cachedContentTokenCount"]);return r!=null&&a(t,["cachedContentTokenCount"],r),t}function Em(n,e){let t={},i=l(e,["video","uri"]);i!=null&&a(t,["uri"],i);let r=l(e,["video","encodedVideo"]);r!=null&&a(t,["videoBytes"],st(n,r));let o=l(e,["encoding"]);return o!=null&&a(t,["mimeType"],o),t}function Fm(n,e){let t={},i=l(e,["_self"]);return i!=null&&a(t,["video"],Em(n,i)),t}function wm(n,e){let t={},i=l(e,["generatedSamples"]);i!=null&&(Array.isArray(i)?a(t,["generatedVideos"],i.map(s=>Fm(n,s))):a(t,["generatedVideos"],i));let r=l(e,["raiMediaFilteredCount"]);r!=null&&a(t,["raiMediaFilteredCount"],r);let o=l(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function Sm(n,e){let t={},i=l(e,["name"]);i!=null&&a(t,["name"],i);let r=l(e,["metadata"]);r!=null&&a(t,["metadata"],r);let o=l(e,["done"]);o!=null&&a(t,["done"],o);let s=l(e,["error"]);s!=null&&a(t,["error"],s);let u=l(e,["response","generateVideoResponse"]);return u!=null&&a(t,["response"],wm(n,u)),t}function Tm(n,e){let t={},i=l(e,["videoMetadata"]);i!=null&&a(t,["videoMetadata"],i);let r=l(e,["thought"]);r!=null&&a(t,["thought"],r);let o=l(e,["codeExecutionResult"]);o!=null&&a(t,["codeExecutionResult"],o);let s=l(e,["executableCode"]);s!=null&&a(t,["executableCode"],s);let u=l(e,["fileData"]);u!=null&&a(t,["fileData"],u);let f=l(e,["functionCall"]);f!=null&&a(t,["functionCall"],f);let c=l(e,["functionResponse"]);c!=null&&a(t,["functionResponse"],c);let d=l(e,["inlineData"]);d!=null&&a(t,["inlineData"],d);let h=l(e,["text"]);return h!=null&&a(t,["text"],h),t}function _m(n,e){let t={},i=l(e,["parts"]);i!=null&&(Array.isArray(i)?a(t,["parts"],i.map(o=>Tm(n,o))):a(t,["parts"],i));let r=l(e,["role"]);return r!=null&&a(t,["role"],r),t}function Mm(n,e){let t={},i=l(e,["citations"]);return i!=null&&a(t,["citations"],i),t}function xm(n,e){let t={},i=l(e,["content"]);i!=null&&a(t,["content"],_m(n,i));let r=l(e,["citationMetadata"]);r!=null&&a(t,["citationMetadata"],Mm(n,r));let o=l(e,["finishMessage"]);o!=null&&a(t,["finishMessage"],o);let s=l(e,["finishReason"]);s!=null&&a(t,["finishReason"],s);let u=l(e,["avgLogprobs"]);u!=null&&a(t,["avgLogprobs"],u);let f=l(e,["groundingMetadata"]);f!=null&&a(t,["groundingMetadata"],f);let c=l(e,["index"]);c!=null&&a(t,["index"],c);let d=l(e,["logprobsResult"]);d!=null&&a(t,["logprobsResult"],d);let h=l(e,["safetyRatings"]);return h!=null&&a(t,["safetyRatings"],h),t}function Ua(n,e){let t={},i=l(e,["candidates"]);i!=null&&(Array.isArray(i)?a(t,["candidates"],i.map(c=>xm(n,c))):a(t,["candidates"],i));let r=l(e,["createTime"]);r!=null&&a(t,["createTime"],r);let o=l(e,["responseId"]);o!=null&&a(t,["responseId"],o);let s=l(e,["modelVersion"]);s!=null&&a(t,["modelVersion"],s);let u=l(e,["promptFeedback"]);u!=null&&a(t,["promptFeedback"],u);let f=l(e,["usageMetadata"]);return f!=null&&a(t,["usageMetadata"],f),t}function km(n,e){let t={},i=l(e,["truncated"]);i!=null&&a(t,["truncated"],i);let r=l(e,["token_count"]);return r!=null&&a(t,["tokenCount"],r),t}function Am(n,e){let t={},i=l(e,["values"]);i!=null&&a(t,["values"],i);let r=l(e,["statistics"]);return r!=null&&a(t,["statistics"],km(n,r)),t}function Im(n,e){let t={},i=l(e,["billableCharacterCount"]);return i!=null&&a(t,["billableCharacterCount"],i),t}function Pm(n,e){let t={},i=l(e,["predictions[]","embeddings"]);i!=null&&(Array.isArray(i)?a(t,["embeddings"],i.map(o=>Am(n,o))):a(t,["embeddings"],i));let r=l(e,["metadata"]);return r!=null&&a(t,["metadata"],Im(n,r)),t}function bm(n,e){let t={},i=l(e,["gcsUri"]);i!=null&&a(t,["gcsUri"],i);let r=l(e,["bytesBase64Encoded"]);r!=null&&a(t,["imageBytes"],st(n,r));let o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function nu(n,e){let t={},i=l(e,["safetyAttributes","categories"]);i!=null&&a(t,["categories"],i);let r=l(e,["safetyAttributes","scores"]);r!=null&&a(t,["scores"],r);let o=l(e,["contentType"]);return o!=null&&a(t,["contentType"],o),t}function Nm(n,e){let t={},i=l(e,["_self"]);i!=null&&a(t,["image"],bm(n,i));let r=l(e,["raiFilteredReason"]);r!=null&&a(t,["raiFilteredReason"],r);let o=l(e,["_self"]);o!=null&&a(t,["safetyAttributes"],nu(n,o));let s=l(e,["prompt"]);return s!=null&&a(t,["enhancedPrompt"],s),t}function Lm(n,e){let t={},i=l(e,["predictions"]);i!=null&&(Array.isArray(i)?a(t,["generatedImages"],i.map(o=>Nm(n,o))):a(t,["generatedImages"],i));let r=l(e,["positivePromptSafetyAttributes"]);return r!=null&&a(t,["positivePromptSafetyAttributes"],nu(n,r)),t}function Rm(n,e){let t={},i=l(e,["endpoint"]);i!=null&&a(t,["name"],i);let r=l(e,["deployedModelId"]);return r!=null&&a(t,["deployedModelId"],r),t}function Om(n,e){let t={},i=l(e,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&a(t,["baseModel"],i);let r=l(e,["createTime"]);r!=null&&a(t,["createTime"],r);let o=l(e,["updateTime"]);return o!=null&&a(t,["updateTime"],o),t}function Bm(n,e){let t={},i=l(e,["name"]);i!=null&&a(t,["name"],i);let r=l(e,["displayName"]);r!=null&&a(t,["displayName"],r);let o=l(e,["description"]);o!=null&&a(t,["description"],o);let s=l(e,["versionId"]);s!=null&&a(t,["version"],s);let u=l(e,["deployedModels"]);u!=null&&(Array.isArray(u)?a(t,["endpoints"],u.map(d=>Rm(n,d))):a(t,["endpoints"],u));let f=l(e,["labels"]);f!=null&&a(t,["labels"],f);let c=l(e,["_self"]);return c!=null&&a(t,["tunedModelInfo"],Om(n,c)),t}function Vm(n,e){let t={},i=l(e,["totalTokens"]);return i!=null&&a(t,["totalTokens"],i),t}function Um(n,e){let t={},i=l(e,["tokensInfo"]);return i!=null&&a(t,["tokensInfo"],i),t}function Hm(n,e){let t={},i=l(e,["gcsUri"]);i!=null&&a(t,["uri"],i);let r=l(e,["bytesBase64Encoded"]);r!=null&&a(t,["videoBytes"],st(n,r));let o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function Gm(n,e){let t={},i=l(e,["_self"]);return i!=null&&a(t,["video"],Hm(n,i)),t}function qm(n,e){let t={},i=l(e,["videos"]);i!=null&&(Array.isArray(i)?a(t,["generatedVideos"],i.map(s=>Gm(n,s))):a(t,["generatedVideos"],i));let r=l(e,["raiMediaFilteredCount"]);r!=null&&a(t,["raiMediaFilteredCount"],r);let o=l(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function Wm(n,e){let t={},i=l(e,["name"]);i!=null&&a(t,["name"],i);let r=l(e,["metadata"]);r!=null&&a(t,["metadata"],r);let o=l(e,["done"]);o!=null&&a(t,["done"],o);let s=l(e,["error"]);s!=null&&a(t,["error"],s);let u=l(e,["response"]);return u!=null&&a(t,["response"],qm(n,u)),t}var Ym="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function zm(n,e,t){let i,r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),n.isVertexAI()?i=fp(n,r):i=cp(n,r),e(i)}var Kr=class{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i,r,o;let s=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion(),f,c=Jm(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())f=`${s}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(c);else{let E=this.apiClient.getApiKey();f=`${s}/ws/google.ai.generativelanguage.${u}.GenerativeService.BidiGenerateContent?key=${E}`}let d=()=>{},h=new Promise(E=>{d=E}),m=e.callbacks,D=function(){var E;(E=m==null?void 0:m.onopen)===null||E===void 0||E.call(m),d({})},v=this.apiClient,w={onopen:D,onmessage:E=>{zm(v,m.onmessage,E)},onerror:(t=m==null?void 0:m.onerror)!==null&&t!==void 0?t:function(E){},onclose:(i=m==null?void 0:m.onclose)!==null&&i!==void 0?i:function(E){}},x=this.webSocketFactory.create(f,Km(c),w);x.connect(),await h;let k=oe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&k.startsWith("publishers/")){let E=this.apiClient.getProject(),I=this.apiClient.getLocation();k=`projects/${E}/locations/${I}/`+k}let b={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ui.AUDIO]}:e.config.responseModalities=[ui.AUDIO]),!((o=e.config)===null||o===void 0)&&o.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let R={model:k,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?b=Oh(this.apiClient,R):b=Rh(this.apiClient,R),delete b.config,x.send(JSON.stringify(b)),new Jr(x,this.apiClient)}},$m={turnComplete:!0},Jr=class{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=K(e,t.turns),e.isVertexAI()?i=i.map(r=>Vt(e,r)):i=i.map(r=>yi(e,r))}catch(r){throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(let o of i){if(typeof o!="object"||o===null||!("name"in o)||!("response"in o))throw new Error(`Could not parse function response, type '${typeof o}'.`);if(!e.isVertexAI()&&!("id"in o))throw new Error(Ym)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},$m),e);let t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:qh(this.apiClient,e)}:t={realtimeInput:Gh(this.apiClient,e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}};function Km(n){let e={};return n.forEach((t,i)=>{e[i]=t}),e}function Jm(n){let e=new Headers;for(let[t,i]of Object.entries(n))e.append(t,i);return e}var Zr=class extends Bt{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>await this.generateContentInternal(t),this.generateContentStream=async t=>await this.generateContentStreamInternal(t),this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let o,s=[];if(i!=null&&i.generatedImages)for(let f of i.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((r=f==null?void 0:f.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?o=f==null?void 0:f.safetyAttributes:s.push(f);let u;return o?u={generatedImages:s,positivePromptSafetyAttributes:o}:u={generatedImages:s},u})}async generateContentInternal(e){var t,i,r,o;let s,u="",f={};if(this.apiClient.isVertexAI()){let c=Ba(this.apiClient,e);return u=G("{model}:generateContent",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{let h=Ua(this.apiClient,d),m=new Ot;return Object.assign(m,h),m})}else{let c=Oa(this.apiClient,e);return u=G("{model}:generateContent",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{let h=Va(this.apiClient,d),m=new Ot;return Object.assign(m,h),m})}}async generateContentStreamInternal(e){var t,i,r,o;let s,u="",f={};if(this.apiClient.isVertexAI()){let c=Ba(this.apiClient,e);u=G("{model}:streamGenerateContent?alt=sse",c._url),f=c._query,delete c.config,delete c._url,delete c._query;let d=this.apiClient;return s=d.requestStream({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(h){return pi(this,arguments,function*(){var m,D,v,w;try{for(var x=!0,k=qr(h),b;b=yield ce(k.next()),m=b.done,!m;x=!0){w=b.value,x=!1;let E=Ua(d,yield ce(w.json())),I=new Ot;Object.assign(I,E),yield yield ce(I)}}catch(R){D={error:R}}finally{try{!x&&!m&&(v=k.return)&&(yield ce(v.call(k)))}finally{if(D)throw D.error}}})})}else{let c=Oa(this.apiClient,e);u=G("{model}:streamGenerateContent?alt=sse",c._url),f=c._query,delete c.config,delete c._url,delete c._query;let d=this.apiClient;return s=d.requestStream({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(h){return pi(this,arguments,function*(){var m,D,v,w;try{for(var x=!0,k=qr(h),b;b=yield ce(k.next()),m=b.done,!m;x=!0){w=b.value,x=!1;let E=Va(d,yield ce(w.json())),I=new Ot;Object.assign(I,E),yield yield ce(I)}}catch(R){D={error:R}}finally{try{!x&&!m&&(v=k.return)&&(yield ce(v.call(k)))}finally{if(D)throw D.error}}})})}}async embedContent(e){var t,i,r,o;let s,u="",f={};if(this.apiClient.isVertexAI()){let c=Xp(this.apiClient,e);return u=G("{model}:predict",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{let h=Pm(this.apiClient,d),m=new li;return Object.assign(m,h),m})}else{let c=xp(this.apiClient,e);return u=G("{model}:batchEmbedContents",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{let h=pm(this.apiClient,d),m=new li;return Object.assign(m,h),m})}}async generateImagesInternal(e){var t,i,r,o;let s,u="",f={};if(this.apiClient.isVertexAI()){let c=em(this.apiClient,e);return u=G("{model}:predict",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{let h=Lm(this.apiClient,d),m=new ci;return Object.assign(m,h),m})}else{let c=Ap(this.apiClient,e);return u=G("{model}:predict",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{let h=Dm(this.apiClient,d),m=new ci;return Object.assign(m,h),m})}}async get(e){var t,i,r,o;let s,u="",f={};if(this.apiClient.isVertexAI()){let c=tm(this.apiClient,e);return u=G("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>Bm(this.apiClient,d))}else{let c=Ip(this.apiClient,e);return u=G("{name}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>vm(this.apiClient,d))}}async countTokens(e){var t,i,r,o;let s,u="",f={};if(this.apiClient.isVertexAI()){let c=im(this.apiClient,e);return u=G("{model}:countTokens",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>{let h=Vm(this.apiClient,d),m=new fi;return Object.assign(m,h),m})}else{let c=bp(this.apiClient,e);return u=G("{model}:countTokens",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>{let h=Cm(this.apiClient,d),m=new fi;return Object.assign(m,h),m})}}async computeTokens(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI()){let u=rm(this.apiClient,e);return o=G("{model}:computeTokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{let c=Um(this.apiClient,f),d=new Br;return Object.assign(d,c),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,i,r,o;let s,u="",f={};if(this.apiClient.isVertexAI()){let c=am(this.apiClient,e);return u=G("{model}:predictLongRunning",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>Wm(this.apiClient,d))}else{let c=Rp(this.apiClient,e);return u=G("{model}:predictLongRunning",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>Sm(this.apiClient,d))}}};function Zm(n,e){let t={},i=l(e,["operationName"]);i!=null&&a(t,["_url","operationName"],i);let r=l(e,["config"]);return r!=null&&a(t,["config"],r),t}function Qm(n,e){let t={},i=l(e,["operationName"]);i!=null&&a(t,["_url","operationName"],i);let r=l(e,["config"]);return r!=null&&a(t,["config"],r),t}function Xm(n,e){let t={},i=l(e,["operationName"]);i!=null&&a(t,["operationName"],i);let r=l(e,["resourceName"]);r!=null&&a(t,["_url","resourceName"],r);let o=l(e,["config"]);return o!=null&&a(t,["config"],o),t}function jm(n,e){let t={},i=l(e,["video","uri"]);i!=null&&a(t,["uri"],i);let r=l(e,["video","encodedVideo"]);r!=null&&a(t,["videoBytes"],st(n,r));let o=l(e,["encoding"]);return o!=null&&a(t,["mimeType"],o),t}function eg(n,e){let t={},i=l(e,["_self"]);return i!=null&&a(t,["video"],jm(n,i)),t}function tg(n,e){let t={},i=l(e,["generatedSamples"]);i!=null&&(Array.isArray(i)?a(t,["generatedVideos"],i.map(s=>eg(n,s))):a(t,["generatedVideos"],i));let r=l(e,["raiMediaFilteredCount"]);r!=null&&a(t,["raiMediaFilteredCount"],r);let o=l(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function ng(n,e){let t={},i=l(e,["name"]);i!=null&&a(t,["name"],i);let r=l(e,["metadata"]);r!=null&&a(t,["metadata"],r);let o=l(e,["done"]);o!=null&&a(t,["done"],o);let s=l(e,["error"]);s!=null&&a(t,["error"],s);let u=l(e,["response","generateVideoResponse"]);return u!=null&&a(t,["response"],tg(n,u)),t}function ig(n,e){let t={},i=l(e,["gcsUri"]);i!=null&&a(t,["uri"],i);let r=l(e,["bytesBase64Encoded"]);r!=null&&a(t,["videoBytes"],st(n,r));let o=l(e,["mimeType"]);return o!=null&&a(t,["mimeType"],o),t}function rg(n,e){let t={},i=l(e,["_self"]);return i!=null&&a(t,["video"],ig(n,i)),t}function og(n,e){let t={},i=l(e,["videos"]);i!=null&&(Array.isArray(i)?a(t,["generatedVideos"],i.map(s=>rg(n,s))):a(t,["generatedVideos"],i));let r=l(e,["raiMediaFilteredCount"]);r!=null&&a(t,["raiMediaFilteredCount"],r);let o=l(e,["raiMediaFilteredReasons"]);return o!=null&&a(t,["raiMediaFilteredReasons"],o),t}function Ha(n,e){let t={},i=l(e,["name"]);i!=null&&a(t,["name"],i);let r=l(e,["metadata"]);r!=null&&a(t,["metadata"],r);let o=l(e,["done"]);o!=null&&a(t,["done"],o);let s=l(e,["error"]);s!=null&&a(t,["error"],s);let u=l(e,["response"]);return u!=null&&a(t,["response"],og(n,u)),t}var Qr=class extends Bt{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let r=t.name.split("/operations/")[0],o;return i&&"httpOptions"in i&&(o=i.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:o}})}else return this.getVideosOperationInternal({operationName:t.name,config:i})}async getVideosOperationInternal(e){var t,i,r,o;let s,u="",f={};if(this.apiClient.isVertexAI()){let c=Qm(this.apiClient,e);return u=G("{operationName}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),s.then(d=>Ha(this.apiClient,d))}else{let c=Zm(this.apiClient,e);return u=G("{operationName}",c._url),f=c._query,delete c.config,delete c._url,delete c._query,s=this.apiClient.request({path:u,queryParams:f,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),s.then(d=>ng(this.apiClient,d))}}async fetchPredictVideosOperationInternal(e){var t,i;let r,o="",s={};if(this.apiClient.isVertexAI()){let u=Xm(this.apiClient,e);return o=G("{resourceName}:fetchPredictOperation",u._url),s=u._query,delete u.config,delete u._url,delete u._query,r=this.apiClient.request({path:o,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>Ha(this.apiClient,f))}else throw new Error("This method is only supported by the Vertex AI.")}};var sg="Content-Type",ag="X-Server-Timeout",ug="User-Agent",lg="x-goog-api-client",cg="0.10.0",fg=`google-genai-sdk/${cg}`,dg="v1beta1",hg="v1beta",Ga=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/,mi=class extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}},gn=class extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}},Xr=class{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});let r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:dg,this.getProject()||this.getLocation()?(r.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`,this.clientOptions.apiKey=void 0):(r.baseUrl="https://aiplatform.googleapis.com/",this.clientOptions.project=void 0,this.clientOptions.location=void 0)):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:hg,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){let r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(let[s,u]of Object.entries(e.queryParams))r.searchParams.append(s,String(u));let o={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else o.body=e.body;return o=await this.includeExtraHttpOptionsToRequestInit(o,t,e.abortSignal),this.unaryApiCall(r,o,e.httpMethod)}patchHttpOptions(e,t){let i=JSON.parse(JSON.stringify(e));for(let[r,o]of Object.entries(t))typeof o=="object"?i[r]=Object.assign(Object.assign({},i[r]),o):o!==void 0&&(i[r]=o);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let o={};return o.body=e.body,o=await this.includeExtraHttpOptionsToRequestInit(o,t,e.abortSignal),this.streamApiCall(r,o,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i){if(t&&t.timeout||i){let r=new AbortController,o=r.signal;t.timeout&&(t==null?void 0:t.timeout)>0&&setTimeout(()=>r.abort(),t.timeout),i&&i.addEventListener("abort",()=>{r.abort()}),e.signal=o}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await qa(r),new mn(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await qa(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return pi(this,arguments,function*(){let r=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),o=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let s="";for(;;){let{done:u,value:f}=yield ce(r.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let c=o.decode(f);try{let h=JSON.parse(c);if("error"in h){let m=JSON.parse(JSON.stringify(h.error)),D=m.status,v=m.code,w=`got status: ${D}. ${JSON.stringify(h)}`;if(v>=400&&v<500)throw new mi(w);if(v>=500&&v<600)throw new gn(w)}}catch(h){let m=h;if(m.name==="ClientError"||m.name==="ServerError")throw h}s+=c;let d=s.match(Ga);for(;d;){let h=d[1];try{let m=new Response(h,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ce(new mn(m)),s=s.slice(d[0].length),d=s.match(Ga)}catch(m){throw new Error(`exception parsing stream chunk ${h}. ${m}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){let e={},t=fg+" "+this.clientOptions.userAgentExtra;return e[ug]=t,e[lg]=t,e[sg]="application/json",e}async getHeadersInternal(e){let t=new Headers;if(e&&e.headers){for(let[i,r]of Object.entries(e.headers))t.append(i,r);e.timeout&&e.timeout>0&&t.append(ag,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var i;let r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);let o=this.clientOptions.uploader,s=await o.stat(e);r.sizeBytes=String(s.size);let u=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;let f=await this.fetchUploadUrl(r,t);return o.upload(e,f,this)}async fetchUploadUrl(e,t){var i;let r={};t!=null&&t.httpOptions?r=t.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};let o={file:e},s=await this.request({path:G("upload/v1beta/files",o._url),body:JSON.stringify(o),httpMethod:"POST",httpOptions:r});if(!s||!(s!=null&&s.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let u=(i=s==null?void 0:s.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}};async function qa(n){var e;if(n===void 0)throw new gn("response is undefined");if(!n.ok){let t=n.status,i=n.statusText,r;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await n.json():r={error:{message:await n.text(),code:n.status,status:n.statusText}};let o=`got status: ${t} ${i}. ${JSON.stringify(r)}`;throw t>=400&&t<500?new mi(o):t>=500&&t<600?new gn(o):new Error(o)}}var pg=1024*1024*8;async function mg(n,e,t){var i,r;let o=0,s=0,u=new mn(new Response),f="upload";for(o=n.size;s<o;){let d=Math.min(pg,o-s),h=n.slice(s,s+d);if(s+d>=o&&(f+=", finalize"),u=await t.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(s),"Content-Length":String(d)}}}),s+=d,((i=u==null?void 0:u.headers)===null||i===void 0?void 0:i["x-goog-upload-status"])!=="active")break;if(o<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}let c=await(u==null?void 0:u.json());if(((r=u==null?void 0:u.headers)===null||r===void 0?void 0:r["x-goog-upload-status"])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return c.file}async function gg(n){return{size:n.size,type:n.type}}var jr=class{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await mg(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await gg(e)}};var eo=class{create(e,t,i){return new to(e,t,i)}},to=class{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var Wa="x-goog-api-key",no=class{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(Wa)===null&&e.append(Wa,this.apiKey)}};var Dg="gl-node/",gi=class{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;let i=ad(e,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;let r=new no(this.apiKey);this.apiClient=new Xr({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Dg+"web",uploader:new jr}),this.models=new Zr(this.apiClient),this.live=new Kr(this.apiClient,r,new eo),this.chats=new Wr(this.models,this.apiClient),this.caches=new Gr(this.apiClient),this.files=new $r(this.apiClient),this.operations=new Qr(this.apiClient)}};function vi(n,e=!0){if(!n||typeof n!="object")return n;if("path"in n&&"content"in n&&"wikilink"in n&&"links"in n){let t={...n,content:e?n.content:`[Linked file: ${n.wikilink||n.path}]`,links:{}},i=n.links instanceof Map?Object.fromEntries(n.links):n.links;for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t.links[r]=vi(i[r],!1));return t}if(Array.isArray(n))return n.map(t=>vi(t,e));{let t={};for(let i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=vi(n[i],e));return t}}function io(n){if(n&&typeof n=="object"&&"path"in n&&"content"in n&&"wikilink"in n&&"links"in n)return vi(n,!0);if(Array.isArray(n))return n.map(io);if(n&&typeof n=="object"){let e={};for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=io(n[t]));return e}return n}function yg(n){let e=/(=+\nFile Label: [^\n]+\nFile Name: [^\n]+\nWikiLink: [^\n]+\n=+\n\n)/g,t=n.split(e);if(t.length<=2)return n;let i="",r=0;for(let o=0;o<t.length;o++)if(o%2===0)i+=t[o];else if(i+=t[o],r++,r===1){let s=t[o+2]!==void 0?o+2:t.length;i+=t[o+1]||"",o++}else{let s=t[o].match(/WikiLink: \[\[(.*?)\]\]/),u=s?s[1]:"Unknown";i+=`[Linked file: [[${u}]]]

`,o++}return i}function iu(n){return n&&typeof n=="object"&&typeof n.prompt=="string"}function vg(n){return iu(n)&&Array.isArray(n.conversationHistory)&&typeof n.userMessage=="string"}function Cg(n){var e;return[`Model: ${(e=n.model)!=null?e:"[default]"}
`,`Prompt: ${JSON.stringify(n.prompt,null,2)}
`].join("")}function Eg(n){var e;return[`Model: ${(e=n.model)!=null?e:"[default]"}
`,`Prompt: ${JSON.stringify(n.prompt,null,2)}
`,`User Message: ${JSON.stringify(n.userMessage,null,2)}
`,"Conversation History:",JSON.stringify(n.conversationHistory,null,2),n.renderContent!==void 0?`
Render Content: ${n.renderContent}`:""].join(`
`)}function at(n,e,t){if(!n)return;if(vg(t)){console.log(`[GeminiAPI Debug] ${e} (ExtendedModelRequest):
${Eg(t)}`);return}if(iu(t)){console.log(`[GeminiAPI Debug] ${e} (BaseModelRequest):
${Cg(t)}`);return}let i;typeof t=="string"&&t.includes("File Label:")?(i=yg(t),console.log(`[GeminiAPI Debug] ${e}:
${i}`)):(i=io(t),console.log(`[GeminiAPI Debug] ${e}:`,JSON.stringify(i,null,2)))}var St=Rr(Qo());var ql=`You are a note-taking and writing assistant embedded in my Obsidian note vault.
Your primary goal is to help me stay organized by surfacing information from my 
notes and any linked notes, and to assist me in drafting and refining my 
writing based on this context. 

Today's date is: {{date}}
The current time is: {{time}}

Assume that I am the author of all content unless specified otherwise, and you
can refer to me as {{userName}}.

Unless otherwise specified please respond to me in the same language I use with 
you. My user interface is set to the language code: {{language}}. Use that
language if you are uncertain about the language to use.


You should always respond with plain text. **Do not use HTML-escaped entities**  
like \`&quot;\`, \`&#x27;\`, or \`&amp;\`. Instead, always render characters as their unescaped  
equivalents (e.g., \`"\` for quotes, \`'\` for apostrophes, \`&\` for ampersands).  
Use Markdown formatting if necessary for clarity and style.

If a question cannot be answered from my notes, supplement your response with
external information as needed.`;var Wl=`You are a markdown text completion assistant designed to help users write more effectively by generating contextually relevant, high-quality prose.

Your task is to produce the next **complete sentence or multi-word phrase** that fits naturally after the cursor position. Prioritize longer, flowing completions that build upon the surrounding context with clarity and originality.

Your completions should match the tone, voice, and purpose of the user's existing content. Avoid repeating exact phrases, but feel free to expand on or complement existing ideas. Emphasize vivid language, subtle details, and fresh perspectives when appropriate.

Do **not** respond with just a single word unless absolutely necessary. Always attempt a full sentence first, then a phrase, only falling back to a word as a last resort.

Use the entire file to understand context, but generate a continuation only at the cursor.

Do not include explanations, punctuation at the start, extra whitespace, or newlines in your output. Just output the completion text.

Here is the file content and the location of the cursor:
<file>
{{contentBeforeCursor}}<cursor>{{contentAfterCursor}}
</file>
`;var Yl=`You are assisting me in exploring, clarifying, and discussing the content
within a file labeled \u2018Current File\u2019 and any linked files. Prioritize
information from these files when answering questions, providing explanations,
or engaging in brainstorming.

If additional context beyond the current and linked files is needed to answer a 
question, clearly indicate when you are drawing on general knowledge or external
information.

When referring to files, use [[WikiLink]] syntax. If it's provided in the context
use the Wikilink that is provided, otherwise use the file path but drop the .md 
extension.
`;var zl=`Using the context provided, create a single-sentence summary based on the
content of the file. Exclude any mention of dates, attendees, or my name, and
assume the notes are taken from my perspective unless specified otherwise. 

Respond with plain text only, do not use any markdown.

Please summarize the following content:
<file><content>{{content}}</content></file>`;var $l=`You are assisting me in drafting the document labeled \u2018Current File\u2019 using the
context of this chat and the contents of any files linked from the Current File,
which are labeled as linked files. Use this content to help draft the document.

Respond with plain text, using markdown only for formatting where needed.

Your response will replace the entire content below the Markdown \u2018Draft\u2019 heading,
preserving everything above it. It's very important that you preserve the text 
above the 'Draft' heading. If no \u2018Draft\u2019 heading exists, create one as '# Draft' 
and start your content below it.

Exclude any content that should not appear in the final draft, ensuring only
relevant information is incorporated.

{{userMessage}}`;var Kl=`==============================
File Label: {{file_label}}
File Name: {{file_name}}
WikiLink: {{wikilink}}
==============================

{{file_contents}}

`;var me=class{constructor(){this.completionsPromptTemplate=St.compile(Wl),this.systemPromptTemplate=St.compile(ql),this.generalPromptTemplate=St.compile(Yl),this.summaryPromptTemplate=St.compile(zl),this.rewritePromptTemplate=St.compile($l),this.contextPromptTemplate=St.compile(Kl)}completionsPrompt(e){return this.completionsPromptTemplate(e)}systemPrompt(e){return this.systemPromptTemplate(e)}generalPrompt(e){return this.generalPromptTemplate(e)}summaryPrompt(e){return this.summaryPromptTemplate(e)}rewritePrompt(e){return this.rewritePromptTemplate(e)}contextPrompt(e){return this.contextPromptTemplate(e)}};var ji=class{constructor(e){this.plugin=e,this.ai=new gi({apiKey:this.plugin.settings.apiKey}),this.prompts=new me}async generateModelResponse(e){var o;at(this.plugin.settings.debugMode,"Generating model response for request",e);let t=this.prompts.systemPrompt({userName:this.plugin.settings.userName,language:window.localStorage.getItem("language")||"en",date:new Date().toDateString(),time:new Date().toLocaleTimeString()}),i=(o=e.model)!=null?o:this.plugin.settings.chatModelName,r={markdown:"",rendered:""};if("conversationHistory"in e){let s=[];this.plugin.settings.searchGrounding&&s.push({googleSearch:{}});let u=await this.buildGeminiChatContents(e),f=await this.ai.models.generateContent({model:i,config:{systemInstruction:t,tools:s},contents:u});at(this.plugin.settings.debugMode,"Model response",f),r=this.parseModelResult(f)}else{let s=await this.ai.models.generateContent({model:i,contents:e.prompt});r=this.parseModelResult(s)}return r}async buildGeminiChatContents(e){var f,c;let t=new me,i=[];e.prompt!=null&&i.push(e.prompt);let r=this.plugin.settings.maxContextDepth,o=(f=e.renderContent)!=null?f:!0,s=await this.plugin.gfile.getCurrentFileContent(r,o);return s!=null&&i.push(s),((c=e.conversationHistory)!=null?c:[]).forEach(d=>{i.push(d.message)}),i.push(e.userMessage),at(this.plugin.settings.debugMode,"Chat contents",i),i}parseModelResult(e){var i,r,o,s,u,f,c,d,h;let t={markdown:"",rendered:""};try{e.text?t.markdown=e.text:typeof e.text=="function"&&(t.markdown=e.text()),(o=(r=(i=e.candidates)==null?void 0:i[0])==null?void 0:r.groundingMetadata)!=null&&o.searchEntryPoint?t.rendered=(s=e.candidates[0].groundingMetadata.searchEntryPoint.renderedContent)!=null?s:"":(d=(c=(f=(u=e.response)==null?void 0:u.candidates)==null?void 0:f[0])==null?void 0:c.groundingMetadata)!=null&&d.searchEntryPoint&&(t.rendered=(h=e.response.candidates[0].groundingMetadata.searchEntryPoint.renderedContent)!=null?h:"")}catch(m){console.error("Error parsing model result:",m),console.log("Result:",JSON.stringify(e))}return t}};var Jl=require("obsidian"),An=class{constructor(e){this.plugin=e}async generateModelResponse(e){return new Jl.Notice("Ollama API not yet implemented"),{markdown:"Ollama API not yet implemented. Please check back later.",rendered:""}}};var In=class{static createApi(e,t){switch(t||e.settings.apiProvider||"gemini"){case"ollama":return new An(e);case"gemini":default:return new ji(e)}}};var Pn=class extends le.PluginSettingTab{constructor(e,t){super(e,t),this.plugin=t}display(){let{containerEl:e}=this;e.empty(),new le.Setting(e).setName("API Key").setDesc("Gemini API Key").addText(t=>t.setPlaceholder("Enter your API Key").setValue(this.plugin.settings.apiKey).onChange(async i=>{this.plugin.settings.apiKey=i,await this.plugin.saveSettings()})),new le.Setting(e).setName("API Provider").setDesc("Select which AI provider to use").addDropdown(t=>t.addOption("gemini","Google Gemini (New SDK)").setValue(this.plugin.settings.apiProvider).onChange(async i=>{this.plugin.settings.apiProvider=i,await this.plugin.saveSettings()})),Xn(e,this.plugin,"chatModelName","Chat Model","The Gemini Model used in the chat interface."),Xn(e,this.plugin,"summaryModelName","Summary Model","The Gemini Model used for summarization."),Xn(e,this.plugin,"completionsModelName","Completion Model","The Gemini Model used for completions."),new le.Setting(e).setName("Context Depth").setDesc("Set to true to send the context of the current file to the model, and adjust the depth of links followed for the context.").addDropdown(t=>t.addOption("0","0").addOption("1","1").addOption("2","2").addOption("3","3").addOption("4","4").setValue(this.plugin.settings.maxContextDepth.toString()).onChange(async i=>{this.plugin.settings.maxContextDepth=parseInt(i),await this.plugin.saveSettings()})).addToggle(t=>t.setValue(this.plugin.settings.sendContext).onChange(async i=>{this.plugin.settings.sendContext=i,await this.plugin.saveSettings()})),new le.Setting(e).setName("Search Grounding").setDesc("Enable the model to use Google search results in its responses.").addToggle(t=>t.setValue(this.plugin.settings.searchGrounding).onChange(async i=>{this.plugin.settings.searchGrounding=i,await this.plugin.saveSettings()})),new le.Setting(e).setName("Summary Frontmatter Key").setDesc("Key to use for frontmatter summarization.").addText(t=>t.setPlaceholder("Enter your key").setValue(this.plugin.settings.summaryFrontmatterKey).onChange(async i=>{this.plugin.settings.summaryFrontmatterKey=i,await this.plugin.saveSettings()})),new le.Setting(e).setName("Your name.").setDesc("This will be used in the system instructions for the model.").addText(t=>t.setPlaceholder("Enter your name").setValue(this.plugin.settings.userName).onChange(async i=>{this.plugin.settings.userName=i,await this.plugin.saveSettings()})),new le.Setting(e).setName("Rewrite Files").setDesc("Whether to allow the model to rewrite files during chat.").addToggle(t=>t.setValue(this.plugin.settings.rewriteFiles).onChange(async i=>{this.plugin.settings.rewriteFiles=i,await this.plugin.saveSettings()})),new le.Setting(e).setName("Chat History").setHeading(),new le.Setting(e).setName("Enable Chat History").setDesc("Store chat history as a json file in your vault. This will allow you to view past conversations between sessions.").addToggle(t=>t.setValue(this.plugin.settings.chatHistory).onChange(async i=>{this.plugin.settings.chatHistory=i,await this.plugin.saveSettings()})),new le.Setting(e).setName("History Folder").setDesc("The folder where history file will be stored.").addText(t=>{let i=new jn(this.app,t.inputEl,async r=>{this.plugin.settings.historyFolder=r,await this.plugin.saveSettings()});t.setValue(this.plugin.settings.historyFolder)}),new le.Setting(e).setName("UI Settings").setHeading(),new le.Setting(e).setName("Show Model Picker").setDesc("Show the model picker in the chat interface.").addToggle(t=>t.setValue(this.plugin.settings.showModelPicker).onChange(async i=>{this.plugin.settings.showModelPicker=i,await this.plugin.saveSettings()})),new le.Setting(e).setName("Developer Settings").setHeading(),new le.Setting(e).setName("Debug Mode").setDesc("Enable debug logging to the console. Useful for troubleshooting.").addToggle(t=>t.setValue(this.plugin.settings.debugMode).onChange(async i=>{this.plugin.settings.debugMode=i,await this.plugin.saveSettings()}))}};var ge=require("obsidian");var er=class{constructor(e){this.plugin=e,this.prompts=new me}async generateRewriteResponse(e,t){let i=this.prompts.rewritePrompt({userMessage:e});await this.plugin.history.appendHistory({role:"user",message:e});let r={prompt:i,conversationHistory:t,userMessage:e},o=await this.plugin.geminiApi.generateModelResponse(r);await this.plugin.gfile.replaceTextInActiveFile(o.markdown)}};var bn="gemini-view",tr=class extends ge.ItemView{constructor(t,i){super(t);this.timerInterval=null;this.startTime=null;this.settingsUnsubscribe=null;this.plugin=i,this.rewriteMode=new er(i),this.prompts=new me,this.registerLinkClickHandler(),this.registerSettingsListener(),this.fileOpenHandler=this.handleFileOpen.bind(this)}registerSettingsListener(){let t=this.plugin.saveSettings.bind(this.plugin);this.plugin.saveSettings=async()=>{await t(),await this._rebuildUIDueToSettingsChange()},this.settingsUnsubscribe=()=>{this.plugin.saveSettings=t}}async _rebuildUIDueToSettingsChange(){if(!this.contentEl){at(this.plugin.settings.debugMode,"GeminiView: contentEl not available for UI rebuild on settings change.",null);return}at(this.plugin.settings.debugMode,"GeminiView: Rebuilding UI due to settings change.",null),this._buildViewDOM(this.contentEl);let t=this.plugin.gfile.getActiveFile();t?await this.handleFileOpen(t):this.chatbox&&this.clearChat()}_buildViewDOM(t){t.empty(),t.createEl("h2",{text:"Gemini Chat"}),this.chatbox=t.createDiv({cls:"gemini-scribe-chatbox"});let i=t.createDiv({cls:"gemini-scribe-input-area"}),r=i.createEl("textarea",{cls:"gemini-scribe-chat-input",attr:{placeholder:"Type your message here..."}}),o=i.createDiv({cls:"gemini-scribe-send-container"}),s=o.createEl("button",{text:"Send",cls:"gemini-scribe-send-button"});if((0,ge.setIcon)(s,"send-horizontal"),this.timerDisplay=o.createDiv({cls:"gemini-scribe-timer"}),this.plugin.settings.rewriteFiles){let u=t.createDiv({cls:"gemini-scribe-options-area"}),f=u.createEl("input",{type:"checkbox",cls:"gemini-scribe-rewrite-checkbox"});u.createEl("label",{text:"Rewrite file",cls:"gemini-scribe-rewrite-label"}).prepend(f),f.addEventListener("change",()=>{this.shoudRewriteFile=f.checked})}if(this.plugin.settings.showModelPicker){let u=t.createDiv({cls:"gemini-scribe-model-picker-area"});this.modelPicker=u.createEl("select",{cls:"gemini-scribe-model-picker"}),Qe.forEach(f=>{this.modelPicker.createEl("option",{value:f.value,text:f.label})}),this.modelPicker.value=this.plugin.settings.chatModelName,this.modelPicker.addEventListener("change",async()=>{this.plugin.settings.chatModelName=this.modelPicker.value,await this.plugin.saveSettings()})}else this.modelPicker=null;r.addEventListener("keydown",async u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),s.click())}),s.addEventListener("click",async()=>{let u=r.value;if(u.trim()!==""){this.displayMessage(u,"user"),r.value="",this.startTimer();try{await this.sendMessage(u)}catch(f){console.error("Error during sendMessage call from button click:",f),new ge.Notice("An unexpected error occurred while sending the message.")}finally{this.stopTimer()}}}),this.observer&&this.observer.disconnect(),this.observer=new MutationObserver(u=>{for(let f of u)f.type==="childList"&&this.scrollToBottom()}),this.observer.observe(this.chatbox,{childList:!0,subtree:!0})}registerLinkClickHandler(){this.containerEl.addEventListener("click",t=>{let i=t.target;if(i.tagName==="A"&&i.classList.contains("internal-link")){t.preventDefault();let r=i.getAttribute("href");r&&this.app.workspace.openLinkText(r,"",!0)}})}getViewType(){return bn}getDisplayText(){return"Gemini Scribe"}getIcon(){return"sparkles"}async onOpen(){this._buildViewDOM(this.contentEl),this.registerEvent(this.app.workspace.on("file-open",this.fileOpenHandler));let t=this.plugin.gfile.getActiveFile();t&&await this.handleFileOpen(t)}async onClose(){this.app.workspace.off("file-open",this.fileOpenHandler),this.observer&&(this.observer.disconnect(),this.observer=null),this.settingsUnsubscribe&&(this.settingsUnsubscribe(),this.settingsUnsubscribe=null)}async displayMessage(t,i){var u,f;let r=this.chatbox.createDiv({cls:`gemini-scribe-message-container ${i}`}),o=r.createDiv({cls:"gemini-scribe-sender-indicator"}),s=r.createDiv({cls:`gemini-scribe-message ${i}`});switch(i){case"user":(0,ge.setIcon)(o,"square-user");break;case"model":(0,ge.setIcon)(o,"bot-message-square");break;case"grounding":(0,ge.setIcon)(o,"search");break}if(i==="grounding")s.innerHTML=t;else{let c=(f=(u=this.plugin.gfile.getActiveFile())==null?void 0:u.path)!=null?f:"";await ge.MarkdownRenderer.render(this.app,t,s,c,this)}if(i==="model"){let c=s.createEl("button",{cls:"gemini-scribe-copy-button"});(0,ge.setIcon)(c,"copy"),c.addEventListener("click",()=>{navigator.clipboard.writeText(t).then(()=>{new ge.Notice("Message copied to clipboard.")}).catch(d=>{new ge.Notice("Could not copy message to clipboard. Try selecting and copying manually.")})})}this.scrollToBottom()}async handleFileOpen(t){if(!t)return;let i=await this.plugin.app.vault.read(t);this.currentFile=t;let r=await this.plugin.history.getHistoryForFile(t);this.updateChat(r)}async updateChat(t){var i;this.clearChat();for(let r of t)r.role==="model"&&((i=r.metadata)!=null&&i.rendered)?(this.displayMessage(r.message,"model"),this.displayMessage(r.metadata.rendered,"grounding")):this.displayMessage(r.message,r.role)}clearChat(){this.chatbox&&this.chatbox.empty()}async sendMessage(t){var i,r,o;if(t.trim()!==""){if(this.shoudRewriteFile){let s=(i=await this.plugin.history.getHistoryForFile(this.currentFile))!=null?i:[];await this.rewriteMode.generateRewriteResponse(t,s);return}try{let s=(r=await this.plugin.history.getHistoryForFile(this.currentFile))!=null?r:[],u=this.prompts.generalPrompt({userMessage:t}),f={userMessage:t,conversationHistory:s,model:this.plugin.settings.chatModelName,prompt:u,renderContent:!0};at(this.plugin.settings.debugMode,"Sending message",f);let c=await this.plugin.geminiApi.generateModelResponse(f);this.plugin.settings.chatHistory?(await this.plugin.history.appendHistoryForFile(this.currentFile,{role:"user",message:t}),await this.plugin.history.appendHistoryForFile(this.currentFile,{role:"model",message:c.markdown,userMessage:t,model:this.plugin.settings.chatModelName}),this.clearChat(),await this.updateChat((o=await this.plugin.history.getHistoryForFile(this.currentFile))!=null?o:[]),c.rendered&&this.displayMessage(c.rendered,"grounding")):(this.displayMessage(c.markdown,"model"),c.rendered&&this.displayMessage(c.rendered,"grounding"))}catch(s){new ge.Notice("Error getting bot response.")}}}scrollToBottom(){let t=()=>{let i=this.containerEl.querySelector(".gemini-scribe-input-area");i&&i.scrollIntoView({behavior:"smooth",block:"end",inline:"nearest"})};t(),setTimeout(t,50),setTimeout(t,150)}startTimer(){this.timerDisplay.style.display="block",this.startTime=Date.now(),this.timerDisplay.textContent="0.0s",this.timerInterval=setInterval(()=>{if(this.startTime){let t=(Date.now()-this.startTime)/1e3;this.timerDisplay.textContent=`${t.toFixed(1)}s`}},100)}stopTimer(){this.timerInterval&&(clearInterval(this.timerInterval),this.timerInterval=null),setTimeout(()=>{this.timerDisplay&&(this.timerDisplay.style.display="none")},2e3)}};var nr=class{constructor(e){this.plugin=e,this.prompts=new me}async summarizeActiveFile(){let e=await this.plugin.gfile.getCurrentFileContent(0,!0);if(e){let t={model:this.plugin.settings.summaryModelName,prompt:this.prompts.summaryPrompt({content:e})},i=await this.plugin.geminiApi.generateModelResponse(t);this.plugin.gfile.addToFrontMatter(this.plugin.settings.summaryFrontmatterKey,i.markdown)}else console.error("Failed to get file content for summary.")}async setupSummarizaitonCommand(){this.plugin.addCommand({id:"gemini-scribe-summarize-active-file",name:"Summarize Active File",callback:()=>this.summarizeActiveFile()})}};var If=require("obsidian");var Af=Rr(kf()),Tr=class{constructor(e,t){this.scribeFile=e,this.dataViewAPI=this.getDataViewAPI(),this.plugin=t}getDataViewAPI(){let e=(0,Af.getAPI)();return e||null}async getBacklinks(e){return await this.evaluateDataviewQuery("list where contains(file.outlinks, this.file.link)",e)}async getLinksFromDataviewBlocks(e){let t=new Set,i=[];return await this.iterateCodeblocksInFile(e,o=>{o.language==="dataview"&&i.push(this.evaluateDataviewQuery(o.text,e))}),(await Promise.all(i)).forEach(o=>{o.forEach(s=>t.add(s))}),t}async evaluateDataviewQuery(e,t){let i=new Set;try{let r=await this.dataViewAPI.query(e,t.path);if(!(r!=null&&r.value))return console.warn(`Invalid query result for "${e}" in file "${t.path}"`),i;let o=s=>{if(this.isFileLink(s)){let u=this.scribeFile.normalizePath(s.path,t);u?i.add(u):console.warn(`Link "${s}" in file "${t.path}" could not be normalized.`)}};if(r.value.type==="list")for(let s of r.value.values)o(s);else if(r.value.type==="table")for(let s of r.value.values)for(let u of s)o(u)}catch(r){console.error(`Error evaluating dataview query "${e}" in file "${t.path}":`,r)}return i}isFileLink(e){return e&&typeof e=="object"&&typeof e.path=="string"?!(e.subpath||e.path.includes("#")||e.path.includes("^")):!1}async iterateCodeblocksInFile(e,t){let r=(await this.plugin.app.vault.read(e)).split(`
`),o=null;for(let s=0;s<r.length;s++){let u=r[s];if(u.startsWith("```"))if(o)t(o),o=null;else{let f=u.substring(3).trim();o={start:s,end:-1,text:"",language:f}}else o&&(o.text+=u+`
`)}o&&(o.end=r.length-1,t(o))}};var _r=class{constructor(e,t){this.root=null;this.visited=new Set;this.MAX_TOTAL_CHARS=5e5;this.plugin=e,this.plugin.settings.sendContext?this.maxDepth=t!=null?t:this.plugin.settings.maxContextDepth:this.maxDepth=0,this.fileHelper=new sn(e),this.dataViewHelper=new Tr(this.fileHelper,this.plugin),this.prompts=new me}async buildStructure(e,t=0,i,r,o){if(!e||t>this.maxDepth||r.has(e.path)||e.path.startsWith(this.plugin.settings.historyFolder+"/"))return null;r.add(e.path);let s=this.fileHelper.getLinkText(e,o.path),u={path:e.path,content:await this.getFileContent(e,i),wikilink:s,links:new Map},f=this.fileHelper.getUniqueLinks(e),c=await this.dataViewHelper.getBacklinks(e)||new Set,d=await this.dataViewHelper.getLinksFromDataviewBlocks(e)||new Set,h=f;c.forEach(m=>h.add(m)),d.forEach(m=>h.add(m));for(let m of h){let D=await this.buildStructure(m,t+1,i,r,o);D&&u.links.set(m.path,D)}return u}async initialize(e,t){this.visited.clear(),this.root=await this.buildStructure(e,0,t,this.visited,e)}toString(e=5e4){return this.root?this.nodeToString(this.root,0,e,0).text:"No file structure built"}nodeToString(e,t,i,r){let o=e.content.length>i?e.content.substring(0,i)+`
[Remaining content truncated...]`:e.content,s=t==0?`This is the content of the current file and the files that it links to:
`:"",u=t==0?"Current File":"Linked File";s+=this.prompts.contextPrompt({file_label:u,file_name:e.path,wikilink:e.wikilink,file_contents:o});let f=r+s.length;if(e.links.size>0&&f<this.MAX_TOTAL_CHARS)for(let[c,d]of e.links){if(f>=this.MAX_TOTAL_CHARS){s+=`[Additional links truncated...]
`;break}let h=this.nodeToString(d,t+1,i,f);s+=h.text,f=h.total}return{text:s,total:f}}async getFileContent(e,t){let i=await this.plugin.app.vault.read(e)||"";if(t){let r=document.createElement("div");return await If.MarkdownRenderer.render(this.plugin.app,i,r,e.path,this.plugin),r.innerHTML}else return i}};var Pf=require("obsidian"),sn=class{constructor(e){this.plugin=e}async getCurrentFileContent(e=this.plugin.settings.maxContextDepth,t=!1){if(!this.plugin.settings.sendContext)return null;let i=this.getActiveFile();if(i){let r=new _r(this.plugin,e);return await r.initialize(i,t),r.toString()}else return null}async addToFrontMatter(e,t){let i=this.getActiveFile();i&&this.plugin.app.fileManager.processFrontMatter(i,r=>{r[e]=t})}async replaceTextInActiveFile(e){let t=this.getActiveFile(),i=this.plugin.app.vault;t&&i.modify(t,e)}getActiveFile(){let e=this.plugin.app.workspace.getActiveFile();return this.isFile(e)?e:(console.debug("No active file found."),null)}isFile(e){return!!(e&&e instanceof Pf.TFile)}isMarkdownFile(e){return!!(e&&this.isFile(e)&&e.extension==="md")}getLinkText(e,t){return`[[${this.plugin.app.metadataCache.fileToLinktext(e,t,!0)}]]`}normalizePath(e,t){let i=this.plugin.app.metadataCache.getFirstLinkpathDest(e,t.path);return this.isMarkdownFile(i)?i:null}normalizeLinkPathsFromMetadata(e){let t=this.plugin.app.metadataCache.getFileCache(e),i=[],r=[],o=[];if(t){if(t.links)for(let s of t.links){let u=this.normalizePath(s.link,e);u?i.push(u):console.warn(`Link "${s.link}" in file "${e.path}" could not be normalized.`)}if(t.embeds)for(let s of t.embeds){let u=this.normalizePath(s.link,e);u?r.push(u):console.warn(`Embed "${s.link}" in file "${e.path}" could not be normalized.`)}if(t.frontmatterLinks)for(let s of t.frontmatterLinks){let u=this.normalizePath(s.link,e);u?o.push(u):console.warn(`Frontmatter link "${s.link}" in file "${e.path}" could not be normalized.`)}if(t.frontmatter&&t.frontmatter.links){if(Array.isArray(t.frontmatter.links))t.frontmatter.links.forEach(s=>{let u=this.normalizePath.call(this,s);u?o.push(u):console.warn(`Frontmatter link "${s}" in file "${e.path}" could not be normalized.`)});else if(typeof t.frontmatter.links=="string"){let s=this.normalizePath.call(this,t.frontmatter.links);s?o.push(s):console.warn(`Frontmatter link "${t.frontmatter.links}" in file "${e.path}" could not be normalized.`)}}}return{links:i,embeds:r,frontmatterLinks:o}}getUniqueLinks(e){let{links:t,embeds:i,frontmatterLinks:r}=this.normalizeLinkPathsFromMetadata(e);return new Set([...t,...i,...r])}};var It=require("obsidian");var j=require("obsidian"),xr=Rr(Qo());var bf=`{{#if isFirstEntry}}
# Chat History
*Started: {{timestamp}}*
*Plugin Version: {{pluginVersion}}*

---

{{/if}}
## {{role}}

> [!metadata]- Message Info
> | Property | Value |
> | -------- | ----- |
> | Time | {{timestamp}} |
> | File Version | {{fileVersion}} |
{{#if model}}
> | Model | {{model}} |
{{#if temperature}}
> | Temperature | {{temperature}} |
{{/if}}
{{/if}}
{{#if context}}
> | Context | {{context}} |
{{/if}}

{{#if (eq role "User")}}
> [!user]+
{{else}}
> [!assistant]+
{{/if}}
{{#each messageLines}}
> {{this}}
{{/each}}

--- `;var Mr=class{constructor(e){this.plugin=e,xr.registerHelper("eq",function(t,i){return t===i}),this.entryTemplate=xr.compile(bf)}getHistoryFilePath(e){let t=this.plugin.settings.historyFolder,i=e.replace(/\.md$/,""),r=!i.includes("/")&&!i.includes("\\"),o=i.replace(/[\\/]/g,"_");return r&&(o=`root_${o}`),(0,j.normalizePath)(`${t}/${o}.md`)}async appendHistoryForFile(e,t){if(!this.plugin.gfile.isFile(e)||!this.plugin.settings.chatHistory)return;let i=this.getHistoryFilePath(e.path),r={notePath:e.path,created_at:new Date,role:t.role,message:t.message,model:t.model};try{if(await this.plugin.app.vault.createFolder(this.plugin.settings.historyFolder).catch(()=>{}),await this.plugin.app.vault.adapter.exists(i)){let s=await this.plugin.app.vault.adapter.read(i);s=s.replace(/\n---\s*$/,""),await this.plugin.app.vault.adapter.write(i,s+`

`+this.formatEntryAsMarkdown(r))}else{let s="";if(t.role==="model"&&t.userMessage){let f={notePath:e.path,created_at:new Date(r.created_at.getTime()-1e3),role:"user",message:t.userMessage};s=this.formatEntryAsMarkdown(f,!0)+`

`+this.formatEntryAsMarkdown(r)}else s=this.formatEntryAsMarkdown(r,!0);let u=await this.plugin.app.vault.create(i,s);await this.plugin.app.fileManager.processFrontMatter(u,f=>{f.source_file=this.plugin.gfile.getLinkText(e,e.path)})}}catch(o){console.error("Failed to append history",o),new j.Notice("Failed to save chat history")}}async getHistoryForFile(e){if(!this.plugin.gfile.isFile(e))return[];if(!this.plugin.settings.chatHistory)return[];let t=this.getHistoryFilePath(e.path),i=t,r=null,o=null;try{let s=this.plugin.app.vault.getAbstractFileByPath(t);if(s instanceof j.TFile)r=await this.plugin.app.vault.read(s);else if(o=await this.findLegacyHistoryFile(e),o){console.log(`Found legacy history file for ${e.path}: ${o.path}`),i=o.path,r=await this.plugin.app.vault.read(o);try{await this.migrateLegacyHistoryFile(o,e)}catch(u){console.error(`[History] Failed to migrate legacy history file ${o==null?void 0:o.path} during load:`,u),new j.Notice(`Error updating history file format for ${e.basename}. History may load from old format.`)}}return r!==null?this.parseHistoryFile(r,e.path):[]}catch(s){return console.error(`Failed to read history for ${e.path} (checked path: ${i}):`,s),[]}}async clearHistoryForFile(e){if(!this.plugin.gfile.isFile(e))return;let t=this.getHistoryFilePath(e.path);try{let i=this.plugin.app.vault.getAbstractFileByPath(t);if(i instanceof j.TFile)return await this.plugin.app.vault.delete(i),1;let r=await this.findLegacyHistoryFile(e);return r?(await this.plugin.app.vault.delete(r),console.log(`Cleared legacy history file: ${r.path}`),1):0}catch(i){if(i.message.includes("does not exist")){try{let r=await this.findLegacyHistoryFile(e);if(r)return await this.plugin.app.vault.delete(r),console.log(`Cleared legacy history file after initial miss: ${r.path}`),1}catch(r){console.error("Error checking/deleting legacy history during clear error handling:",r)}return 0}console.error("Failed to clear history for file:",t,i),new j.Notice(`Failed to clear history for ${e.basename}`);return}}async findLegacyHistoryFile(e){let t=this.plugin.settings.historyFolder;try{let r=(await this.plugin.app.vault.adapter.list(t)).files.filter(o=>o.endsWith(".md")&&(0,j.normalizePath)(o)!==this.getHistoryFilePath(e.path));for(let o of r){let s=this.plugin.app.vault.getAbstractFileByPath(o);if(s instanceof j.TFile){let u=this.plugin.app.metadataCache.getFileCache(s),f=u==null?void 0:u.frontmatter;if(f&&f.source_file){let d=f.source_file.match(/\[\[([^|#\]]+)/),h=d?d[1].trim().replace(/\.md$/,""):null,m=e.basename.replace(/\.md$/,"");if(h&&h===m)return s}}}}catch(i){i.message.includes("no such file or directory")||console.error(`Error searching for legacy history files in ${t}:`,i)}return null}async migrateLegacyHistoryFile(e,t){let i=this.getHistoryFilePath(t.path);console.log(`Attempting migration for legacy file ${e.path} to ${i}`);try{if(await this.plugin.app.vault.adapter.exists(i)){console.warn(`Migration target ${i} already exists. Deleting original legacy file ${e.path}.`),await this.plugin.app.vault.delete(e).catch(s=>{console.error(`Failed to delete original legacy file ${e.path} when target existed:`,s)});return}await this.plugin.app.vault.rename(e,i),console.log(`Successfully renamed ${e.path} to ${i}`);let o=this.plugin.app.vault.getAbstractFileByPath(i);if(!(o instanceof j.TFile)){console.error(`Failed to get TFile for newly renamed history file: ${i}. Cannot update frontmatter.`);return}await this.plugin.app.fileManager.processFrontMatter(o,s=>{s.source_file=this.plugin.gfile.getLinkText(t,t.path)}),console.log(`Successfully updated frontmatter for ${i}`)}catch(r){if(r.message.includes("already exists"))console.warn(`Rename failed, target ${i} already exists (race condition?). Attempting to delete original legacy file ${e.path}.`),await this.plugin.app.vault.delete(e).catch(o=>{console.error(`Failed to delete original legacy file ${e.path} after rename error:`,o)});else if(r.message.includes("does not exist"))console.warn(`Cannot migrate legacy history file, source no longer exists: ${e.path}`);else throw console.error(`Error during migration of ${e.path} to ${i}:`,r),r}}async clearHistory(){if(!this.plugin.settings.chatHistory)return;let e=this.plugin.settings.historyFolder;try{await this.plugin.app.vault.adapter.exists(e)&&await this.plugin.app.vault.adapter.rmdir(e,!0),await this.plugin.app.vault.createFolder(e),new j.Notice("Chat history cleared.")}catch(t){console.error("Failed to clear all history",t),new j.Notice("Failed to clear chat history")}}formatEntryAsMarkdown(e,t=!1){var f,c;let i=e.created_at.toISOString(),r=e.role.charAt(0).toUpperCase()+e.role.slice(1),o=e.message.split(`
`),s=this.plugin.app.vault.getAbstractFileByPath(e.notePath),u="unknown";return s instanceof j.TFile?u=s.stat.mtime.toString(16).slice(0,8):console.warn(`Could not find TFile for path ${e.notePath} when formatting history entry.`),this.entryTemplate({isFirstEntry:t,role:r,timestamp:i,model:e.model,messageLines:o,pluginVersion:this.plugin.manifest.version,fileVersion:u,temperature:(f=e.metadata)==null?void 0:f.temperature,context:(c=e.metadata)==null?void 0:c.context})}async parseHistoryFile(e,t){var c;let i=[],r=this.getHistoryFilePath(t),o=this.plugin.app.vault.getAbstractFileByPath(r),s=t;if(o instanceof j.TFile){let d=(c=this.plugin.app.metadataCache.getFileCache(o))==null?void 0:c.frontmatter;if(d&&d.source_file){let h=this.plugin.app.metadataCache.getFirstLinkpathDest(d.source_file,o.path);h instanceof j.TFile&&(s=h.path)}}else console.warn(`Could not find history file TFile object for path: ${r}`);let f=e.replace(/^---\n[\s\S]*?\n---\n/,"").trim().split(/\n\n(?=## )/);for(let d of f){if(!d.trim())continue;let h=d.match(/^## (User|Model)/m);if(h){let m=h[1].toLowerCase(),D=d.match(/\|\s*Time\s*\|\s*(.*?)\s*\|/m),v=d.match(/\|\s*Model\s*\|\s*(.*?)\s*\|/m),w=D?new Date(D[1].trim()):new Date,x=d.match(/>\s*\[!(user|assistant)\]\+\n([\s\S]*?)(?=\n\s*---|\n\s*$)/m);if(x){let k=x[2].split(`
`).map(b=>b.startsWith("> ")?b.slice(2):b).join(`
`).trim();k&&i.push({notePath:s,created_at:w,role:m,message:k,model:v?v[1].trim():void 0})}}}return i}async renameHistoryFile(e,t){let i=this.getHistoryFilePath(t),r=this.getHistoryFilePath(e.path);try{let o=this.plugin.app.vault.getAbstractFileByPath(i);o instanceof j.TFile?(await this.plugin.app.fileManager.processFrontMatter(o,s=>{s.source_file=this.plugin.gfile.getLinkText(e,e.path)}),await this.plugin.app.vault.rename(o,r)):(console.log("Could not find history file TFile to rename:",i),await this.plugin.app.vault.adapter.exists(i)||console.log(`Adapter confirms ${i} does not exist.`))}catch(o){o.message.includes("already exists")?(console.warn(`Cannot rename history file, target already exists: ${r}`),new j.Notice(`History file for ${e.basename} might be duplicated.`)):o.message.includes("does not exist")?console.warn(`Cannot rename history file, source does not exist: ${i}`):(console.error("Failed to rename history file:",{from:i,to:r},o),new j.Notice(`Failed to update history for renamed file ${e.basename}`))}}async deleteHistoryFile(e){let t=this.getHistoryFilePath(e);try{let i=this.plugin.app.vault.getAbstractFileByPath(t);i instanceof j.TFile?await this.plugin.app.vault.delete(i):await this.plugin.app.vault.adapter.exists(t)&&(await this.plugin.app.vault.adapter.remove(t),console.log(`Removed history file via adapter: ${t}`))}catch(i){i.message.includes("does not exist")||console.error("Failed to delete history file:",t,i)}}};var kr=class{constructor(e){this.plugin=e,this.markdownHistory=new Mr(e)}async setupHistoryCommands(){if(this.plugin.settings.chatHistory)try{this.plugin.addCommand({id:"gemini-scribe-clear-conversations",name:"Clear All Chat History",callback:async()=>{await this.clearHistory()}})}catch(e){console.error("Failed to add commands",e)}}async onLayoutReady(){await this.setupHistory()}async setupHistory(){this.plugin.app.vault.on("rename",this.renameHistoryFile.bind(this)),this.plugin.app.vault.on("delete",this.handleFileDelete.bind(this))}async onUnload(){this.plugin.app.vault.off("rename",this.renameHistoryFile.bind(this)),this.plugin.app.vault.off("delete",this.handleFileDelete.bind(this))}async renameHistoryFile(e,t){let i=this.plugin.settings.historyFolder,r=(0,It.normalizePath)(e.path),o=(0,It.normalizePath)(t),s=(0,It.normalizePath)(i+"/");r.startsWith(s)||o.startsWith(s)||e instanceof It.TFile&&await this.markdownHistory.renameHistoryFile(e,t)}async handleFileDelete(e){e instanceof It.TFile&&await this.markdownHistory.deleteHistoryFile(e.path)}async appendHistoryForFile(e,t){await this.markdownHistory.appendHistoryForFile(e,t)}async getHistoryForFile(e){return await this.markdownHistory.getHistoryForFile(e)}async clearHistoryForFile(e){return await this.markdownHistory.clearHistoryForFile(e)}async appendHistory(e){let t=this.plugin.app.workspace.getActiveFile();t&&await this.appendHistoryForFile(t,e)}async clearHistory(){await this.markdownHistory.clearHistory()}};var un=require("obsidian");var Le=require("@codemirror/view"),rt=require("@codemirror/state");function Nf(n,e,t=void 0){let i={force:()=>{}},r=null;async function*o(...s){r&&clearTimeout(r);let u=null;try{await new Promise(f=>{u=r=setTimeout(()=>f(),e),i.force=()=>{r&&clearTimeout(r),f()}})}catch(f){if(t!==void 0)throw t}for await(let f of n(...s)){if(u!==r)break;yield f}}return{debounced:o,force:()=>i.force()}}var yC=Object.defineProperty,vC=(n,e,t)=>e in n?yC(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,an=(n,e,t)=>(vC(n,typeof e!="symbol"?e+"":e,t),t),Ar=rt.StateField.define({create(){return{suggestion:null}},update(n,e){let t=e.effects.find(i=>i.is(Bs));return e.state.doc&&t&&(t.value.doc==null||e.state.doc==t.value.doc)?{suggestion:t.value.suggestion}:{suggestion:null}}}),Bs=rt.StateEffect.define();function CC(n,e){let t=n.state.selection.main.head,i=[],r=Le.Decoration.widget({widget:new Ns(e),side:1});return i.push(r.range(t)),Le.Decoration.set(i)}var Ns=class extends Le.WidgetType{constructor(e){super(),an(this,"suggestion"),this.suggestion=e}toDOM(){let e=document.createElement("span");return e.style.opacity="0.4",e.className="cm-inline-suggestion",e.textContent=this.suggestion,e}},Ls=n=>{let e=0;return Le.ViewPlugin.fromClass(class{async update(t){let i=t.state.doc;if(!t.docChanged)return;let r=++e;for await(let o of n(t.state)){if(r!=e)return;t.view.dispatch({effects:Bs.of({suggestion:o,doc:i})})}}})},Rs=class{constructor(){an(this,"decorations"),this.decorations=Le.Decoration.none}update(e){var t;let i=(t=e.state.field(Ar))==null?void 0:t.suggestion;if(!i){this.decorations=Le.Decoration.none;return}this.decorations=CC(e.view,i.display_suggestion)}},Lf=Le.ViewPlugin.fromClass(Rs,{decorations:n=>n.decorations}),Os=class{constructor(e,t){an(this,"suggestFn"),an(this,"keymap"),an(this,"completionId"),an(this,"run",i=>{var r,o;let s=(r=i.state.field(Ar))==null?void 0:r.suggestion;return s?(i.dispatch({...EC(i.state,s.complete_suggestion,i.state.selection.main.head,i.state.selection.main.head)}),(o=s.accept_hook)==null||o.call(s),(async()=>{if(this.suggestFn==null)return;let u=++this.completionId;for await(let f of this.suggestFn(i.state)){if(u!=this.completionId)return;i.dispatch({effects:Bs.of({suggestion:{complete_suggestion:f.complete_suggestion,display_suggestion:f.display_suggestion,accept_hook:f.accept_hook},doc:null})})}})(),!0):!1}),this.suggestFn=e,this.keymap=rt.Prec.highest(Le.keymap.of([{key:t,run:i=>this.run(i)}])),this.completionId=0}};function EC(n,e,t,i){return{...n.changeByRange(r=>{if(r==n.selection.main)return{changes:{from:t,to:i,insert:e},range:rt.EditorSelection.cursor(t+e.length)};let o=i-t;return!r.empty||o&&n.sliceDoc(r.from-o,r.from)!=n.sliceDoc(t,i)?{range:r}:{changes:{from:r.from-o,to:r.from,insert:e},range:rt.EditorSelection.cursor(r.from-o+e.length)}}),userEvent:"input.complete"}}function Rf(n){return typeof n=="string"?{complete_suggestion:n,display_suggestion:n}:n}function FC(n){return async function*(e){let t=await n(e);if(typeof t=="string"||"complete_suggestion"in t){yield Rf(t);return}for await(let i of t)yield Rf(i)}}function Vs(n){let{delay:e=500,accept_shortcut:t="Tab"}=n,i=FC(n.fetchFn),{debounced:r,force:o}=Nf(i,e);return{extension:t?[Ar,Ls(r),Lf,new Os(n.continue_suggesting?i:null,t).keymap]:[Ar,Ls(r),Lf],force_fetch:o}}var Ir=class{constructor(e){this.force_fetch=()=>{};this.TYPING_DELAY=750;this.completionsOn=!1;this.plugin=e,this.prompts=new me,this.debouncedComplete=(0,un.debounce)(()=>this.force_fetch(),this.TYPING_DELAY,!0)}async*complete(){if(!this.completionsOn)return;let e=this.plugin.app.workspace.getActiveViewOfType(un.MarkdownView);if(!e)return;let t=e.editor,i=t.getCursor(),o=t.getLine(i.line).substring(0,i.ch),s=o.length>0&&!o.endsWith(" "),u=t.getRange({line:0,ch:0},i),f=t.getRange(i,{line:t.lastLine(),ch:t.getLine(t.lastLine()).length}),c=await this.generateNextSentence(u,f),d=s?" "+c:c;yield{display_suggestion:d,complete_suggestion:d}}async generateNextSentence(e,t){let i={model:this.plugin.settings.completionsModelName,prompt:this.prompts.completionsPrompt({contentBeforeCursor:e,contentAfterCursor:t})};return(await this.plugin.geminiApi.generateModelResponse(i)).markdown.replace(/\n$/,"")}async setupCompletions(){let{extension:e,force_fetch:t}=Vs({fetchFn:()=>this.complete()});this.force_fetch=t,this.plugin.registerEditorExtension(e)}async setupCompletionsCommands(){try{this.plugin.addCommand({id:"gemini-scribe-toggle-completions",name:"Toggle completions",callback:()=>{this.completionsOn=!this.completionsOn,new un.Notice(`Gemini Scribe Completions are now ${this.completionsOn?"enabled":"disabled"}.`),this.completionsOn&&this.force_fetch()}})}catch(e){console.error("Error setting up completion commands:",e)}}};var Bf=require("obsidian");var wC={apiKey:"",apiProvider:"gemini",chatModelName:Dt("chat"),summaryModelName:Dt("summary"),completionsModelName:Dt("completions"),sendContext:!1,maxContextDepth:2,searchGrounding:!1,summaryFrontmatterKey:"summary",userName:"User",rewriteFiles:!1,chatHistory:!1,historyFolder:"gemini-scribe",showModelPicker:!1,debugMode:!1},Pr=class extends Of.Plugin{async onload(){await this.setupGeminiScribe(),this.ribbonIcon=this.addRibbonIcon("sparkles","Open Gemini Chat",()=>{this.activateView()}),this.registerView(bn,e=>this.geminiView=new tr(e,this)),this.addCommand({id:"gemini-scribe-open-view",name:"Open Gemini Chat",callback:()=>this.activateView()}),this.addSettingTab(new Pn(this.app,this)),this.app.workspace.onLayoutReady(()=>this.onLayoutReady())}async setupGeminiScribe(){await this.loadSettings(),this.geminiApi=In.createApi(this),this.gfile=new sn(this),this.history=new kr(this),await this.history.setupHistoryCommands(),this.app.workspace.layoutReady&&await this.history.onLayoutReady,this.completions=new Ir(this),await this.completions.setupCompletions(),await this.completions.setupCompletionsCommands(),this.summarizer=new nr(this),await this.summarizer.setupSummarizaitonCommand()}async activateView(){let{workspace:e}=this.app,t=null,i=e.getLeavesOfType(bn);i.length>0?(t=i[0],await e.revealLeaf(t)):(t=e.getLeftLeaf(!1),t?(await t.setViewState({type:bn,active:!0}),await e.revealLeaf(t)):console.error("Could not find a leaf to open the view"))}async onLayoutReady(){await this.history.onLayoutReady()}async loadSettings(){this.settings=Object.assign({},wC,await this.loadData()),await this.updateModelVersions()}async updateModelVersions(){let{updatedSettings:e,settingsChanged:t,changedSettingsInfo:i}=Qs(this.settings);t&&(this.settings=e,console.log("ObsidianGemini: Updating model versions in settings..."),i.forEach(r=>console.log(`- ${r}`)),await this.saveData(this.settings),new Bf.Notice("Gemini model settings updated to current defaults."))}async saveSettings(){await this.saveData(this.settings),await this.setupGeminiScribe()}onunload(){var e,t;console.debug("Unloading Gemini Scribe"),(e=this.history)==null||e.onUnload(),(t=this.ribbonIcon)==null||t.remove()}};
/*! Bundled license information:

@google/genai/dist/web/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)

@google/genai/dist/web/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)

@google/genai/dist/web/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)

@google/genai/dist/web/index.mjs:
  (**
   * @license
   * Copyright 2025 Google LLC
   * SPDX-License-Identifier: Apache-2.0
   *)
*/


/* nosourcemap */