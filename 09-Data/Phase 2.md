# Phase 2: 심층 분석 및 패턴 추출 파이프라인 개요

## 1. 개요 (Overview) 📈

**목표:** Phase 1에서 구축한 데이터 파이프라인을 기반으로, 게임 내 다양한 요소들 간의 **상관관계와 인과관계**를 분석한다. '무엇'이 일어났는지를 넘어 '왜' 그랬는지를 설명하고, 사용자의 실력 향상에 직접적으로 도움이 될 **의미 있는 패턴을 자동으로 추출**하는 것을 목표로 한다.

## 2. 핵심 기능 명세 (Core Feature Specifications)

- **타임라인 데이터 처리:** `MatchTimelineDTO`를 파싱하여 아이템 구매 순서, 스킬 빌드 순서 등 시간의 흐름에 따른 데이터를 추출한다.
    
- **상관관계 분석:** 특정 행동(예: '첫 아이템으로 특정 아이템 구매')과 결과(예: '승률', '15분 골드') 사이의 통계적 상관관계를 계산한다.
    
- **패턴 추출 및 저장:** 통계적으로 유의미하다고 판단된 패턴들(예: "제이스가 '월식'을 첫 코어로 갔을 때 승률 12% 상승")을 별도의 DB 테이블에 저장한다.
    
- **복합 조건 질의(Query):** "이즈리얼이 '삼위일체'와 '무라마나'를 완성했을 때의 평균 DPM"과 같이, 여러 조건이 결합된 복합적인 통계 조회가 가능해진다.
    

## 3. 주요 구현 과업 (Key Implementation Tasks)

1. **타임라인 데이터 수집 추가:** 데이터 수집기에 `MatchTimelineDTO`를 요청하고 저장하는 로직을 추가한다. (필요시 Raw Data 저장)
    
2. **피처 엔지니어링 (Feature Engineering):**
    
    - 타임라인 데이터를 기반으로 '첫 코어 아이템', '두 번째 코어 아이템', '스킬 마스터 순서' 등 새로운 분석용 피처(변수)를 생성하는 모듈을 개발한다.
        
3. **통계 분석 모듈 개발:**
    
    - `Pandas`를 사용하여 데이터를 그룹화하고, `SciPy`, `Statsmodels` 라이브러리를 사용하여 상관계수, p-value 등을 계산하는 분석 스크립트를 작성한다.
        
4. **패턴 DB 스키마 설계:**
    
    - 아이템 빌드별 통계를 위한 `item_build_stats` 테이블, 발견된 패턴을 저장할 `discovered_patterns` 테이블 등을 새롭게 설계한다.
        
5. **분석 파이프라인 통합:**
    
    - 매일 수집된 데이터를 바탕으로 통계 분석 및 패턴 추출 스크립트가 자동으로 실행되도록 일일 파이프라인(`run_daily_pipeline.py`)에 통합한다.
        

## 4. 분석할 패턴 예시

- **아이템 빌드 경로 vs 승률:** 특정 1, 2, 3코어 아이템 순서에 따른 챔피언별 승률 및 KDA 변화.
    
- **스킬 마스터 순서 vs DPM:** Q, W, E 선마 순서에 따른 분당 데미지 효율.
    
- **첫 오브젝트 선택 vs 승률:** 첫 용과 첫 전령 중 무엇을 획득했는지가 게임 승패에 미치는 영향.
    
- **시야 점수와 생존율의 관계:** 포지션별로 분당 시야 점수와 평균 데스 수의 상관관계.